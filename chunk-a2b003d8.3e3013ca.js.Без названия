(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a2b003d8"],{"00c0":function(t,e,i){},"00d5":function(t,e,i){"use strict";i("b170")},"0524":function(t,e,i){},"083a":function(t,e,i){"use strict";var n=i("0d51"),s=TypeError;t.exports=function(t,e){if(!delete t[e])throw s("Cannot delete property "+n(e)+" of "+n(t))}},"0d11":function(t,e,i){t.exports=i.p+"img/send.29aa3236.svg"},"0d45":function(t,e,i){},"132b":function(t,e,i){t.exports=i.p+"img/online_loading.b4200a11.png"},"14eb":function(t,e,i){},1702:function(t,e,i){"use strict";i("14eb")},"1a3c":function(t,e,i){},"1bb3":function(t,e,i){"use strict";i("d88e")},"1c3e":function(t,e,i){"use strict";i("f0d9")},"1c9a":function(t,e,i){t.exports=i.p+"img/back.4a68c742.svg"},"219d":function(t,e,i){"use strict";i("70d9")},"26c1":function(t,e,i){},"2ba4":function(t,e,i){"use strict";var n=i("40d5"),s=Function.prototype,o=s.apply,r=s.call;t.exports="object"==typeof Reflect&&Reflect.apply||(n?r.bind(o):function(){return r.apply(o,arguments)})},"2ba5":function(t,e,i){"use strict";i("efa1")},"2ff3":function(t,e,i){t.exports=i.p+"img/close_light.661f9831.svg"},3147:function(t,e,i){t.exports=i.p+"img/admin.aeeafca5.svg"},3166:function(t,e,i){},"31f3":function(t,e,i){},"32ff":function(t,e,i){},3661:function(t,e,i){"use strict";i("3a6b")},3874:function(t,e,i){"use strict";i("f53a")},"3a6b":function(t,e,i){},"3c65":function(t,e,i){"use strict";var n=i("23e7"),s=i("7b0b"),o=i("07fa"),r=i("3a349"),a=i("083a"),c=i("3511"),l=1!==[].unshift(0),u=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(t){return t instanceof TypeError}},d=l||!u();n({target:"Array",proto:!0,arity:1,forced:d},{unshift:function(t){var e=s(this),i=o(e),n=arguments.length;if(n){c(i+n);var l=i;while(l--){var u=l+n;l in e?e[u]=e[l]:a(e,u)}for(var d=0;d<n;d++)e[d]=arguments[d]}return r(e,i+n)}})},"3d9e":function(t,e,i){},"3dcc":function(t,e,i){t.exports=i.p+"img/warning.8969ba5b.svg"},"3e30":function(t,e,i){},"3f00":function(t,e,i){t.exports=i.p+"img/icon_solve.f9b96d1b.svg"},"3fc9":function(t,e,i){t.exports=i.p+"img/packup.8029da90.svg"},4018:function(t,e,i){"use strict";i("88a7"),i("271a"),i("5494");var n=i("2f62"),s=i("cb24"),o=i.n(s);e["a"]={computed:{...Object(n["c"])("config",["pLocationInfo"])},methods:{...Object(n["b"])("zchat",["setChatStatusAction"]),logoutChat(){o.a.endChat({clear_dept_id_on_chat_ended:!0},()=>{this.setChatStatusAction(!1),o.a.setVisitorInfo({email:"",phone:"",display_name:""})})},commonlogin(){localStorage.removeItem("bymax_count");const{href:t}=this.pLocationInfo||{};let e="",i="",n="";if(t){const{origin:s="",pathname:o,search:r}=new URL(t);e=s,i=o,n=r}else{const{origin:t="",pathname:s,search:o}=new URL(window.top.window.location.href);e=t,i=s,n=o}n.includes("?")?n+="&type_max=bymax":n="?type_max=bymax";const s=`${e.replace("futures","www")}/${this.locale}/login/?backUrl=${i}${n}`;e.includes("futures")?top.postMessage({source:"baymax",action:"navigation",data:s},"*"):window.top.window.location.href=s},commonRegister(){const{href:t}=this.pLocationInfo||{};let e="",i="",n="";if(t){const{origin:s="",pathname:o,search:r}=new URL(t);e=s,i=o,n=r}else{const{origin:t="",pathname:s,search:o}=new URL(window.top.window.location.href);e=t,i=s,n=o}n.includes("?")?n+="&type_max=bymax":n="?type_max=bymax";const s=`${e.replace("futures","www")}/${this.locale}/register/?backUrl=${i}${n}`;e.includes("futures")?top.postMessage({source:"baymax",action:"navigation",data:s},"*"):window.top.window.location.href=s}}}},"40a6":function(t,e,i){"use strict";i("8653")},"432b":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"chat-service-widget"},[t.serviceShow?e("ServiceWidget"):[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isSelfWin||!t.isSelfWin&&t.configReady,expression:"isSelfWin || (!isSelfWin && configReady)"}],staticClass:"chat-img",on:{click:t.chatClick}},[e("img",{attrs:{src:i("9cfe")}})])]],2)},s=[],o=(i("c73d"),i("88a7"),i("271a"),i("5494"),i("2f62")),r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"chat-widget",class:[t.isDesktop?"chat-widget_pc":"chat-widget_mobile",t.isApp?"chat-widget_app":"",t.theme.indexOf("light")>-1?"":"chat-widget_dark"]},[e("div",{staticClass:"chat-widget-wrapper"},[t.chatLoading?e("Loading"):e("div",{staticClass:"chat-widget-container",class:{chat_scroll:t.isChatScroll}},[e("div",{staticClass:"chat-header",class:[t.isTG?"chat-widget_tg":""]},[t.isTG||t.isDesktop?e("div",{staticClass:"back-container"},[e("div",{staticClass:"close",on:{click:t.closeClick}},[e("img",{attrs:{src:t.theme.indexOf("light")>-1?i("7c55"):i("2ff3"),alt:"back"}})])]):t._e(),e("div",{staticClass:"title-wrapper"},[e("div",{staticClass:"title-container"},[e("h1",{staticClass:"title"},[t._v(t._s(t.$t("home.serviceCenter")))]),e("p",{staticClass:"sub-title"},[t._v(t._s(t.$t("home.subTitle")))])]),e("div",{staticClass:"robot"},[e("img",{attrs:{src:i("4fce"),alt:"robot"}})])]),e("div",{staticClass:"button-container"},[e("div",{staticClass:"button",on:{click:t.orderClick}},[e("span",[t._v(t._s(t.$t("home.orderName")))])]),e("div",{staticClass:"button button-contact",on:{click:t.serviceClick}},[e("span",[t._v(t._s(t.$t("home.chart")))])])])]),e("div",{staticClass:"chat-content-wrapper"},[e("TopNotice"),e("div",{staticClass:"chat-content-container"},[e("SelfService"),e("CommonQuestion"),e("GuessAsk"),e("LatestNotice")],1)],1)])],1),e("ChatWidget",{attrs:{"chat-show":t.chatShow}}),e("LoginDialog"),t.loginDialogShow?e("LoginPopupDialog"):t._e(),t.myOrderDialogShow?e("MyOrderDialog"):t._e(),e("Toast",{attrs:{info:t.toastInfo}})],1)},a=[],c=function(){var t=this,e=t._self._c;return t.ticketList.length?e("div",{staticClass:"self-service-container"},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("home.selfService")))]),e("div",{staticClass:"content"},[e("div",{ref:"serviceRef",staticClass:"service-wrapper",on:{touchend:function(e){return t.touchEnd()}}},[e("div",{ref:"serviceListRef",staticClass:"service-list"},t._l(t.ticketList,(function(i,n){return e("div",{key:n,staticClass:"service-item",on:{click:function(e){return t.linkClick(i)}}},[e("div",{staticClass:"service"},[e("img",{attrs:{src:i.fImageUrl}}),e("p",[t._v(t._s(i.fShowName))])])])})),0)]),t.showPage?[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isPrev,expression:"isPrev"}],staticClass:"button-prev",on:{click:function(e){return t.prevClick()}}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isNext,expression:"isNext"}],staticClass:"button-next",on:{click:function(e){return t.nextClick()}}})]:t._e(),e("div",{staticClass:"slider-wrapper"},[e("div",{staticClass:"slider-container"},[e("div",{staticClass:"slider-bar",style:`width: ${t.barWidth}%`})])])],2)]):t._e()},l=[],u=i("6f82"),d={name:"SelfService",mixins:[u["a"]],data(){return{barWidth:0,stepWidth:240,step:null,next:!1,page:0,serviceDom:null,serviceListDom:null}},computed:{...Object(o["c"])("base",["isDesktop"]),showPage(){return this.isDesktop&&this.ticketList.length>4},isPrev(){return this.step>0},isNext(){return!this.next&&this.ticketList.length>4}},mounted(){this.serviceListDom=this.$refs.serviceListRef,this.serviceListDom&&(this.page=parseInt(this.serviceListDom.scrollWidth/this.stepWidth,10),this.serviceDom=this.$refs.serviceRef,this.step=0)},methods:{touchEnd(){const{scrollLeft:t}=this.serviceDom;this.barWidth=(400+t)/this.serviceListDom.scrollWidth*100},prevClick(){this.step-=1;const t=this.stepWidth*this.step;0===t&&(this.next=!1);const e=this.$refs.serviceListRef;e.style.transform=`translateX(-${t}px)`},nextClick(){if(this.next)return;this.step+=1;const{scrollWidth:t,offsetWidth:e}=this.serviceDom,i=this.stepWidth*this.step;console.log("next :>> ",t,e,i),i-16>e&&(this.next=!0);const n=this.$refs.serviceListRef;n.style.transform=`translateX(-${i}px)`}},watch:{step:{handler(t){this.barWidth=(t+1)/this.page*100}}}},h=d,p=(i("b372"),i("2877")),f=Object(p["a"])(h,c,l,!1,null,"41e641a4",null),m=f.exports,g=function(){var t=this,e=t._self._c;return e("div",{staticClass:"common-question-container"},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("home.commonQuestion")))]),e("div",{staticClass:"content"},[e("div",{staticClass:"question-type-list"},t._l(t.questionTreeList,(function(i,n){return e("div",{key:n,staticClass:"question-type-item",class:{active:i.questionId===t.curQuestionType.questionId},on:{click:function(e){return t.questionTypeClick(i)}}},[e("span",[t._v(t._s(i.question))])])})),0),e("div",{staticClass:"question-container"},[t.questionList.length?e("div",{staticClass:"question-list"},t._l(t.questionList,(function(i,n){return e("div",{key:n,staticClass:"question-item",on:{click:function(e){return t.questionClick(i)}}},[e("span",{staticClass:"question-tag",class:{"question-hot":n>2}},[t._v(t._s(n+1))]),e("span",{staticClass:"question-txt"},[t._v(t._s(i.question))])])})),0):e("div",{staticClass:"other-container"},[t.isLoading?e("img",{attrs:{src:i("132b"),alt:"loading"}}):e("img",{attrs:{src:i("61cd"),alt:"no-data"}})]),e("div",{staticClass:"change-container"},[e("div",{staticClass:"change",on:{click:function(e){return t.changeClick()}}},[e("i",{staticClass:"htx-icon htx-icon-switch-outline"}),e("span",[t._v(" "+t._s(t.$t("home.changeTxt"))+" ")])])])])])])},v=[],_=i("f953"),b={name:"CommonQuestion",data(){return{questionTypeList:[],questionList:[],isLoading:!1,curPage:1,pageTotal:0}},beforeMount(){var t;this.questionList=(null===(t=this.curQuestionType)||void 0===t?void 0:t.childList)||[]},computed:{...Object(o["c"])("base",["sceneCode","questionTreeList","curQuestionType"])},methods:{...Object(o["b"])("base",["setCurQuestionTypeAction"]),...Object(o["b"])("zchat",["setQuestionAction","updateChatListAction"]),questionTypeClick(t){this.curPage=1,window.sensors.track("customer_sc_tab_click",{tab_id:t.questionId}),this.questionList=(null===t||void 0===t?void 0:t.childList)||[],this.setCurQuestionTypeAction(t)},questionClick(t){window.sensors.track("customer_sc_content_click",{commId:t.commId,commPid:t.commPid,questionId:t.questionId}),this.setQuestionAction({questionId:t.questionId||"",question:t.question||"",baseInfo:""}),this.$bus.emit("chatWidgetEvent",!0)},changeClick(){this.getChangeQuestionList()},async getChangeQuestionList(){try{this.curPage>this.pageTotal&&(this.curPage=1),window.sensors.track("newcustomer_click",{button_name:"swtich"}),this.isLoading=!0,this.questionList=[];const t={sceneCode:this.sceneCode,commId:this.curQuestionType.commId,offset:this.curPage,limit:5},{data:e,success:i}=await _["a"].changeQuestion(t);i&&(this.pageTotal=(null===e||void 0===e?void 0:e.pageTotal)||0,this.questionList=(null===e||void 0===e?void 0:e.questions)||[],this.curPage+=1),this.isLoading=!1}catch(t){this.isLoading=!1,console.log("error :>> ",t)}}},watch:{curQuestionType:{handler(){this.getChangeQuestionList()},deep:!0}}},w=b,y=(i("3661"),Object(p["a"])(w,g,v,!1,null,"fd404af4",null)),k=y.exports,$=function(){var t=this,e=t._self._c;return e("div",{staticClass:"guess-ask-container common-service-container"},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("home.guessAsk")))]),e("div",{staticClass:"content"},[t.guessAskList.length?e("div",{staticClass:"list"},t._l(t.guessAskList,(function(i,n){return e("div",{key:n,staticClass:"item",on:{click:function(e){return t.guessClick(i)}}},[e("div",{staticClass:"txt"},[e("p",[t._v(t._s(i.name))])]),e("i",{staticClass:"htx-icon htx-icon-arrow-outline",staticStyle:{"font-size":"12px",color:"var(--Text-L4)"}})])})),0):e("div",{staticClass:"no-data"},[e("img",{attrs:{src:i("61cd"),alt:"no-data"}})])])])},C=[],E={name:"GuessAsk",data(){return{guessAskList:[]}},computed:{...Object(o["c"])("base",["isApp"])},mounted(){this.initData()},methods:{...Object(o["b"])("zchat",["setQuestionAction"]),initData(){this.isApp?this.$callNative("00000000",({data:t})=>{console.log("uid :>> ",t.uid),setTimeout(()=>{this.getHomeQuestionGuess()},600)}):this.getHomeQuestionGuess()},async getHomeQuestionGuess(){try{const{data:t,success:e}=await _["a"].getQuestionGuessList({from:"home"});e&&(this.guessAskList=t||[]);const i=this.guessAskList.map(t=>t.id),n=this.guessAskList.map(t=>t.cs_base_info);window.sensors.track("newcustomer_recshow",{pagetype:"home",qustionid:JSON.stringify(i),cs_base_info:JSON.stringify(n)})}catch(t){console.log("error :>> ",t)}},guessClick(t){window.sensors.track("newcustomer_click",{button_name:"guess",pagetype:"home",qustionid:t.id,cs_base_info:t.cs_base_info||""}),this.setQuestionAction({questionId:t.id||"",question:t.name||"",baseInfo:t.cs_base_info||""}),this.$bus.emit("chatWidgetEvent",!0)}}},x=E,O=(i("e28a"),i("2ba5"),Object(p["a"])(x,$,C,!1,null,"d00df184",null)),A=O.exports,T=function(){var t=this,e=t._self._c;return e("div",{staticClass:"latest-notice-container common-service-container"},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("home.latestNotice")))]),e("div",{staticClass:"content"},[t.noticeList.length?e("div",{staticClass:"list"},t._l(t.noticeList,(function(i,n){return e("div",{key:n,staticClass:"item",on:{click:function(e){return t.noticeClick(i)}}},[e("div",{staticClass:"txt"},[e("p",[t._v(t._s(i.title))])]),e("i",{staticClass:"htx-icon htx-icon-arrow-outline",staticStyle:{"font-size":"12px",color:"var(--Text-L4)"}})])})),0):e("div",{staticClass:"no-data"},[e("img",{attrs:{src:i("61cd"),alt:"no-data"}})])])])},L=[],I={name:"LatestNotice",data(){return{noticeList:[]}},computed:{...Object(o["c"])("base",["locale","isApp"])},mounted(){this.initData()},methods:{initData(){this.getNotice()},async getNotice(){try{const{data:t,success:e}=await _["a"].getNoticeList();e&&(this.noticeList=t||[])}catch(t){console.log("error :>> ",t)}},noticeClick(t){window.sensors.track("newcustomer_click",{button_name:"support",supportid:t.id});let e=location.origin;location.origin.includes("localhost")&&(e="https://www.huobi.com");const i=`${e}/support/${this.locale}/detail/${t.id}`;this.isApp?this.$callNative("20010043",{url:i,titleBack:"back"}):window.open(i,"_blank")}}},S=I,D=(i("7c69"),i("8093"),Object(p["a"])(S,T,L,!1,null,"57fdc628",null)),P=D.exports,R=function(){var t=this,e=t._self._c;return t.noticeInfo.title?e("div",{staticClass:"notice-container"},[e("div",{staticClass:"notice-tips"},[e("img",{staticClass:"img-tips",attrs:{src:i("3dcc"),alt:"tips"}}),e("div",{staticClass:"notice-txt",on:{click:t.noticeClick}},[e("p",[t._v(t._s(t.noticeInfo.title))])]),e("i",{staticClass:"htx-icon htx-icon-arrow-outline",staticStyle:{"font-size":"12px",color:"var(--Text-L4)"}})]),e("NoticeDialog",{attrs:{noticeInfo:t.noticeInfo,dialogVisible:t.noticeDialogVisible},on:{"update:dialogVisible":function(e){t.noticeDialogVisible=e},"update:dialog-visible":function(e){t.noticeDialogVisible=e}}})],1):t._e()},N=[],q=function(){var t=this,e=t._self._c;return t.dialogVisible?e("div",{staticClass:"notice-popup-container"},[e("el-dialog",{attrs:{visible:!0,width:"325px","custom-class":"notice-dialog-container","modal-append-to-body":!1,"show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1}},[e("div",{staticClass:"popup-container"},[e("div",{staticClass:"header"},[e("H2",[t._v(t._s(t.noticeInfo.title))])],1),e("div",{staticClass:"body"},[e("div",{staticClass:"content",domProps:{innerHTML:t._s(t.noticeInfo.content)}})]),e("div",{staticClass:"footer"},[e("div",{staticClass:"button-container"},[e("button",{staticClass:"button",on:{click:function(e){return e.stopPropagation(),t.btnCloseClick.apply(null,arguments)}}},[e("span",[t._v(t._s(t.$t("notice.buttonText")))])])])])])])],1):t._e()},j=[],V={name:"NoticeDialog",props:{noticeInfo:{type:Object,default(){return{}}},dialogVisible:{type:Boolean,default:!1}},methods:{btnCloseClick(){this.$emit("update:dialogVisible",!1)}}},M=V,U=(i("c915"),Object(p["a"])(M,q,j,!1,null,"2e887480",null)),z=U.exports,W={name:"TopNotice",components:{NoticeDialog:z},data(){return{noticeDialogVisible:!1,noticeInfo:{}}},mounted(){this.initData()},methods:{initData(){this.getPopUp()},async getPopUp(){try{const{data:t,success:e}=await _["a"].getPopUpInfo();e&&(this.noticeInfo=t||{})}catch(t){console.log("error :>> ",t)}},noticeClick(){window.sensors.track("newcustomer_click",{button_name:"notice"}),this.noticeDialogVisible=!0}}},K=W,B=(i("54be"),Object(p["a"])(K,R,N,!1,null,"0f8cc7ea",null)),F=B.exports,H=i("c205"),Q=function(){var t=this,e=t._self._c;return e("div",{staticClass:"dialog-wrapper login-form-wrapper"},[e("el-dialog",{attrs:{visible:t.loginFormShow,width:"325px","custom-class":"login-dialog-container","modal-append-to-body":!1,"show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1}},[e("div",{staticClass:"dialog-container"},[e("div",{staticClass:"header"},[e("span",[t._v(t._s(t.$t("dialog.prechat/title")))])]),e("div",{staticClass:"content"},[e("div",{staticClass:"input-wrap email"},[e("div",{staticClass:"name required"},[t._v(t._s(t.$t("dialog.prechat/email")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.email,expression:"formData.email"}],attrs:{type:"text",placeholder:t.$t("dialog.prechat/emailPlaceholder")},domProps:{value:t.formData.email},on:{input:function(e){e.target.composing||t.$set(t.formData,"email",e.target.value)}}}),t.emailError?e("div",{staticClass:"error"},[t._v(" "+t._s(t.$t("dialog.prechat/emailError"))+" ")]):t._e()]),t.isKorea?e("div",{staticClass:"input-wrap"},[e("div",{staticClass:"name required"},[t._v("UID")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.uid,expression:"formData.uid"}],attrs:{type:"text",placeholder:"uid를 입력하십시오"},domProps:{value:t.formData.uid},on:{input:function(e){e.target.composing||t.$set(t.formData,"uid",e.target.value)}}}),t.uidError||t.uidVaildError?e("div",{staticClass:"error"},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.uidError,expression:"uidError"}]},[t._v(" uid 가 비어 있을 수 없습니다 ")]),e("span",{directives:[{name:"show",rawName:"v-show",value:t.uidVaildError,expression:"uidVaildError"}]},[t._v(" uid 형식이 올바르지 않습니다 ")])]):t._e()]):t._e(),e("div",{staticClass:"input-wrap"},[e("div",{staticClass:"name"},[t._v(t._s(t.$t("dialog.prechat/phone")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.phone,expression:"formData.phone"}],attrs:{type:"text",maxlength:"25",placeholder:t.$t("dialog.prechat/phonePlaceholder")},domProps:{value:t.formData.phone},on:{input:function(e){e.target.composing||t.$set(t.formData,"phone",e.target.value)}}}),t.phoneError?e("div",{staticClass:"error"},[t._v(" "+t._s(t.$t("dialog.prechat/phoneError"))+" ")]):t._e()])]),e("div",{staticClass:"footer"},[t.isApp?t._e():e("button",{staticClass:"cancel",on:{click:t.closeClick}},[t._v(" "+t._s(t.$t("dialog.rating/logout"))+" ")]),e("button",{staticClass:"confirm",on:{click:t.btnSubmitClick}},[t._v(" "+t._s(t.$t("dialog.confirm"))+" ")])])])])],1)},G=[],Y=i("cb24"),J=i.n(Y),X={data(){return{emailError:!1,uidError:!1,uidVaildError:!1,phoneError:!1,formData:{email:"",uid:"",phone:""}}},computed:{...Object(o["c"])("base",["isApp","loginFormShow","locale","isKorea"]),...Object(o["c"])("zchat",["socketSatus"])},watch:{formData:{handler(t){this.isKorea&&(this.uidError=!t.uid,t.uid&&(this.uidVaildError=!/^[1-9]\d*$/.test(t.uid)))},deep:!0}},methods:{...Object(o["b"])("base",["setLoginFormAction","setVisitorInfoAction","setVisibleAction"]),...Object(o["b"])("zchat",["updateChatListAction"]),closeClick(){this.formData.email="",this.formData.phone="",this.formData.uid="",this.emailError=!1,this.phoneError=!1,this.isApp?this.$callNative("20010006"):(this.setLoginFormAction(!1),this.setVisibleAction(!1))},async btnSubmitClick(){window.sensors.track("customer_sc_customer_confirm_click");const{email:t,phone:e,uid:i}=this.formData;this.emailError=!J.a.EMAIL_REGEX.test(t),this.phoneError=!/^[0-9]{0,25}$/.test(e);let n="";if(this.isKorea){if(this.uidError=!i,n="UID: "+i,this.uidError)return;if(this.uidVaildError=!/^[1-9]\d*$/.test(i),this.uidVaildError)return}if(this.emailError||this.phoneError)return;const s={email:t,phone:e,displayName:n};localStorage.setItem("visitor_info",JSON.stringify(s)),this.setVisitorInfoAction(s),this.setLoginFormAction(!1)}}},Z=X,tt=(i("59b6"),Object(p["a"])(Z,Q,G,!1,null,"0bb3837a",null)),et=tt.exports,it=function(){var t=this,e=t._self._c;return e("div",{staticClass:"order-popup-container"},[e("el-dialog",{attrs:{visible:!0,"custom-class":"order-dialog-container","modal-append-to-body":!1,"show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1}},[e("div",{staticClass:"popup-container"},[e("div",{staticClass:"header"},[e("span",{staticClass:"title"},[t._v(t._s(t.$t("order.title")))]),e("div",{staticClass:"close",on:{click:function(e){return e.stopPropagation(),t.closeClick.apply(null,arguments)}}},[e("i",{staticClass:"htx-icon htx-icon-close-outline"})])]),e("div",{staticClass:"body"},[t.orderList.length?e("div",{staticClass:"order-list"},t._l(t.orderList,(function(i,n){return e("div",{key:n,staticClass:"order-item"},[e("div",{class:["order-box",{"box-hover":null===i||void 0===i?void 0:i.jumpPath}],on:{click:function(e){return e.stopPropagation(),t.skipClick(null===i||void 0===i?void 0:i.jumpPath)}}},[e("div",{staticClass:"order-content"},[e("div",{staticClass:"title"},[t._v(t._s((null===i||void 0===i?void 0:i.name)||""))]),e("div",{staticClass:"time"},[t._v(t._s(t._f("formatDate")(null===i||void 0===i?void 0:i.time)))])]),e("div",{staticClass:"status"},[t._v(" "+t._s(t.statusVal((null===i||void 0===i?void 0:i.status)||""))+" "),null!==i&&void 0!==i&&i.jumpPath?e("i",[t._v(">")]):t._e()])])])})),0):e("div",{staticClass:"no-data"},[e("img",{attrs:{src:i("61cd"),alt:"no-data"}})])])])])],1)},nt=[],st={name:"MyOrderDialog",data(){return{offset:1,limit:5,orderList:[]}},computed:{...Object(o["c"])("base",["sceneCode","isApp","locale"])},mounted(){this.initData()},methods:{initData(){this.getOrderList()},async getOrderList(){try{this.isLoading=!0,this.orderList=[];const t={offset:this.offset,limit:this.limit},{data:e,success:i,message:n}=await _["a"].getWorkOrderList(t);i?this.orderList=e||[]:this.$bus.emit("toastEvent",{time:2e3,type:"error",msg:n})}catch(t){console.log("error :>> ",t)}},statusVal(t){let e="";switch(t){case 1:e=this.$i18n.t("order.status/review");break;case 2:e=this.$i18n.t("order.status/additionalInfo");break;case 3:e=this.$i18n.t("order.status/approved");break;case 4:e=this.$i18n.t("order.status/reject");break;case 5:e=this.$i18n.t("order.status/completed");break;case 6:e=this.$i18n.t("order.status/finished");break;default:e="";break}return e},closeClick(){this.$bus.emit("myOrderDialogEvent")},skipClick(t){if(!t)return;const e=`${location.origin}/${this.locale}${t}`;this.isApp?this.$callNative("20010043",{url:e,titleBack:"back"}):window.open(e,"_blank")}}},ot=st,rt=(i("df7ea"),Object(p["a"])(ot,it,nt,!1,null,"78a3c96d",null)),at=rt.exports,ct=function(){var t=this;t._self._c;return t._m(0)},lt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"loading-popup-container"},[e("div",{staticClass:"popup-box"},[e("div",{staticClass:"logo-container"},[e("div",{staticClass:"icon-circle"}),e("img",{attrs:{src:i("9cfe"),alt:"logo"}})])])])}],ut=(i("71d7"),{}),dt=Object(p["a"])(ut,ct,lt,!1,null,"75bf5997",null),ht=dt.exports,pt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"toast-container"},[e("transition",{attrs:{name:"slide-fade",appear:!0}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow&&t.info.msg,expression:"isShow && info.msg"}],class:"error"===t.info.type?"toast-error":"toast-success"},[e("i",{staticClass:"toast-icon",class:"error"===t.info.type?"icon-toast-error":"icon-info"}),e("span",{staticClass:"toast-content"},[t._v(t._s(t.info.msg))])])])],1)},ft=[],mt={props:{info:{type:Object,default(){return{}}}},data(){return{isShow:!0}},methods:{hideMessage(){setTimeout(()=>{this.isShow=!1},this.info.time||2e3)}},watch:{info:{handler(){this.isShow=!0,this.hideMessage()},deep:!0}}},gt=mt,vt=(i("7b41"),Object(p["a"])(gt,pt,ft,!1,null,"4068b42b",null)),_t=vt.exports,bt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"chat-wrapper",class:t.mobileClassObj},[e("el-dialog",{attrs:{visible:t.chatShow,"custom-class":"chat-dialog-container","modal-append-to-body":!1,"show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1}},[e("div",{staticClass:"chat-container"},[e("div",{staticClass:"header"},[e("div",{staticClass:"header-container"},[e("div",{staticClass:"back",on:{click:function(e){return t.backClick()}}},[e("img",{attrs:{src:t.theme.indexOf("light")>-1?i("1c9a"):i("8817"),alt:"back"}})]),e("p",[t._v(t._s(t.$t("home.serviceCenter")))]),e("div",{staticClass:"close",on:{click:function(e){return t.closeClick()}}},[e("img",{staticStyle:{width:"10px"},attrs:{src:t.theme.indexOf("light")>-1?i("7c55"):i("2ff3"),alt:"close"}})])])]),e("div",{staticClass:"body flex-layout"},[e("div",{staticClass:"flex-layout"},[e("el-scrollbar",{ref:"scrollbarRef"},[e("div",{staticClass:"chat-msg-wrapper"},[t.showHistory?e("div",{staticClass:"chat-history-wrapper"},[e("div",{staticClass:"btn-action"},[e("button",{directives:[{name:"show",rawName:"v-show",value:"show-more"===t.listState,expression:"listState === 'show-more'"}],on:{click:t.loadHistoryClick}},[t._v(" "+t._s(t.$t("base.history/view"))+" ")]),e("div",{directives:[{name:"show",rawName:"v-show",value:"loading"===t.listState,expression:"listState === 'loading'"}],staticClass:"loading"}),e("span",{directives:[{name:"show",rawName:"v-show",value:"no-more-data"===t.listState,expression:"listState === 'no-more-data'"}],staticClass:"no-data"},[t._v(" "+t._s(t.$t("base.history/noData"))+" ")])])]):t._e(),t._l(t.chatList,(function(i,n){return e(t.activeComponent(i.type),{key:n,tag:"component",attrs:{chatObj:i}})})),e("AgentTips")],2)])],1)]),e("div",{staticClass:"footer"},[e("Footer",{ref:"footerRef"})],1)])]),e("LogoutDialog",{attrs:{dialogVisible:t.logoutDialogVisible},on:{"update:dialogVisible":function(e){t.logoutDialogVisible=e},"update:dialog-visible":function(e){t.logoutDialogVisible=e}}}),e("ChatRatingDialog")],1)},wt=[],yt=(i("3c65"),i("13d5"),i("14d9"),i("e074")),kt=i("4018"),$t=i("d930"),Ct=function(){var t=this,e=t._self._c;return t.showQueueInfo?e("div",{staticClass:"agent-tips-container"},[t.loading?e("div",{staticClass:"message-loading"}):e("div",{staticClass:"tips-container"},[e("div",{staticClass:"message-container"},[e("p",[t._v(t._s(t.$t("base.queue/connecting")))]),e("p",{domProps:{innerHTML:t._s(t.queueInfo)}}),t.showTicket?e("p",[t._v(t._s(t.$t("base.queue/desc")))]):t._e()]),t.showTicket?e("div",{staticClass:"ticket-container"},[e("a",{ref:"noopener noreferrer",attrs:{href:t.ticketUrl,target:"_blank"},on:{click:t.goTicketTrack}},[t._v(" "+t._s(t.$t("base.ticket"))+" ")])]):t._e()])]):t._e()},Et=[],xt={name:"AgentTips",data(){return{loading:!1}},computed:{...Object(o["c"])("base",["locale"]),...Object(o["c"])("zchat",["queuePosition","isChatting"]),showTicket(){return this.queuePosition>10},showQueueInfo(){return this.isChatting&&this.queuePosition>0},queueInfo(){return`${this.$i18n.t("base.queue/position")}<span>${this.queuePosition}</span>`},ticketUrl(){return`https://huobiglobal.zendesk.com/hc/${this.locale}/requests/new?ticket_form_id=24220886681243`}},methods:{goTicketTrack(){window.sensors.track("customer_sc_submit_system_click")}},watch:{showQueueInfo(t){t&&(this.loading=!0,setTimeout(()=>{this.loading=!1,this.$bus.emit("toBottomEvent")},500))}}},Ot=xt,At=(i("6def"),Object(p["a"])(Ot,Ct,Et,!1,null,"14b3baf8",null)),Tt=At.exports,Lt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"footer-container"},[e("div",{staticClass:"content"},[t.agentMemberjoin?e("div",{staticClass:"attachment"},[e("button",{staticClass:"upload-file-container"},[e("img",{attrs:{src:i("a183"),alt:"attachment"}}),e("input",{attrs:{type:"file",accept:"image/png"},on:{change:t.uploadFile}})])]):e("div",{staticClass:"chat",on:{click:function(e){return t.humanChatClick("footer")}}},[e("img",{attrs:{src:i("c3c2"),alt:"chat"}})]),e("div",{staticClass:"msg"},[e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.txtVal,expression:"txtVal",modifiers:{trim:!0}}],staticClass:"txt",attrs:{type:"text",maxlength:"1000",placeholder:t.$t("base.inputQuestion")},domProps:{value:t.txtVal},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendClick.apply(null,arguments)},focus:t.inputFocus,input:function(e){e.target.composing||(t.txtVal=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),e("div",{staticClass:"send",class:{send_active:t.isActive},on:{click:function(e){return t.sendClick()}}})]),t.sensitiveWordShow?e("div",{staticClass:"word-toast-container"},[e("div",{staticClass:"word-box"},[e("img",{attrs:{src:i("d48f")}}),e("span",[t._v(" "+t._s(t.$t("base.sensitiveWordTips")))])])]):t._e(),e("MatchQuestion",{directives:[{name:"show",rawName:"v-show",value:t.questionList.length,expression:"questionList.length"}],attrs:{questionList:t.questionList},on:{userInputEvent:t.handleQuestion}}),e("ChatQueue"),e("TypingTips"),t.showLoginDialog?e("LoginPopupDialog",{attrs:{source:"detail"},on:{close:t.close}}):t._e()],1)},It=[],St=i("9d32"),Dt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"question-container",style:{bottom:(t.queueShow?112:72)+"px"}},[e("div",{staticClass:"content"},[e("div",{staticClass:"list"},t._l(t.questionList,(function(i,n){return e("div",{key:n,staticClass:"item",on:{click:function(e){return t.questionClick(i)}}},[e("div",{staticClass:"txt"},[t._v(" "+t._s(i.question)+" ")])])})),0)])])},Pt=[],Rt={name:"MatchQuestion",props:{questionList:{type:Array,default(){return[]}}},computed:{...Object(o["c"])("zchat",["queuePosition"]),queueShow(){return this.queuePosition>0}},methods:{questionClick(t){this.$emit("userInputEvent",t)}}},Nt=Rt,qt=(i("decc"),Object(p["a"])(Nt,Dt,Pt,!1,null,"66debb93",null)),jt=qt.exports,Vt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"chat-queue-container",class:{show:t.queueShow,hide:!t.queueShow}},[e("img",{attrs:{src:i("47a1"),alt:"chat"}}),e("span",{domProps:{innerHTML:t._s(t.queueText)}})])},Mt=[],Ut={name:"ChatQueue",computed:{...Object(o["c"])("zchat",["queuePosition"]),queueText(){return this.$i18n.t("base.queue/topPostion",[`<em>${this.queuePosition}</em>`])},queueShow(){return this.queuePosition>0}}},zt=Ut,Wt=(i("af91"),Object(p["a"])(zt,Vt,Mt,!1,null,"c199bd92",null)),Kt=Wt.exports,Bt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"typing-container",class:{show:t.typingShow,hide:!t.typingShow}},[e("Avatar",{staticClass:"avatar"}),e("div",{staticClass:"typing-txt"},[e("span",[t._v(t._s(t.$t("customer.ininput").replace("#name#",t.agentInfo.display_name)))])])],1)},Ft=[],Ht=i("7b64"),Qt={name:"Typing",components:{Avatar:Ht["a"]},computed:{...Object(o["c"])("zchat",["agentInfo","agentMemberjoin","queuePosition","typing"]),typingShow(){return 0===this.queuePosition&&this.agentMemberjoin&&this.typing}}},Gt=Qt,Yt=(i("d74b"),Object(p["a"])(Gt,Bt,Ft,!1,null,"24133de2",null)),Jt=Yt.exports;const Xt=i("5a0c");var Zt={name:"FooterWidget",mixins:[yt["a"]],components:{MatchQuestion:jt,ChatQueue:Kt,TypingTips:Jt},data(){return{txtVal:"",questionList:[],uploading:!1,sensitiveWordList:[],sensitiveWordExpList:[],sensitiveWordShow:!1,sendEnable:!1}},computed:{...Object(o["c"])("base",["isApp","locale"]),...Object(o["c"])("zchat",["isChatting","agentMemberjoin","agentInfo"]),isActive(){return this.txtVal.trim().length>0}},mounted(){this.initData(),this.getQuestionList=Object(St["a"])(300,this.getQuestionList)},methods:{...Object(o["b"])("base",["setSensitiveWordsAction"]),...Object(o["b"])("zchat",["setQuestionAction","updateChatListAction"]),initData(){this.getDefaultConfig()},async getDefaultConfig(){const{success:t,data:e}=await _["a"].getDefaultConfigList();let i=[];t&&(i=e||[]);const n=i.find(t=>3===t.number);if(n&&n.data){var s;const t=(null===(s=n.data)||void 0===s?void 0:s.patternContent)||"";if(t){const e=JSON.parse(t);Object.keys(e).length&&(this.sensitiveWordList=e.word?e.word.split(","):[],this.sensitiveWordExpList=e.exp?e.exp.split(","):[])}}else console.log("当前语言没有配置用户侧敏感词");const o=i.find(t=>4===t.number);if(o&&o.data){var r;const t=(null===(r=o.data)||void 0===r?void 0:r.patternContent)||"";if(t){const e=JSON.parse(t);Object.keys(e).length&&e.word&&this.setSensitiveWordsAction(e)}}else console.log("当前语言没有配置客服侧敏感词")},uploadFile(t){if(this.uploading)return;this.uploading=!0;const e=t.target.files[0],i=e.size/1024;if(i>2e4)return this.$bus.emit("toastEvent",{type:"error",msg:this.$i18n.t("base.uploadError")}),t.target.value="",void(this.uploading=!1);this.updateChatListAction([{type:"user",info:{type:"media",message:e}}]),t.target.value="",this.uploading=!1},inputFocus(){this.txtVal.trim()||(this.questionList=[]),this.$bus.emit("toBottomEvent")},async sendClick(){let{txtVal:t}=this;if(t.trim()){if(!this.sendEnable){if(this.sensitiveWordList.length){const e=new RegExp(this.sensitiveWordList.join("|"),"ig");if(e.test(t)){let i="";if(this.sensitiveWordExpList.length){const n=new RegExp(this.sensitiveWordExpList.join("|"),"ig");let s={};t=t.replace(n,(t,e)=>(s["baymax_"+e]=t,"baymax_"+e));const o=t.match(e);i=[...new Set(o)].join(","),Object.keys(s).length>0&&(t=t.replace(new RegExp(Object.keys(s).join("|"),"ig"),t=>s[""+t])),s={}}else{const n=t.match(e);i=[...new Set(n)].join(",")}if(i){this.sendEnable=!0;const e=setInterval(()=>{this.sendEnable=!1,clearInterval(e)},3e3),n={blocks:[{type:"section",text:{type:"mrkdwn",text:"客户发送的消息中存在敏感词"}},{type:"section",text:{type:"mrkdwn",text:`*客户UID:* ${this.uid} \n*客服名称:* ${this.agentInfo.display_name} \n*敏感词:* ${i} \n*消息内容:* ${t} \n*发送时间:* ${Xt(+new Date).format("YYYY-MM-DD HH:mm:ss")} \n`}}]},s=await _["a"].userRobotSend(n);return"ok"===s.data&&console.log("发送成功"),void(this.isApp?this.$bus.emit("toastEvent",{time:2e3,type:"error",msg:this.$i18n.t("base.sensitiveWordTips")}):(this.sensitiveWordShow=!0,setTimeout(()=>{this.sensitiveWordShow=!1},2e3)))}}}this.setQuestionAction({}),window.sensors.track("customer_sc_send_click"),this.updateChatListAction([{type:"user",info:{message:t}}]),this.isChatting?J.a.sendChatMsg(t,t=>{t&&console.log("Error occured >>>",t)}):this.$bus.emit("searchQuestionEvent",{question:t}),this.clearSearch(),this.isApp&&setTimeout(()=>{this.$bus.emit("toBottomEvent")},2e3)}}else this.$bus.emit("toastEvent",{time:1500,type:"error",msg:"zh-cn"===this.locale?"不能为空！":"Cannot be empty"})},async getQuestionList(){try{this.questionList=[];const{data:t,success:e}=await _["a"].getQuestionByKeyList({keyWords:this.txtVal});e&&(this.questionList=t||[])}catch(t){console.log("error :>> ",t)}},handleQuestion(t){this.setQuestionAction({questionId:t.questionId||"",question:t.question||"",baseInfo:""}),this.$bus.emit("chatWidgetEvent",!0),this.clearSearch(),window.sensors.track("customer_sc_send_content_click",{content_id:t.questionId})},clearSearch(){this.txtVal="",this.questionList=[]}},watch:{txtVal(t){t=t.replace(/^\s+|\s+$/g,""),t?this.getQuestionList():this.questionList=[]}}},te=Zt,ee=(i("1bb3"),Object(p["a"])(te,Lt,It,!1,null,"10c8d885",null)),ie=ee.exports,ne=function(){var t=this,e=t._self._c;return t.dialogVisible?e("div",{staticClass:"dialog-wrapper dialog-logout-wrapper"},[e("el-dialog",{attrs:{visible:!0,width:"325px","custom-class":"logout-dialog-container",title:t.$t("dialog.title"),"modal-append-to-body":!1,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{close:t.closeClick}},[e("div",{staticClass:"dialog-container"},[e("div",{staticClass:"content"},[t._v(t._s(t.tipsText))]),e("div",{staticClass:"footer"},[e("button",{staticClass:"cancel",on:{click:t.closeClick}},[t._v(t._s(t.$t("dialog.cancel")))]),e("button",{staticClass:"confirm",on:{click:t.logoutClick}},[t._v(t._s(t.$t("dialog.confirm")))])])])])],1):t._e()},se=[],oe={mixins:[kt["a"]],props:{dialogVisible:{type:Boolean,default:!1}},computed:{...Object(o["c"])("zchat",["queuePosition","isChatting","agentMemberjoin"]),tipsText(){const{queuePosition:t,isChatting:e}=this;return e&&t>0?this.$i18n.t("dialog.logout/queue"):this.$i18n.t("dialog.logout/leave")}},methods:{...Object(o["b"])("zchat",["clearChatAction","setQueuePositionAction","setRatingStateAction"]),closeClick(){this.$emit("update:dialogVisible",!1)},async logoutClick(){this.clearChatAction(),this.setQueuePositionAction(0),this.setRatingStateAction(!1),window.sensors.track("customer_sc_note_leave_confirm_click");try{const{success:t}=await _["a"].deleteTempToken();t&&localStorage.removeItem("HELP-TEMP-TOKEN")}catch(t){console.log("error :>> ",t)}this.agentMemberjoin&&this.logoutChat(),this.closeClick(),this.$bus.emit("chatWidgetEvent")}},watch:{dialogVisible(t){t&&window.sensors.track("customer_sc_note_leave_pop_expose")}}},re=oe,ae=(i("219d"),Object(p["a"])(re,ne,se,!1,null,"d4a24754",null)),ce=ae.exports,le=function(){var t,e=this,i=e._self._c;return e.ratingDiaInfo.show?i("div",{staticClass:"dialog-wrapper chat-rating-wrapper"},[i("el-dialog",{attrs:{visible:!0,width:"325px","custom-class":"chat-rating-dialog",title:e.$t("dialog.rating/title"),"modal-append-to-body":!1,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{close:e.closeClick}},[i("div",{staticClass:"dialog-container"},[i("div",{staticClass:"content"},[i("dl",{staticClass:"rating-wrapper",class:(null===(t=e.theme)||void 0===t?void 0:t.indexOf("light"))>-1?"":"rating-dark"},[i("dd",{class:{active:e.rateBad}},[i("button",{on:{click:function(t){return e.rateClick("bad")}}},[i("i",{staticClass:"icon-bad"}),i("span",[e._v(e._s(e.$t("dialog.rating/bad")))])])]),i("dd",{class:{active:e.rateGood}},[i("button",{on:{click:function(t){return e.rateClick("good")}}},[i("i",{staticClass:"icon-good"}),i("span",[e._v(e._s(e.$t("dialog.rating/good")))])])])]),i("div",{staticClass:"textarea-wrapper",class:{focus:e.isfocus}},[i("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.comment,expression:"comment",modifiers:{trim:!0}}],staticClass:"textarea-text",attrs:{maxlength:"300",placeholder:e.$t("dialog.rating/placeholder")},domProps:{value:e.comment},on:{focus:function(t){e.isfocus=!0},blur:[function(t){e.isfocus=!1},function(t){return e.$forceUpdate()}],input:function(t){t.target.composing||(e.comment=t.target.value.trim())}}}),e._v(" "),i("div",{staticClass:"max-tips"},[e._v(e._s(e.comment.length)+"/300")])])]),i("div",{staticClass:"footer"},[e.isApp?[i("button",{staticClass:"confirm app_button",attrs:{disabled:e.disBtn},on:{click:e.submitClick}},[e._v(" "+e._s(e.$t("dialog.submit"))+" ")])]:[i("button",{staticClass:"cancel",on:{click:e.closeClick}},[e._v(" "+e._s(e.isLogout?e.$t("dialog.rating/logout"):e.$t("dialog.cancel"))+" ")]),i("button",{staticClass:"confirm",attrs:{disabled:e.disBtn},on:{click:e.submitClick}},[e._v(" "+e._s(e.$t("dialog.confirm"))+" ")])]],2)])])],1):e._e()},ue=[],de={mixins:[kt["a"]],data(){return{rateVal:"",comment:"",isfocus:!1}},computed:{...Object(o["c"])("base",["isApp","ratingDiaInfo"]),...Object(o["c"])("zchat",["agentMemberjoin"]),rateBad(){return"bad"===this.rateVal},theme(){return this.$v4.get("theme")},rateGood(){return"good"===this.rateVal},disBtn(){return!this.rateVal&&!this.comment},isLogout(){return this.ratingDiaInfo.isLogout}},methods:{...Object(o["b"])("zchat",["setRatingStateAction","clearChatAction","setQueuePositionAction"]),rateClick(t){this.rateVal=t},submitClick(){const{rateVal:t,comment:e}=this;t&&J.a.sendChatRating(t),e&&J.a.sendChatComment(e),window.sensors.track("customer_sc_evaluate_confirm_click",{satisfaction_evaluate:t}),this.close()},closeClick(){this.close()},async close(){this.rateVal="",this.comment="";const{isLogout:t}=this.ratingDiaInfo;if(this.setRatingStateAction(!0),this.$store.commit("base/setRatingDiaState",{show:!1,isLogout:t}),this.isLogout){this.$bus.emit("chatWidgetEvent"),this.clearChatAction(),this.setQueuePositionAction(0);try{const{success:t}=await _["a"].deleteTempToken();t&&localStorage.removeItem("HELP-TEMP-TOKEN")}catch(e){console.log("error :>> ",e)}this.$bus.emit("logoutEvent"),this.agentMemberjoin&&this.logoutChat()}}},watch:{"ratingDiaInfo.show":{handler(t){t&&window.sensors.track("customer_sc_evaluate_pop_expose")},deep:!0}}},he=de,pe=(i("549b"),Object(p["a"])(he,le,ue,!1,null,"15e9f5fe",null)),fe=pe.exports,me={name:"ChatWidget",mixins:[yt["a"],kt["a"]],components:{AgentTips:Tt,Footer:ie,LogoutDialog:ce,ChatRatingDialog:fe},props:{chatShow:{type:Boolean,default:!1}},data(){return{allHistory:[],historyList:[],showHistory:!1,btnIsClicked:!1,isLoading:!1,params:{from:"",direct:1,limit:11},loginDialogShow:!1,questionInfo:{},logoutDialogVisible:!1}},computed:{...Object(o["c"])("base",["sceneCode","configInfo","departmentId","locale","isApp","ticketList"]),...Object(o["c"])("zchat",["chatList","curQuestionInfo","queuePosition","rating","isChatting","socketSatus"]),listState(){return this.isLoading?"loading":this.btnIsClicked&&this.historyList.length<2*this.params.limit?"no-more-data":"show-more"},theme(){return this.$v4.get("theme")},mobileClassObj(){if(this.isApp){const t=window.navigator.userAgent;return t.indexOf("iPhone")>-1||t.indexOf("iOS")>-1?window.screen.height>=812?{"iphonex-bar":!0}:{iphone:!0}:{android:!0}}return null}},created(){this.$bus.on("questionEvent",(t=!1)=>{t&&this.updateChatListAction([{type:"user",info:{message:this.curQuestionInfo.question}}]),this.questionInfo=this.curQuestionInfo,this.getQuestion()}),this.$bus.on("searchQuestionEvent",(t={})=>{this.questionInfo={questionId:"",question:t.question},this.getQuestion()}),this.$bus.on("logoutEvent",()=>{this.allHistory=[],this.historyList=[]}),this.$bus.on("toBottomEvent",()=>{this.goBottom()})},methods:{...Object(o["b"])("base",["setDeptIdAction","setUserInfoAction","setUserAvatarAction"]),...Object(o["b"])("zchat",["updateChatListAction","setChatHistoryAction","clearChatAction"]),async initData(){var t;this.clearChatAction();let e=[{type:"self"}];if(null!==(t=this.configInfo)&&void 0!==t&&t.welcome&&e.unshift({type:"welcome",info:{message:this.configInfo.welcome}}),this.updateChatListAction(e),this.getChatQuestionGuess(),this.isApp)this.$callNative("00000000",({data:t})=>{t&&t.uid?this.setUserAvatarAction(t.avatar):0===Object.keys(this.visitorInfo).length&&this.$callNative("20010013",{forceLoginSuccess:!0},t=>{console.log("res :>> ",t.data),window.location.reload()})});else try{const t=await _["a"].checkLogin();t.success&&this.getPersonalInfo()}catch(i){console.log("error :>> ",i)}this.getHistory()},activeComponent(t){"welcome"===t&&(t="system");try{return i("6263")(`./${t}/Index.vue`).default}catch(e){console.log("error :>> ",e)}},async getChatQuestionGuess(){try{const{data:t,success:e}=await _["a"].getQuestionGuessList({from:"chat"}),i=t||[];e&&i.length>0&&this.updateChatListAction([{type:"guess",info:{guessList:i}}]);const n=i.map(t=>t.id),s=i.map(t=>t.cs_base_info);window.sensors.track("newcustomer_recshow",{pagetype:"chat",qustionid:JSON.stringify(n),cs_base_info:JSON.stringify(s)})}catch(t){console.log("error :>> ",t)}},async getPersonalInfo(){try{const{success:t,message:e,data:i}=await _["a"].getPersonalCenter();t?this.setUserInfoAction((null===i||void 0===i?void 0:i.ucResp)||{}):this.$bus.emit("toastEvent",{time:2e3,type:"error",msg:e})}catch(t){console.log("error :>> ",t)}},async checkToken(){const t=localStorage.getItem("HELP-TEMP-TOKEN")||"";if(t)return!0;try{const{data:t,success:e}=await _["a"].getTempToken({sceneCode:this.sceneCode});if(e)return localStorage.setItem("HELP-TEMP-TOKEN",(null===t||void 0===t?void 0:t.token)||""),!0}catch(e){console.log("error :>> ",e)}return!1},loadHistoryClick(){this.btnIsClicked=!0,this.getHistory(!0)},async getHistory(t){if(localStorage.getItem("HELP-TEMP-TOKEN"))try{if(t){if(this.isLoading)return;this.isLoading=!0}const{success:e,data:i=[],code:n}=await _["a"].getQuestionHistory({...this.params});if(e)!this.btnIsClicked&&i.length>0&&(this.showHistory=!0),this.btnIsClicked&&i.length>10&&(this.params.from=i[0].id),this.historyList=i.reduce((t,e)=>{if(t.push({type:"user",info:{message:e.question}}),1===e.answerType)t.push({type:"system",info:{message:this.handleAnswerHref(e.answer)||"",handleReg:!0}});else{const i=e.answer&&JSON.parse(e.answer)||"";t.push({type:"system",info:{title:e.question,answerList:i,message:e}})}return t},[])||[],this.isLoading=!1,t&&(i.length>10?this.allHistory.unshift(...this.historyList.slice(2)):this.allHistory.unshift(...this.historyList.slice(0))),this.setChatHistoryAction(this.allHistory);else if(60001===n){const e=await this.checkToken();e&&(this.isLoading=!1,this.getHistory(t))}else this.$bus.emit("toastEvent",{type:"error"})}catch(e){console.log("error :>> ",e)}},async getQuestion(){try{const t=await this.checkToken();if(!t)return;const{questionId:e,question:i,baseInfo:n=""}=this.questionInfo,{success:s,data:o,code:r}=await _["a"].getAnswer({questionId:e,question:i,cs_base_info:n});if(s)if(1===o.answerType)this.setDeptIdAction((null===o||void 0===o?void 0:o.deptId)||""),this.updateChatListAction([{type:"system",info:{action:!0,message:this.handleAnswerHref(o.answer)||"",handleReg:!0,questionObj:{questionId:o.id,question:o.question,baseInfo:o.cs_base_info}}}]);else{const t=o.answer&&JSON.parse(o.answer)||"";t&&0===t.length?this.updateChatListAction([{type:"system",info:{message:this.configInfo.missWordTip,type:"unsolved"}}]):this.updateChatListAction([{type:"system",info:{title:o.question,answerList:t,message:o}}])}else 60001===r?(localStorage.removeItem("HELP-TEMP-TOKEN"),this.getQuestion()):this.$bus.emit("toastEvent",{type:"error"})}catch(t){console.log("error :>> ",t)}},handleAnswerHref(t){const e=new RegExp(/<a[^>]*href=[ '"]([^"]*)[' "][^>]*>(.*?)<\/a>/,"gi"),i=t.replace(e,t=>{const i=e.exec(t)||[],n=i[1],s=Object($t["b"])(n)||"",o=i[2]||"";e.lastIndex=0;const r=-1===t.indexOf("target");let a=r?`<span data-url="${s}">${o}</span>`:`<span data-link="answerUrl" data-url="${s}">${o}</span>`;return a});return i},goBottom(){this.$nextTick(()=>{const t=this.$refs.scrollbarRef;t&&(!this.btnIsClicked&&this.allHistory.length?t.wrap.scrollTop=0:t.wrap.scrollTop=t.wrap.scrollHeight)})},backClick(){window.sensors.track("customer_sc_minimize_click"),this.$bus.emit("chatWidgetEvent")},closeClick(){const{isChatting:t,queuePosition:e,socketSatus:i,rating:n}=this;window.sensors.track("customer_sc_close_click"),"connecting"!==i?t&&0===e&&!n?this.$store.commit("base/setRatingDiaState",{show:!0,isLogout:!0}):this.logoutDialogVisible=!0:this.backClick()},async logoutClick(){try{const{success:t}=await _["a"].deleteTempToken();t&&localStorage.removeItem("HELP-TEMP-TOKEN")}catch(t){console.log("error :>> ",t)}this.agentMemberjoin&&this.logoutChat()}},watch:{chatShow:{handler(t){if(t)this.isApp&&this.$callNative("20010095",{hideTopBar:"true"}),[0,1].includes(this.chatList.length)?this.initData():this.goBottom();else if(this.isApp){var e;console.log("App","显示topbar"),this.$callNative("20010095",{showTopBar:"true"}),null===(e=this.$refs.footerRef)||void 0===e||e.clearSearch()}},immediate:!0},"chatList.length":{handler(t){t>0&&this.chatShow&&setTimeout(()=>{this.goBottom()},400)}}},beforeDestroy(){this.logoutClick(),this.$bus.off("questionEvent"),this.$bus.off("searchQuestionEvent"),this.$bus.off("logoutEvent"),this.$bus.off("toBottomEvent")}},ge=me,ve=(i("98e4"),Object(p["a"])(ge,bt,wt,!1,null,"e02d5c66",null)),_e=ve.exports,be=i("fa7d"),we=i("8b6f"),ye={name:"ServiceWidget",mixins:[kt["a"]],components:{SelfService:m,CommonQuestion:k,GuessAsk:A,LatestNotice:P,TopNotice:F,LoginDialog:et,LoginPopupDialog:H["a"],MyOrderDialog:at,ChatWidget:_e,Loading:ht,Toast:_t},data(){return{chatLoading:!0,hasInitialized:!1,isSocketClosed:!1,clickedChatBtn:!1,loginDialogShow:!1,myOrderDialogShow:!1,chatShow:!1,isChatScroll:!1,toastInfo:{},isLogin:!1}},computed:{...Object(o["c"])("base",["sceneCode","uid","isDesktop","departmentId","locale","isApp","isKorea","visitorInfo","isTG"]),...Object(o["c"])("config",["logoUrl","configReady"]),theme(){return this.$v4.get("theme")}},created(){this.$bus.on("loginDialogEvent",()=>{this.loginDialogShow=!1,this.setLoginFormAction(!0)}),this.$bus.on("myOrderDialogEvent",()=>{this.myOrderDialogShow=!1}),this.$bus.on("chatWidgetEvent",(t=!1)=>{this.chatShow=t||!1,t&&setTimeout(()=>{this.$bus.emit("questionEvent",t)},500)}),this.$bus.on("toastEvent",t=>{this.showToast(t)})},async mounted(){if(this.isApp&&!be["a"].getCookie("HB-PRO-TOKEN")){const t=await Object(we["b"])();t?this.$callNative("needsTicket",async t=>{const e=(null===t||void 0===t?void 0:t.data)||"";if(e){const t=await this.loginPRO(e);this.isLogin=!!t,this.initData()}}):(this.isLogin=!0,this.initData())}else this.isLogin=!0,this.initData()},methods:{...Object(o["b"])("base",["setUidAction","setVisibleAction","setLoginFormAction","setConfigAction","setTicketAction","setQuestionTreeAction"]),initData(){window.sensors.track("newcustomer_show");const t={sceneCode:this.sceneCode},e=_["a"].getConfig(t),i=_["a"].getTicketsList(t),n=_["a"].getQuestionTreeList(t);Promise.all([e,i,n]).then(([t={},e={},i={}])=>{t.success&&this.setConfigAction((null===t||void 0===t?void 0:t.data)||[]),e.success&&this.setTicketAction((null===e||void 0===e?void 0:e.data)||[]),i.success&&this.setQuestionTreeAction((null===i||void 0===i?void 0:i.data)||[]),this.chatLoading=!1,this.isKorea?this.showPopup():this.uid||(this.isApp?this.$callNative("00000000",({data:t})=>{t&&t.uid?this.setUidAction(t.uid):0===Object.keys(this.visitorInfo).length&&(this.loginDialogShow=!0)}):0===Object.keys(this.visitorInfo).length&&(this.loginDialogShow=!0))}).catch(t=>{this.chatLoading=!1,console.log("error :>> ",t)}),setTimeout(()=>{this.initScroll()},2e3)},initScroll(){const t=this,e=document.getElementsByClassName("chat-content-wrapper")[0];e&&e.addEventListener("scroll",Object(St["b"])(100,()=>{const{scrollTop:i,scrollHeight:n,clientHeight:s}=e;0===i&&(t.isChatScroll=!1),i>120&&(t.isChatScroll=!0)}))},showPopup(){const t=Number(be["a"].getSeoulDate()),e=(new Date).getDay();(t>9||t<4)&&0!==e&&6!==e&&this.$bus.emit("toastEvent",{time:2e3,type:"success",msg:'존경하는 고객님, 안녕하세요. 문의하려는 유형을 선택해 주세요. 혹은 "고객센터"를 입력하여 고객센터로 연결하세요.'})},closeClick(){this.setVisibleAction(!1)},async orderClick(){if(window.sensors.track("newcustomer_click",{button_name:"order"}),this.isApp)this.isLogin?this.myOrderDialogShow=!0:this.$callNative("20010013",{forceLoginSuccess:!0},()=>{window.location.reload()});else{if(this.uid)return void(this.myOrderDialogShow=!0);this.commonlogin()}},async loginPRO(t){try{const{status:e,data:i}=await _["a"].proLogin({ticket:t});return"ok"===e&&(be["a"].setCookies("HB-PRO-TOKEN",i.token),!0)}catch(e){console.log("error :>> ",e)}},serviceClick(){window.sensors.track("newcustomer_click",{button_name:"contact"}),this.chatShow=!0},showToast(t={}){const e=t.msg||this.$i18n.t("base.network/check");this.isApp?this.$callNative("20010012",e):this.toastInfo={...t,msg:e}}},beforeDestroy(){this.logoutChat(),this.$bus.off("loginDialogEvent"),this.$bus.off("myOrderDialogEvent"),this.$bus.off("chatWidgetEvent")}},ke=ye,$e=(i("bda6"),Object(p["a"])(ke,r,a,!1,null,"0b540ffd",null)),Ce=$e.exports,Ee=i("9a69"),xe=(i("d9e2"),Object.defineProperty),Oe=(t,e,i)=>e in t?xe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,Ae=(t,e,i)=>(Oe(t,"symbol"!=typeof e?e+"":e,i),i);function Te(t,e){let i;const n=()=>{void 0!==i&&e&&e(i),i=void 0};return[()=>void 0===i?i=t(n):i,n]}class Le{constructor(t,e={}){this.scope=t,this.options=e}print(t,...e){const i=new Date,n=Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,timeZone:"UTC"}).format(i),{textColor:s,bgColor:o}=this.options,r="font-weight: bold;padding: 0 5px;border-radius:5px";console[t](`%c${n}%c / %c${this.scope}`,r+";background-color: lightblue;color:black","",`${r};${s?`color:${s};`:""}${o?"background-color:"+o:""}`,...e)}error(...t){this.print("error",...t)}log(...t){this.print("log",...t)}}const Ie=new Le("SDK",{bgColor:"forestgreen",textColor:"white"});let Se=!1;function De(...t){Se&&Ie.log(...t)}class Pe{constructor(){Ae(this,"listeners",new Map),Ae(this,"listenersCount",0),Ae(this,"subscribeListeners",[])}clear(){this.listeners.clear(),this.subscribeListeners=[]}get count(){return this.listenersCount+this.subscribeListeners.length}emit(t,...e){this.subscribeListeners.forEach(i=>i({event:t,args:e})),(this.listeners.get(t)||[]).forEach(([i,n])=>{i(...e),n&&this.off(t,i)})}on(t,e,i){let n=this.listeners.get(t);return n||this.listeners.set(t,n=[]),n.push([e,i]),this.listenersCount+=1,()=>this.off(t,e)}off(t,e){const i=this.listeners.get(t)||[];for(let n=0;n<i.length;n+=1)if(e===i[n][0])return i.splice(n,1),void(this.listenersCount-=1)}subscribe(t){return this.subscribeListeners.push(t),()=>this.unsubscribe(t)}unsubscribe(t){for(let e=0;e<this.subscribeListeners.length;e+=1)if(this.subscribeListeners[e]===t)return void this.subscribeListeners.splice(e,1)}}function Re(t,e,i){return window.addEventListener(t,e,i),()=>window.removeEventListener(t,e,i)}function Ne(...t){let e=!1;const i=t.flat(1);return[t=>!e&&i.push(t),()=>{e||(e=!0,i.forEach(t=>t()))},e]}class qe extends Error{constructor(t,e,i){super(e,{cause:i}),this.type=t,Object.setPrototypeOf(this,qe.prototype)}}function je(t,e,i){return new qe(t,e,i)}const Ve="ERR_METHOD_UNSUPPORTED",Me="ERR_METHOD_PARAMETER_UNSUPPORTED",Ue="ERR_UNKNOWN_ENV",ze="ERR_INVOKE_CUSTOM_METHOD_RESPONSE",We="ERR_TIMED_OUT",Ke="ERR_UNEXPECTED_TYPE",Be="ERR_PARSE";function Fe(){return je(Ke,"Value has unexpected type")}class He{constructor(t,e,i){this.parser=t,this.isOptional=e,this.type=i}parse(t){if(!this.isOptional||void 0!==t)try{return this.parser(t)}catch(e){throw je(Be,"Unable to parse value"+(this.type?" as "+this.type:""),e)}}optional(){return this.isOptional=!0,this}}function Qe(t,e){return()=>new He(t,!1,e)}const Ge=Qe(t=>{if("boolean"==typeof t)return t;const e=String(t);if("1"===e||"true"===e)return!0;if("0"===e||"false"===e)return!1;throw Fe()},"boolean");function Ye(t,e){const i={};for(const s in t){const o=t[s];if(!o)continue;let r,a;if("function"==typeof o||"parse"in o)r=s,a="function"==typeof o?o:o.parse.bind(o);else{const{type:t}=o;r=o.from||s,a="function"==typeof t?t:t.parse.bind(t)}try{const t=a(e(r));void 0!==t&&(i[s]=t)}catch(n){throw je(Be,`Unable to parse field "${s}"`,n)}}return i}function Je(t){let e=t;if("string"==typeof e&&(e=JSON.parse(e)),"object"!=typeof e||null===e||Array.isArray(e))throw Fe();return e}function Xe(t,e){return new He(e=>{const i=Je(e);return Ye(t,t=>i[t])},!1,e)}const Ze=Qe(t=>{if("number"==typeof t)return t;if("string"==typeof t){const e=Number(t);if(!Number.isNaN(e))return e}throw Fe()},"number"),ti=Qe(t=>{if("string"==typeof t||"number"==typeof t)return t.toString();throw Fe()},"string");function ei(t){return Xe({eventType:ti(),eventData:t=>t}).parse(t)}function ii(){["TelegramGameProxy_receiveEvent","TelegramGameProxy","Telegram"].forEach(t=>{delete window[t]})}function ni(t,e){window.dispatchEvent(new MessageEvent("message",{data:JSON.stringify({eventType:t,eventData:e}),source:window.parent}))}function si(){[["TelegramGameProxy_receiveEvent"],["TelegramGameProxy","receiveEvent"],["Telegram","WebView","receiveEvent"]].forEach(t=>{let e=window;t.forEach((t,i,n)=>{i!==n.length-1?(t in e||(e[t]={}),e=e[t]):e[t]=ni})})}const oi={clipboard_text_received:Xe({req_id:ti(),data:t=>null===t?t:ti().optional().parse(t)}),custom_method_invoked:Xe({req_id:ti(),result:t=>t,error:ti().optional()}),popup_closed:{parse(t){return Xe({button_id:t=>null==t?void 0:ti().parse(t)}).parse(null!==t&&void 0!==t?t:{})}},viewport_changed:Xe({height:Ze(),width:t=>null==t?window.innerWidth:Ze().parse(t),is_state_stable:Ge(),is_expanded:Ge()})};function ri(){const t=new Pe,e=new Pe;e.subscribe(e=>{t.emit("event",{name:e.event,payload:e.args[0]})}),si();const[,i]=Ne(ii,Re("resize",()=>{e.emit("viewport_changed",{width:window.innerWidth,height:window.innerHeight,is_state_stable:!0,is_expanded:!0})}),Re("message",t=>{if(t.source!==window.parent)return;let i;try{i=ei(t.data)}catch{return}const{eventType:n,eventData:s}=i,o=oi[n];try{const t=o?o.parse(s):s;e.emit(...t?[n,t]:[n])}catch(r){Ie.error(`An error occurred processing the "${n}" event from the Telegram application.\nPlease, file an issue here:\nhttps://github.com/Telegram-Mini-Apps/telegram-apps/issues/new/choose`,i,r)}}),()=>t.clear(),()=>e.clear());return[{on:e.on.bind(e),off:e.off.bind(e),subscribe(e){return t.on("event",e)},unsubscribe(e){t.off("event",e)},get count(){return e.count+t.count}},i]}const[ai,ci]=Te(t=>{const[e,i]=ri(),n=e.off.bind(e);return e.off=(i,s)=>{const{count:o}=e;n(i,s),o&&!e.count&&t()},[e,i]},([,t])=>t());function li(){return ai()[0]}function ui(t,e){li().off(t,e)}function di(t,e,i){return li().on(t,e,i)}function hi(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function pi(t,e){const i=t.split("."),n=e.split("."),s=Math.max(i.length,n.length);for(let o=0;o<s;o+=1){const t=parseInt(i[o]||"0",10),e=parseInt(n[o]||"0",10);if(t!==e)return t>e?1:-1}return 0}function fi(t,e){return pi(t,e)<=0}function mi(t,e,i){if("string"==typeof i){if("web_app_open_link"===t){if("try_instant_view"===e)return fi("6.4",i);if("try_browser"===e)return fi("7.6",i)}if("web_app_set_header_color"===t&&"color"===e)return fi("6.9",i);if("web_app_close"===t&&"return_back"===e)return fi("7.6",i)}switch(t){case"web_app_open_tg_link":case"web_app_open_invoice":case"web_app_setup_back_button":case"web_app_set_background_color":case"web_app_set_header_color":case"web_app_trigger_haptic_feedback":return fi("6.1",e);case"web_app_open_popup":return fi("6.2",e);case"web_app_close_scan_qr_popup":case"web_app_open_scan_qr_popup":case"web_app_read_text_from_clipboard":return fi("6.4",e);case"web_app_switch_inline_query":return fi("6.7",e);case"web_app_invoke_custom_method":case"web_app_request_write_access":case"web_app_request_phone":return fi("6.9",e);case"web_app_setup_settings_button":return fi("6.10",e);case"web_app_biometry_get_info":case"web_app_biometry_open_settings":case"web_app_biometry_request_access":case"web_app_biometry_request_auth":case"web_app_biometry_update_token":return fi("7.2",e);case"web_app_setup_swipe_behavior":return fi("7.7",e);default:return["iframe_ready","iframe_will_reload","web_app_close","web_app_data_send","web_app_expand","web_app_open_link","web_app_ready","web_app_request_theme","web_app_request_viewport","web_app_setup_main_button","web_app_setup_closing_behavior"].includes(t)}}function gi(t){return"external"in t&&hi(t.external)&&"notify"in t.external&&"function"==typeof t.external.notify}function vi(t){return"TelegramWebviewProxy"in t&&hi(t.TelegramWebviewProxy)&&"postEvent"in t.TelegramWebviewProxy&&"function"==typeof t.TelegramWebviewProxy.postEvent}function _i(){try{return window.self!==window.top}catch{return!0}}const bi="https://web.telegram.org";let wi=bi;function yi(){return wi}function ki(t,e,i){let n,s={};if(e||i?e&&i?(s=i,n=e):e&&("targetOrigin"in e?s=e:n=e):s={},De("Posting event:",n?{event:t,data:n}:{event:t}),_i())return window.parent.postMessage(JSON.stringify({eventType:t,eventData:n}),s.targetOrigin||yi());if(gi(window))window.external.notify(JSON.stringify({eventType:t,eventData:n}));else{if(!vi(window))throw je(Ue,"Unable to determine current environment and possible way to send event. You are probably trying to use Mini Apps method outside the Telegram application environment.");window.TelegramWebviewProxy.postEvent(t,JSON.stringify(n))}}function $i(t){return(e,i)=>{if(!mi(e,t))throw je(Ve,`Method "${e}" is unsupported in Mini Apps version ${t}`);if(hi(i)&&"web_app_set_header_color"===e&&"color"in i&&!mi(e,"color",t))throw je(Me,`Parameter "color" of "${e}" method is unsupported in Mini Apps version ${t}`);return ki(e,i)}}function Ci(t){return({req_id:e})=>e===t}function Ei(t){return je(We,`Timeout reached: ${t}ms`)}function xi(t,e){return Promise.race(["function"==typeof t?t():t,new Promise((t,i)=>{setTimeout(()=>{i(Ei(e))},e)})])}async function Oi(t){let e;const i=new Promise(t=>e=t),{event:n,capture:s,timeout:o}=t,[,r]=Ne((Array.isArray(n)?n:[n]).map(t=>di(t,i=>{(!s||(Array.isArray(n)?s({event:t,payload:i}):s(i)))&&e(i)})));try{return(t.postEvent||ki)(t.method,t.params),await(o?xi(i,o):i)}finally{r()}}async function Ai(t,e,i,n={}){const{result:s,error:o}=await Oi({...n,method:"web_app_invoke_custom_method",event:"custom_method_invoked",params:{method:t,params:e,req_id:i},capture:Ci(i)});if(o)throw je(ze,o);return s}function Ti(t){return/^#[\da-f]{6}$/i.test(t)}function Li(t){return/^#[\da-f]{3}$/i.test(t)}function Ii(t){const e=t.replace(/\s/g,"").toLowerCase();if(Ti(e))return e;if(Li(e)){let t="#";for(let i=0;i<3;i+=1)t+=e[1+i].repeat(2);return t}const i=e.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/)||e.match(/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),\d{1,3}\)$/);if(!i)throw new Error(`Value "${t}" does not satisfy any of known RGB formats.`);return i.slice(1).reduce((t,e)=>{const i=parseInt(e,10).toString(16);return t+(1===i.length?"0":"")+i},"#")}function Si(t){const e=Ii(t);return Math.sqrt([.299,.587,.114].reduce((t,i,n)=>{const s=parseInt(e.slice(1+2*n,1+2*(n+1)),16);return t+s*s*i},0))<120}class Di{constructor(t){Ae(this,"ee",new Pe),Ae(this,"on",this.ee.on.bind(this.ee)),Ae(this,"off",this.ee.off.bind(this.ee)),this.state=t}clone(){return{...this.state}}set(t,e){Object.entries("string"==typeof t?{[t]:e}:t).reduce((t,[e,i])=>this.state[e]===i||void 0===i?t:(this.state[e]=i,this.ee.emit("change:"+e,i),!0),!1)&&this.ee.emit("change",this.state)}get(t){return this.state[t]}}class Pi{constructor(t){Ae(this,"state"),Ae(this,"get"),Ae(this,"set"),Ae(this,"clone"),this.state=new Di(t),this.set=this.state.set.bind(this.state),this.get=this.state.get.bind(this.state),this.clone=this.state.clone.bind(this.state)}}function Ri(t,e){return i=>mi(e[i],t)}class Ni extends Pi{constructor(t,e,i){super(t),Ae(this,"supports"),this.supports=Ri(e,i)}}class qi extends Ni{constructor(t,e,i){super({isVisible:t},e,{show:"web_app_setup_back_button",hide:"web_app_setup_back_button"}),Ae(this,"on",(t,e)=>"click"===t?di("back_button_pressed",e):this.state.on(t,e)),Ae(this,"off",(t,e)=>"click"===t?ui("back_button_pressed",e):this.state.off(t,e)),this.postEvent=i}set isVisible(t){this.set("isVisible",t),this.postEvent("web_app_setup_back_button",{is_visible:t})}get isVisible(){return this.get("isVisible")}hide(){this.isVisible=!1}show(){this.isVisible=!0}}const ji=Qe(t=>t instanceof Date?t:new Date(1e3*Ze().parse(t)),"Date");function Vi(t,e){return new He(e=>{if("string"!=typeof e&&!(e instanceof URLSearchParams))throw Fe();const i="string"==typeof e?new URLSearchParams(e):e;return Ye(t,t=>{const e=i.get(t);return null===e?void 0:e})},!1,e)}const Mi=Xe({id:Ze(),type:ti(),title:ti(),photoUrl:{type:ti().optional(),from:"photo_url"},username:ti().optional()},"Chat").optional(),Ui=Xe({addedToAttachmentMenu:{type:Ge().optional(),from:"added_to_attachment_menu"},allowsWriteToPm:{type:Ge().optional(),from:"allows_write_to_pm"},firstName:{type:ti(),from:"first_name"},id:Ze(),isBot:{type:Ge().optional(),from:"is_bot"},isPremium:{type:Ge().optional(),from:"is_premium"},languageCode:{type:ti().optional(),from:"language_code"},lastName:{type:ti().optional(),from:"last_name"},photoUrl:{type:ti().optional(),from:"photo_url"},username:ti().optional()},"User").optional();function zi(){return Vi({authDate:{type:ji(),from:"auth_date"},canSendAfter:{type:Ze().optional(),from:"can_send_after"},chat:Mi,chatInstance:{type:ti().optional(),from:"chat_instance"},chatType:{type:ti().optional(),from:"chat_type"},hash:ti(),queryId:{type:ti().optional(),from:"query_id"},receiver:Ui,startParam:{type:ti().optional(),from:"start_param"},user:Ui},"InitData")}const Wi=Qe(t=>Ii(ti().parse(t)),"rgb");function Ki(t){return t.replace(/_[a-z]/g,t=>t[1].toUpperCase())}function Bi(t){return t.replace(/[A-Z]/g,t=>"_"+t.toLowerCase())}const Fi=Qe(t=>{const e=Wi().optional();return Object.entries(Je(t)).reduce((t,[i,n])=>(t[Ki(i)]=e.parse(n),t),{})},"ThemeParams");function Hi(t){return Vi({botInline:{type:Ge().optional(),from:"tgWebAppBotInline"},initData:{type:zi().optional(),from:"tgWebAppData"},initDataRaw:{type:ti().optional(),from:"tgWebAppData"},platform:{type:ti(),from:"tgWebAppPlatform"},showSettings:{type:Ge().optional(),from:"tgWebAppShowSettings"},startParam:{type:ti().optional(),from:"tgWebAppStartParam"},themeParams:{type:Fi(),from:"tgWebAppThemeParams"},version:{type:ti(),from:"tgWebAppVersion"}}).parse(t)}function Qi(t){return Hi(t.replace(/^[^?#]*[?#]/,"").replace(/[?#]/g,"&"))}function Gi(){return Qi(window.location.href)}function Yi(){return performance.getEntriesByType("navigation")[0]}function Ji(){const t=Yi();if(!t)throw new Error("Unable to get first navigation entry.");return Qi(t.name)}function Xi(t){return"telegram-apps/"+t.replace(/[A-Z]/g,t=>"-"+t.toLowerCase())}function Zi(t,e){sessionStorage.setItem(Xi(t),JSON.stringify(e))}function tn(t){const e=sessionStorage.getItem(Xi(t));try{return e?JSON.parse(e):void 0}catch{}}function en(){return Hi(tn("launchParams")||"")}function nn(t){return JSON.stringify(Object.fromEntries(Object.entries(t).map(([t,e])=>[Bi(t),e])))}function sn(t){const{initDataRaw:e,themeParams:i,platform:n,version:s,showSettings:o,startParam:r,botInline:a}=t,c=new URLSearchParams;return c.set("tgWebAppPlatform",n),c.set("tgWebAppThemeParams",nn(i)),c.set("tgWebAppVersion",s),e&&c.set("tgWebAppData",e),r&&c.set("tgWebAppStartParam",r),"boolean"==typeof o&&c.set("tgWebAppShowSettings",o?"1":"0"),"boolean"==typeof a&&c.set("tgWebAppBotInline",a?"1":"0"),c.toString()}function on(t){Zi("launchParams",sn(t))}function rn(){const t=[];for(const i of[Gi,Ji,en])try{const t=i();return on(t),t}catch(e){t.push(e instanceof Error?e.message:JSON.stringify(e))}throw new Error(["Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?\n","📖 Refer to docs for more information:","https://docs.telegram-mini-apps.com/packages/telegram-apps-sdk/environment\n","Collected errors:",t.map(t=>"— "+t)].join("\n"))}function an(){const t=Yi();return!(!t||"reload"!==t.type)}function cn(){let t=0;return()=>(t+=1).toString()}const[ln]=Te(cn);function un(t,e){return()=>{const i=rn(),n={...i,postEvent:$i(i.version),createRequestId:ln()};if("function"==typeof t)return t(n);const[s,o,r]=Ne(),a=e({...n,state:an()?tn(t):void 0,addCleanup:s}),c=e=>(r||s(e.on("change",e=>{Zi(t,e)})),e);return[a instanceof Promise?a.then(c):c(a),o]}}un("backButton",({postEvent:t,version:e,state:i={isVisible:!1}})=>new qi(i.isVisible,e,t));class dn extends Ni{constructor(){super(...arguments),Ae(this,"on",this.state.on.bind(this.state)),Ae(this,"off",this.state.off.bind(this.state))}}function hn(t){const e=t.available?t:{available:!1,device_id:"",token_saved:!1,access_requested:!1,access_granted:!1,type:""};return{available:!0,type:e.type,deviceId:e.device_id,tokenSaved:e.token_saved,accessRequested:e.access_requested,accessGranted:e.access_granted}}class pn extends dn{constructor({postEvent:t,version:e,...i}){super(i,e,{auth:"web_app_biometry_request_auth",openSettings:"web_app_biometry_open_settings",requestAccess:"web_app_biometry_request_access",updateToken:"web_app_biometry_update_token"}),Ae(this,"postEvent"),Ae(this,"authPromise"),Ae(this,"accessPromise"),this.postEvent=t}get available(){return this.get("available")}get accessGranted(){return this.get("accessGranted")}get accessRequested(){return this.get("accessRequested")}async authenticate({reason:t,...e}){return this.authPromise||(this.authPromise=Oi({...e,method:"web_app_biometry_request_auth",event:"biometry_auth_requested",postEvent:this.postEvent,params:{reason:(t||"").trim()}}).then(({token:t})=>t).finally(()=>this.authPromise=void 0)),this.authPromise}get deviceId(){return this.get("deviceId")}openSettings(){this.postEvent("web_app_biometry_open_settings")}requestAccess({reason:t,...e}={}){return this.accessPromise||(this.accessPromise=Oi({...e,postEvent:this.postEvent,method:"web_app_biometry_request_access",event:"biometry_info_received",params:{reason:t||""}}).then(t=>{const e=hn(t);return this.set(e),e.accessGranted}).finally(()=>this.accessPromise=void 0)),this.accessPromise}get biometryType(){return this.get("biometryType")}get tokenSaved(){return this.get("tokenSaved")}async updateToken({token:t,...e}={}){return["removed","updated"].includes((await Oi({...e,postEvent:this.postEvent,method:"web_app_biometry_update_token",event:"biometry_token_updated",params:{token:t||""}})).status)}}async function fn(t){return hn(await Oi({...t||{},method:"web_app_biometry_get_info",event:"biometry_info_received"}))}un("biometryManager",async({postEvent:t,version:e,state:i})=>new pn({...i||mi("web_app_biometry_get_info",e)?i||await fn({timeout:1e3}):{available:!1,accessGranted:!1,accessRequested:!1,tokenSaved:!1,deviceId:""},version:e,postEvent:t}));class mn extends Pi{constructor(){super(...arguments),Ae(this,"on",this.state.on.bind(this.state)),Ae(this,"off",this.state.off.bind(this.state))}}class gn extends mn{constructor(t,e){super({isConfirmationNeeded:t}),this.postEvent=e}set isConfirmationNeeded(t){this.set("isConfirmationNeeded",t),this.postEvent("web_app_setup_closing_behavior",{need_confirmation:t})}get isConfirmationNeeded(){return this.get("isConfirmationNeeded")}disableConfirmation(){this.isConfirmationNeeded=!1}enableConfirmation(){this.isConfirmationNeeded=!0}}un("closingBehavior",({postEvent:t,state:e={isConfirmationNeeded:!1}})=>new gn(e.isConfirmationNeeded,t));class vn{constructor(t,e){Ae(this,"supports"),this.supports=Ri(t,e)}}function _n(t){if(Array.isArray(t))return t;if("string"==typeof t)try{const e=JSON.parse(t);if(Array.isArray(e))return e}catch{}throw Fe()}class bn extends He{constructor(t,e,i){super(_n,e,i),Ae(this,"itemParser"),this.itemParser="function"==typeof t?t:t.parse.bind(t)}parse(t){const e=super.parse(t);return void 0===e?e:e.map(this.itemParser)}of(t){return this.itemParser="function"==typeof t?t:t.parse.bind(t),this}}function wn(t){return new bn(t=>t,!1,t)}function yn(t,e){return Object.fromEntries(t.map(t=>[t,e]))}class kn extends vn{constructor(t,e,i){super(t,{delete:"web_app_invoke_custom_method",get:"web_app_invoke_custom_method",getKeys:"web_app_invoke_custom_method",set:"web_app_invoke_custom_method"}),this.createRequestId=e,this.postEvent=i}async delete(t,e={}){const i=Array.isArray(t)?t:[t];i.length&&await Ai("deleteStorageValues",{keys:i},this.createRequestId(),{...e,postEvent:this.postEvent})}async getKeys(t={}){return wn().of(ti()).parse(await Ai("getStorageKeys",{},this.createRequestId(),{...t,postEvent:this.postEvent}))}async get(t,e={}){const i=Array.isArray(t)?t:[t];if(!i.length)return yn(i,"");const n=await Ai("getStorageValues",{keys:i},this.createRequestId(),{...e,postEvent:this.postEvent}),s=Xe(yn(i,ti()),"CloudStorageData").parse(n);return Array.isArray(t)?s:s[t]}async set(t,e,i={}){await Ai("saveStorageValue",{key:t,value:e},this.createRequestId(),{...i,postEvent:this.postEvent})}}un(({createRequestId:t,postEvent:e,version:i})=>new kn(i,t,e));class $n extends vn{constructor(t,e){super(t,{impactOccurred:"web_app_trigger_haptic_feedback",notificationOccurred:"web_app_trigger_haptic_feedback",selectionChanged:"web_app_trigger_haptic_feedback"}),this.postEvent=e}impactOccurred(t){this.postEvent("web_app_trigger_haptic_feedback",{type:"impact",impact_style:t})}notificationOccurred(t){this.postEvent("web_app_trigger_haptic_feedback",{type:"notification",notification_type:t})}selectionChanged(){this.postEvent("web_app_trigger_haptic_feedback",{type:"selection_change"})}}un(({version:t,postEvent:e})=>new $n(t,e));class Cn{constructor(t){this.initData=t}get authDate(){return this.initData.authDate}get canSendAfter(){return this.initData.canSendAfter}get canSendAfterDate(){const{canSendAfter:t}=this;return t?new Date(this.authDate.getTime()+1e3*t):void 0}get chat(){return this.initData.chat}get chatType(){return this.initData.chatType}get chatInstance(){return this.initData.chatInstance}get hash(){return this.initData.hash}get queryId(){return this.initData.queryId}get receiver(){return this.initData.receiver}get startParam(){return this.initData.startParam}get user(){return this.initData.user}}un(({initData:t})=>t?new Cn(t):void 0);class En extends dn{constructor(t,e,i){super({isOpened:t},e,{open:"web_app_open_invoice"}),this.postEvent=i}set isOpened(t){this.set("isOpened",t)}get isOpened(){return this.get("isOpened")}async open(t,e){if(this.isOpened)throw new Error("Invoice is already opened");let i;if(e){const{hostname:e,pathname:n}=new URL(t,window.location.href);if("t.me"!==e)throw new Error("Incorrect hostname: "+e);const s=n.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/);if(!s)throw new Error('Link pathname has incorrect format. Expected to receive "/invoice/{slug}" or "/${slug}"');[,,i]=s}else i=t;this.isOpened=!0;try{return(await Oi({method:"web_app_open_invoice",event:"invoice_closed",params:{slug:i},postEvent:this.postEvent,capture(t){return i===t.slug}})).status}finally{this.isOpened=!1}}}un(({version:t,postEvent:e})=>new En(!1,t,e));class xn extends Pi{constructor({postEvent:t,...e}){super(e),Ae(this,"postEvent"),Ae(this,"on",(t,e)=>"click"===t?di("main_button_pressed",e):this.state.on(t,e)),Ae(this,"off",(t,e)=>"click"===t?ui("main_button_pressed",e):this.state.off(t,e)),this.postEvent=t}get bgColor(){return this.get("bgColor")}commit(){""!==this.text&&this.postEvent("web_app_setup_main_button",{is_visible:this.isVisible,is_active:this.isEnabled,is_progress_visible:this.isLoaderVisible,text:this.text,color:this.bgColor,text_color:this.textColor})}disable(){return this.isEnabled=!1,this}enable(){return this.isEnabled=!0,this}hide(){return this.isVisible=!1,this}hideLoader(){return this.isLoaderVisible=!1,this}set isEnabled(t){this.setParams({isEnabled:t})}get isEnabled(){return this.get("isEnabled")}set isLoaderVisible(t){this.setParams({isLoaderVisible:t})}get isLoaderVisible(){return this.get("isLoaderVisible")}set isVisible(t){this.setParams({isVisible:t})}get isVisible(){return this.get("isVisible")}show(){return this.isVisible=!0,this}showLoader(){return this.isLoaderVisible=!0,this}setText(t){return this.setParams({text:t})}setTextColor(t){return this.setParams({textColor:t})}setBgColor(t){return this.setParams({bgColor:t})}setParams(t){return this.set(t),this.commit(),this}get text(){return this.get("text")}get textColor(){return this.get("textColor")}}un("mainButton",({postEvent:t,themeParams:e,state:i={isVisible:!1,isEnabled:!1,text:"",isLoaderVisible:!1,textColor:e.buttonTextColor||"#ffffff",bgColor:e.buttonColor||"#000000"}})=>new xn({...i,postEvent:t}));function On(){return Vi({contact:Xe({userId:{type:Ze(),from:"user_id"},phoneNumber:{type:ti(),from:"phone_number"},firstName:{type:ti(),from:"first_name"},lastName:{type:ti().optional(),from:"last_name"}}),authDate:{type:ji(),from:"auth_date"},hash:ti()},"RequestedContact")}function An(t,e){return i=>{const[n,s]=e[i];return mi(n,s,t)}}function Tn(t){return new Promise(e=>{setTimeout(e,t)})}class Ln extends dn{constructor({postEvent:t,createRequestId:e,version:i,botInline:n,...s}){super(s,i,{requestPhoneAccess:"web_app_request_phone",requestWriteAccess:"web_app_request_write_access",switchInlineQuery:"web_app_switch_inline_query",setHeaderColor:"web_app_set_header_color",setBackgroundColor:"web_app_set_background_color"}),Ae(this,"botInline"),Ae(this,"postEvent"),Ae(this,"createRequestId"),Ae(this,"requestPhoneAccessPromise"),Ae(this,"requestWriteAccessPromise"),Ae(this,"supportsParam"),this.createRequestId=e,this.postEvent=t,this.botInline=n;const o=this.supports.bind(this);this.supports=t=>!!o(t)&&("switchInlineQuery"!==t||n),this.supportsParam=An(i,{"setHeaderColor.color":["web_app_set_header_color","color"],"close.returnBack":["web_app_close","return_back"]})}async getRequestedContact({timeout:t=1e4}={}){return On().parse(await Ai("getRequestedContact",{},this.createRequestId(),{postEvent:this.postEvent,timeout:t}))}get bgColor(){return this.get("bgColor")}close(t){this.postEvent("web_app_close",this.supportsParam("close.returnBack")?{return_back:t}:{})}get headerColor(){return this.get("headerColor")}get isBotInline(){return this.botInline}get isDark(){return Si(this.bgColor)}ready(){this.postEvent("web_app_ready")}async requestContact({timeout:t=5e3}={}){try{return await this.getRequestedContact()}catch{}if("sent"!==await this.requestPhoneAccess())throw new Error("Access denied.");const e=Date.now()+t;let i=50;return xi(async()=>{for(;Date.now()<e;){try{return await this.getRequestedContact()}catch{}await Tn(i),i+=50}throw Ei(t)},t)}async requestPhoneAccess(t={}){return this.requestPhoneAccessPromise||(this.requestPhoneAccessPromise=Oi({...t,method:"web_app_request_phone",event:"phone_requested",postEvent:this.postEvent}).then(({status:t})=>t).finally(()=>this.requestPhoneAccessPromise=void 0)),this.requestPhoneAccessPromise}async requestWriteAccess(t={}){return this.requestWriteAccessPromise||(this.requestWriteAccessPromise=Oi({...t,method:"web_app_request_write_access",event:"write_access_requested",postEvent:this.postEvent}).then(({status:t})=>t).finally(()=>this.requestWriteAccessPromise=void 0)),this.requestWriteAccessPromise}sendData(t){const{size:e}=new Blob([t]);if(!e||e>4096)throw new Error("Passed data has incorrect size: "+e);this.postEvent("web_app_data_send",{data:t})}setHeaderColor(t){this.postEvent("web_app_set_header_color",Ti(t)?{color:t}:{color_key:t}),this.set("headerColor",t)}setBgColor(t){this.postEvent("web_app_set_background_color",{color:t}),this.set("bgColor",t)}switchInlineQuery(t,e=[]){if(!this.supports("switchInlineQuery")&&!this.isBotInline)throw new Error("Method is unsupported because Mini App should be launched in inline mode.");this.postEvent("web_app_switch_inline_query",{query:t,chat_types:e})}}un("miniApp",({themeParams:t,botInline:e=!1,state:i={bgColor:t.bgColor||"#ffffff",headerColor:t.headerBgColor||"#000000"},...n})=>new Ln({...n,...i,botInline:e}));function In(t){const e=t.message.trim(),i=(t.title||"").trim(),n=t.buttons||[];let s;if(i.length>64)throw new Error("Title has incorrect size: "+i.length);if(!e.length||e.length>256)throw new Error("Message has incorrect size: "+e.length);if(n.length>3)throw new Error("Buttons have incorrect size: "+n.length);return s=n.length?n.map(t=>{const{id:e=""}=t;if(e.length>64)throw new Error("Button ID has incorrect size: "+e);if(!t.type||"default"===t.type||"destructive"===t.type){const i=t.text.trim();if(!i.length||i.length>64){const e=t.type||"default";throw new Error(`Button text with type "${e}" has incorrect size: ${t.text.length}`)}return{...t,text:i,id:e}}return{...t,id:e}}):[{type:"close",id:""}],{title:i,message:e,buttons:s}}class Sn extends dn{constructor(t,e,i){super({isOpened:t},e,{open:"web_app_open_popup"}),this.postEvent=i}set isOpened(t){this.set("isOpened",t)}get isOpened(){return this.get("isOpened")}async open(t){if(this.isOpened)throw new Error("Popup is already opened.");this.isOpened=!0;try{const{button_id:e=null}=await Oi({event:"popup_closed",method:"web_app_open_popup",postEvent:this.postEvent,params:In(t)});return e}finally{this.isOpened=!1}}}un(({postEvent:t,version:e})=>new Sn(!1,e,t));class Dn extends dn{constructor(t,e,i){super({isOpened:t},e,{close:"web_app_close_scan_qr_popup",open:"web_app_open_scan_qr_popup"}),this.postEvent=i}close(){this.postEvent("web_app_close_scan_qr_popup"),this.isOpened=!1}set isOpened(t){this.set("isOpened",t)}get isOpened(){return this.get("isOpened")}async open(t){if(this.isOpened)throw new Error("The scanner is already opened");const{text:e,capture:i}=("string"==typeof t?{text:t}:t)||{};this.isOpened=!0;try{const t=(await Oi({method:"web_app_open_scan_qr_popup",event:["qr_text_received","scan_qr_popup_closed"],postEvent:this.postEvent,params:{text:e},capture(t){return"scan_qr_popup_closed"===t.event||!i||i(t.payload)}})||{}).data||null;return t&&this.close(),t}finally{this.isOpened=!1}}}un(({version:t,postEvent:e})=>new Dn(!1,t,e));class Pn extends Ni{constructor(t,e,i){super({isVisible:t},e,{show:"web_app_setup_settings_button",hide:"web_app_setup_settings_button"}),Ae(this,"on",(t,e)=>"click"===t?di("settings_button_pressed",e):this.state.on(t,e)),Ae(this,"off",(t,e)=>"click"===t?ui("settings_button_pressed",e):this.state.off(t,e)),this.postEvent=i}set isVisible(t){this.set("isVisible",t),this.postEvent("web_app_setup_settings_button",{is_visible:t})}get isVisible(){return this.get("isVisible")}hide(){this.isVisible=!1}show(){this.isVisible=!0}}un("settingsButton",({version:t,postEvent:e,state:i={isVisible:!1}})=>new Pn(i.isVisible,t,e));class Rn extends dn{constructor(t,e,i){super({isVerticalSwipeEnabled:t},e,{disableVerticalSwipe:"web_app_setup_swipe_behavior",enableVerticalSwipe:"web_app_setup_swipe_behavior"}),this.postEvent=i}set isVerticalSwipeEnabled(t){this.set("isVerticalSwipeEnabled",t),this.postEvent("web_app_setup_swipe_behavior",{allow_vertical_swipe:t})}get isVerticalSwipeEnabled(){return this.get("isVerticalSwipeEnabled")}disableVerticalSwipe(){this.isVerticalSwipeEnabled=!1}enableVerticalSwipe(){this.isVerticalSwipeEnabled=!0}}un("swipeBehavior",({postEvent:t,state:e={isVerticalSwipeEnabled:!0},version:i})=>new Rn(e.isVerticalSwipeEnabled,i,t));function Nn(t){return Fi().parse(t)}class qn extends mn{get accentTextColor(){return this.get("accentTextColor")}get bgColor(){return this.get("bgColor")}get buttonColor(){return this.get("buttonColor")}get buttonTextColor(){return this.get("buttonTextColor")}get destructiveTextColor(){return this.get("destructiveTextColor")}getState(){return this.clone()}get headerBgColor(){return this.get("headerBgColor")}get hintColor(){return this.get("hintColor")}get isDark(){return!this.bgColor||Si(this.bgColor)}get linkColor(){return this.get("linkColor")}get secondaryBgColor(){return this.get("secondaryBgColor")}get sectionBgColor(){return this.get("sectionBgColor")}get sectionHeaderTextColor(){return this.get("sectionHeaderTextColor")}get sectionSeparatorColor(){return this.get("sectionHeaderTextColor")}listen(){return di("theme_changed",t=>{this.set(Nn(t.theme_params))})}get subtitleTextColor(){return this.get("subtitleTextColor")}get textColor(){return this.get("textColor")}}un("themeParams",({themeParams:t,state:e=t,addCleanup:i})=>{const n=new qn(e);return i(n.listen()),n});function jn(t,e){return t.startsWith(e)?t:`${e}${t}`}function Vn(t){return new URL("string"==typeof t?t:`${t.pathname||""}${jn(t.search||"","?")}${jn(t.hash||"","#")}`,"http://a")}class Mn extends vn{constructor(t,e,i){super(t,{readTextFromClipboard:"web_app_read_text_from_clipboard"}),Ae(this,"supportsParam"),this.version=t,this.createRequestId=e,this.postEvent=i,this.supportsParam=An(t,{"openLink.tryInstantView":["web_app_open_link","try_instant_view"]})}openLink(t,e){const i=Vn(t).toString();if(!mi("web_app_open_link",this.version))return void window.open(i,"_blank");const n="boolean"==typeof e?{tryInstantView:e}:e||{};this.postEvent("web_app_open_link",{url:i,try_browser:n.tryBrowser,try_instant_view:n.tryInstantView})}openTelegramLink(t){const{hostname:e,pathname:i,search:n}=new URL(t,"https://t.me");if("t.me"!==e)throw new Error(`URL has not allowed hostname: ${e}. Only "t.me" is allowed`);mi("web_app_open_tg_link",this.version)?this.postEvent("web_app_open_tg_link",{path_full:i+n}):window.location.href=t}async readTextFromClipboard(){const t=this.createRequestId(),{data:e=null}=await Oi({method:"web_app_read_text_from_clipboard",event:"clipboard_text_received",postEvent:this.postEvent,params:{req_id:t},capture:Ci(t)});return e}shareURL(t,e){this.openTelegramLink("https://t.me/share/url?"+new URLSearchParams({url:t,text:e||""}).toString().replace(/\+/g,"%20"))}}un(({version:t,postEvent:e,createRequestId:i})=>new Mn(t,i,e));async function Un(t={}){const{is_expanded:e,is_state_stable:i,...n}=await Oi({...t,method:"web_app_request_viewport",event:"viewport_changed"});return{...n,isExpanded:e,isStateStable:i}}function zn(t){return t<0?0:t}class Wn extends mn{constructor({postEvent:t,stableHeight:e,height:i,width:n,isExpanded:s}){super({height:zn(i),isExpanded:s,stableHeight:zn(e),width:zn(n)}),Ae(this,"postEvent"),this.postEvent=t}async sync(t){const{isStateStable:e,...i}=await Un(t);this.set({...i,stableHeight:e?i.height:this.get("stableHeight")})}get height(){return this.get("height")}get stableHeight(){return this.get("stableHeight")}listen(){return di("viewport_changed",t=>{const{height:e,width:i,is_expanded:n,is_state_stable:s}=t,o=zn(e);this.set({height:o,isExpanded:n,width:zn(i),...s?{stableHeight:o}:{}})})}get isExpanded(){return this.get("isExpanded")}get width(){return this.get("width")}expand(){this.postEvent("web_app_expand"),this.set("isExpanded",!0)}get isStable(){return this.stableHeight===this.height}}un("viewport",async({state:t,platform:e,postEvent:i,addCleanup:n})=>{let s=!1,o=0,r=0,a=0;if(t)s=t.isExpanded,o=t.height,r=t.width,a=t.stableHeight;else if(["macos","tdesktop","unigram","webk","weba","web"].includes(e))s=!0,o=window.innerHeight,r=window.innerWidth,a=window.innerHeight;else{const t=await Un({timeout:1e3,postEvent:i});s=t.isExpanded,o=t.height,r=t.width,a=t.isStateStable?o:0}const c=new Wn({postEvent:i,height:o,width:r,stableHeight:a,isExpanded:s});return n(c.listen()),c});async function Kn(){if(vi(window))return!0;try{return await Oi({method:"web_app_request_theme",event:"theme_changed",timeout:100}),!0}catch{return!1}}var Bn={name:"CustomerService",mixins:[yt["a"]],components:{ServiceWidget:Ce},metaInfo(){return{title:this.$i18n.t("home.serviceCenter")}},data(){return{isSelfWin:!0}},computed:{...Object(o["c"])("base",["serviceShow","sceneCode","uid","departmentId","isKorea"]),...Object(o["c"])("config",["configReady","pLocationInfo"]),...Object(o["c"])("zchat",["queuePosition","rating","isChatting","socketSatus"])},created(){this.isApp||window.addEventListener("message",t=>{if(be["a"].formatOrigin(t.origin)===be["a"].formatOrigin(location.origin)&&"object"===typeof t.data){const{source:e}=t.data;if("baymax"===e){const{action:e,data:i}=t.data;"initConfig"===e&&this.setSystemConfigAction(i)}}},!1)},mounted(){setTimeout(()=>{this.initData()},1e3)},methods:{...Object(o["b"])("base",["setUidAction","setUidSceneAction","setUserAvatarAction","setLangAction","setSceneCodeAction","setDepartmentIdAction","setVisibleAction","setTGAction","setScreenAction","bindResizeAction"]),...Object(o["b"])("config",["setSystemConfigAction"]),async initData(){if(this.isApp)this.initApp();else{const t=await Kn();t&&this.setTGAction(!0);try{this.isSelfWin=window.self===window.top}catch(s){console.log("error :>> ",s)}}let t=localStorage.getItem("bymax_count");localStorage.setItem("bymax_count",Number(t)+1);const{href:e}=this.pLocationInfo||{};let i="",n="";if(e){const{origin:t,searchParams:s}=new URL(e);i=t,n=s.get("type_max")||""}else{const{origin:t,searchParams:e}=new URL(window.top.window.location.href);i=t,n=e.get("type_max")||""}if((this.isKorea||this.uid&&"bymax"===n&&0===Number(t))&&this.setVisibleAction(!0),i.includes("futures"))this.bindResizeAction();else{const t=window.top.window.document,e=t.getElementById("hbg-header"),i=t.getElementsByClassName("global-common-header")[0];if(e||i){const t=new ResizeObserver(t=>{for(let e of t){const{width:t,height:i}=e.contentRect;this.setScreenAction({width:t,height:i})}});t.observe(e||i)}else this.bindResizeAction()}},async initApp(){const t=await Object(we["b"])();t&&this.$callNative("needsTicket",async t=>{const e=(null===t||void 0===t?void 0:t.data)||"";e?await this.loginPRO(e):console.log("获取needsTicket失败 :>> ")}),this.$callNative("00000000",({data:t})=>{if(t.language&&this.setLang(t.language.toLocaleLowerCase()),t&&t.uid){const e=t.uid;this.setUidAction(e),this.setUidSceneAction(e.slice(0,-1)),this.setUserAvatarAction(t.avatar),this.setSceneCodeAction(this.sceneCode||1)}this.setVisibleAction(!0)})},chatClick(){let{href:t,pathname:e}=this.pLocationInfo||{};if(!t){const{href:i,pathname:n}=new URL(window.top.window.location.href);t=i,e=n}window.sensors.track("customer_sc_click",{Page_name:t,Page_pathname:e}),window.sensors.track("customer_sc_pop_expose"),this.setVisibleAction(!0)},setLang(t){this.$i18n.locale=t,this.setLangAction(t),localStorage.setItem("lang",t),document.querySelector("html").setAttribute("lang",t)},async loginPRO(t){try{const{status:e,data:i}=await _["a"].proLogin({ticket:t});"ok"===e?be["a"].setCookies("HB-PRO-TOKEN",i.token):console.log("获取HB-PRO-token失败 :>> ")}catch(e){console.log("error :>> ",e)}}},watch:{$route:{handler(t){if(0===Object.keys(t.query).length)return;const{uid:e,lang:i,sceneCode:n,departmentId:s=""}=t.query,o=Ee["localList"].includes(i)?i:"en-us";if(this.setLang(o),e){this.setUidAction(e);const t=e.slice(0,-1);this.setUidSceneAction(t)}this.setSceneCodeAction(n),s&&this.setDepartmentIdAction(1*s)},deep:!0,immediate:!0}}},Fn=Bn,Hn=(i("c536"),Object(p["a"])(Fn,n,s,!1,null,"4353454b",null));e["default"]=Hn.exports},"47a1":function(t,e,i){t.exports=i.p+"img/icon_queue.8a2851e8.svg"},"4b06":function(t,e,i){"use strict";i("1a3c")},"4fce":function(t,e,i){t.exports=i.p+"img/robot_logo.bfbd80d6.svg"},"4fe9":function(t,e,i){"use strict";i("637e")},5021:function(t,e,i){"use strict";i("b207")},"549b":function(t,e,i){"use strict";i("8cf4")},"54be":function(t,e,i){"use strict";i("00c0")},5743:function(t,e,i){},"59b6":function(t,e,i){"use strict";i("0d45")},"5cc7":function(t,e,i){"use strict";i.r(e);var n=function(){var t,e=this,i=e._self._c;return i("div",{staticClass:"chat-msg user-msg"},[i("div",{staticClass:"message-wrapper"},[i("span",{staticClass:"time"},[e._v(e._s(e._f("formatTime")(e.chatObj.timestamp)))]),i("div",{staticClass:"message-container"},[e.isMedia?i("div",{staticClass:"media-content"},[e.uploadError?i("div",{staticClass:"upload-error",on:{click:e.sendFile}},[i("i",{staticClass:"icon-info"})]):e._e(),i("div",{staticClass:"media-img",style:e.imageUrl&&`background-image: url(${e.imageUrl})`},[i("div",{staticClass:"img-wrap",class:{sending:e.isSending,error:e.uploadError}},[e.isSending?i("i",{staticClass:"loading"}):e.uploadError?i("i",{staticClass:"icon-img-error"}):e._e()])])]):i("span",[e._v(e._s(null===(t=e.chatObj.info)||void 0===t?void 0:t.message))])])]),i("div",{staticClass:"user-avatar"},[i("div",{class:{"nft-avatar":e.isNFT,avatar:!e.isNFT}},[i("img",{attrs:{src:e.avatarUrl,alt:"user"}})])])])},s=[],o=i("2f62"),r=i("cb24"),a=i.n(r),c={name:"UserMessage",props:{chatObj:{type:Object,default(){return{}}}},data(){return{isSending:!1,uploadError:!1,imageUrl:""}},computed:{...Object(o["c"])("base",["userInfo"]),isMedia(){var t;return"media"===(null===(t=this.chatObj)||void 0===t||null===(t=t.info)||void 0===t?void 0:t.type)||!1},avatarUrl(){var t;return(null===(t=this.userInfo)||void 0===t?void 0:t.imgUrl)||i("c8b6")},isNFT(){var t;return(null===(t=this.userInfo)||void 0===t?void 0:t.isNFT)||!1}},mounted(){var t;this.imageUrl=(null===(t=this.chatObj)||void 0===t||null===(t=t.info)||void 0===t||null===(t=t.message)||void 0===t?void 0:t.url)||"",!this.imageUrl&&this.isMedia&&this.sendFile()},methods:{sendFile(){var t;const e=(null===(t=this.chatObj)||void 0===t||null===(t=t.info)||void 0===t?void 0:t.message)||"";if(e){this.isSending=!0;try{a.a.sendFile(e,(t,e)=>{this.imageUrl=(null===e||void 0===e?void 0:e.url)||"",this.uploadError=!!t,this.isSending=!1})}catch(i){console.log("error :>> ",i),this.isSending=!1}}}}},l=c,u=(i("f9b9"),i("6df3"),i("2877")),d=Object(u["a"])(l,n,s,!1,null,"4850e281",null);e["default"]=d.exports},6065:function(t,e,i){t.exports=i.p+"img/resolved.5de69eb9.svg"},"61cd":function(t,e,i){t.exports=i.p+"img/no_data.83d87663.svg"},6263:function(t,e,i){var n={"./answer/Index.vue":"df8f","./guess/Index.vue":"b376","./self/Index.vue":"dc3b","./system/Index.vue":"d438","./tips/Index.vue":"e780","./user/Index.vue":"5cc7","./wating/Index.vue":"d9f6"};function s(t){var e=o(t);return i(e)}function o(t){if(!i.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}s.keys=function(){return Object.keys(n)},s.resolve=o,t.exports=s,s.id="6263"},"637e":function(t,e,i){},"64f6":function(t,e,i){},6915:function(t,e,i){},"6def":function(t,e,i){"use strict";i("3e30")},"6df3":function(t,e,i){"use strict";i("0524")},"6f19":function(t,e,i){"use strict";var n=i("9112"),s=i("0d26"),o=i("b980"),r=Error.captureStackTrace;t.exports=function(t,e,i,a){o&&(r?r(t,e):n(t,"stack",s(i,a)))}},"6f82":function(t,e,i){"use strict";i("88a7"),i("271a"),i("5494");var n=i("2f62"),s=i("d930");e["a"]={computed:{...Object(n["c"])("base",["locale","isApp","isKorea","ticketList"]),...Object(n["c"])("config",["pLocationInfo"])},methods:{linkClick(t,e=""){let i={FID:t.fId};e&&(i=Object.assign(i,{pagetype:e})),window.sensors.track("appclick_customer",i),setTimeout(async()=>{let e=Object(s["b"])(t.fUrl);if(this.isApp){if(this.isKorea)return void window.open(e,"_blank");if(e.indexOf("/reset-password/")>-1)this.$callNative("20010038","holigeit://open/v1?url=ihuobiglobal://m.hbg.com/login/forgetPassword?utm_medium=copy_link&hbOpenType=1");else{if(e.indexOf("/account/security-reset/")>-1){const{href:t}=this.pLocationInfo||{};let i="";if(t){const{origin:e}=new URL(t);i=e}else i=window.top.window.location.origin;e=`${i.replace("futures","www")}/${this.locale}/account/security-reset-h5/`}this.$callNative("20010043",{url:e,titleBack:"返回"})}}else window.open(e,"_blank")},0)}}}},"70d9":function(t,e,i){},"71d7":function(t,e,i){"use strict";i("7acc")},"739e":function(t,e,i){},"7acc":function(t,e,i){},"7b41":function(t,e,i){"use strict";i("3d9e")},"7b64":function(t,e,i){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"avatar-container"},["system"===t.type?e("div",{staticClass:"system"},[e("p",[t._v(t._s(t.$t("base.avatar/title")))])]):e("div",{staticClass:"agent"},[e("img",{attrs:{src:i("3147"),alt:"admin"}})])])},s=[],o={name:"Avatar",props:{type:{type:String,default:"agent"}}},r=o,a=(i("5021"),i("2877")),c=Object(a["a"])(r,n,s,!1,null,"25dab719",null);e["a"]=c.exports},"7c55":function(t,e,i){t.exports=i.p+"img/close_dark.9c154333.svg"},"7c69":function(t,e,i){"use strict";i("31f3")},"801d":function(t,e,i){},8061:function(t,e,i){t.exports=i.p+"img/resolved-active.c651e5c7.svg"},8093:function(t,e,i){"use strict";i("8246")},"81d8":function(t,e,i){},8246:function(t,e,i){},8653:function(t,e,i){},8817:function(t,e,i){t.exports=i.p+"img/back_dark.42b437ab.svg"},"8b6f":function(t,e,i){"use strict";i.d(e,"b",(function(){return d})),i.d(e,"a",(function(){return h}));var n=i("852e"),s=i.n(n),o=i("f953"),r=i("fa7d");const a=new Date(+new Date+3e4);function c(t){window.TOKENS=window.TOKENS||{},window.TOKENS.HBUcToken=t,s.a.set("HB-UC-TOKEN",t,{expires:a,path:"/"})}const l=()=>new Promise(async t=>{const{default:e}=await i.e("chunk-2d212b4b").then(i.t.bind(null,"aa0e",7)),n=s.a.get("HB-UC-TOKEN"),{HBUcToken:r}=window.TOKENS||{},a=()=>{e("needsTicket",e=>{t(e.data)})};n||r?o["a"].getTicket().then(e=>{e.success?t(e.data.ticket):a()}):a()}),u=async()=>{const t=await l();if(t){try{const{data:e={},success:i}=await o["a"].getUcToken({hb_uc_ticket:t});if(i)return c(e.token),!0}catch(e){console.log("error :>> ",e)}return!1}},d=()=>new Promise(async t=>{const{default:e}=await i.e("chunk-2d212b4b").then(i.t.bind(null,"aa0e",7));e("00000000",async({data:e})=>{if(e.isLogin){const e=await u();t(e)}else t(!1)})}),h=async()=>{try{if(r["a"].isAPP())return await d();const t=await o["a"].checkLogin();return!(null===t||void 0===t||!t.success)}catch(t){return!1}}},"8cf4":function(t,e,i){},"8ed2":function(t,e,i){"use strict";i("81d8")},"921f":function(t,e,i){t.exports=i.p+"img/unsolved_active.3d91be3f.svg"},"92d3":function(t,e,i){},"96bb":function(t,e,i){},"98e4":function(t,e,i){"use strict";i("801d")},"9cfe":function(t,e,i){t.exports=i.p+"img/logo_avatar.12e5b702.png"},"9e70":function(t,e,i){var n={"./admin.svg":"3147","./attachment.svg":"a183","./chat.svg":"c3c2","./chat_active.svg":"c831","./icon_queue.svg":"47a1","./icon_solve.svg":"3f00","./icon_unsolve.svg":"e0f9","./packup.svg":"3fc9","./resolved-active.svg":"8061","./resolved.svg":"6065","./send.svg":"0d11","./send_active.svg":"d32a","./unsolved.svg":"be04","./unsolved_active.svg":"921f","./user.svg":"c8b6"};function s(t){var e=o(t);return i(e)}function o(t){if(!i.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}s.keys=function(){return Object.keys(n)},s.resolve=o,t.exports=s,s.id="9e70"},"9f3b":function(t,e,i){},a183:function(t,e,i){t.exports=i.p+"img/attachment.50863015.svg"},a67d:function(t,e,i){},ab36:function(t,e,i){"use strict";var n=i("861d"),s=i("9112");t.exports=function(t,e){n(e)&&"cause"in e&&s(t,"cause",e.cause)}},ad5e:function(t,e,i){"use strict";i("6915")},aeb0:function(t,e,i){"use strict";var n=i("9bf2").f;t.exports=function(t,e,i){i in t||n(t,i,{configurable:!0,get:function(){return e[i]},set:function(t){e[i]=t}})}},af0e:function(t,e,i){"use strict";i("92d3")},af91:function(t,e,i){"use strict";i("32ff")},b170:function(t,e,i){},b207:function(t,e,i){},b33d:function(t,e,i){"use strict";i("5743")},b372:function(t,e,i){"use strict";i("96bb")},b376:function(t,e,i){"use strict";i.r(e);var n=function(){var t,e,n,s=this,o=s._self._c;return o("div",{staticClass:"chat-msg guess-msg"},[o("Avatar"),o("div",{staticClass:"message-wrapper"},[o("div",{staticClass:"message-container"},[s.artificialNoData?s._e():o("div",{staticClass:"title"},[s._v(s._s(s.guessTitle))]),(null===(t=s.chatObj.info)||void 0===t?void 0:t.guessList.length)>0?o("div",{staticClass:"list"},s._l(null===(e=s.chatObj.info)||void 0===e?void 0:e.guessList,(function(t,e){return o("div",{key:e,staticClass:"item",on:{click:function(e){return s.guessClick(t)}}},[o("span",[s._v("👉 "+s._s(t.name))])])})),0):o("div",{staticClass:"no-data",class:{"app-no-data":s.artificialNoData}},[s._v(" "+s._s(s.$t("base.guess/noData"))+" ")]),null!==(n=s.chatObj.info)&&void 0!==n&&n.isArtificial?[s.artificialNoData?s._e():o("div",{staticClass:"manual-service"},[s._v(s._s(s.$t("base.guess/serviceTips")))]),o("div",{staticClass:"action"},[o("div",{staticClass:"button",on:{click:function(t){return s.humanChatClick()}}},[o("img",{attrs:{src:i("c831"),alt:"chat"}}),o("span",[s._v(s._s(s.$t("home.chart")))])])])]:s._e()],2),o("span",{staticClass:"time"},[s._v(s._s(s._f("formatTime")(s.chatObj.timestamp)))])]),s.showLoginDialog?o("LoginPopupDialog",{attrs:{source:"detail"},on:{close:s.close}}):s._e()],1)},s=[],o=i("2f62"),r=i("e074"),a=i("7b64"),c={name:"GuessMessage",mixins:[r["a"]],components:{Avatar:a["a"]},props:{chatObj:{type:Object,default(){return{}}}},computed:{...Object(o["c"])("base",["isApp"]),guessTitle(){var t;return null!==(t=this.chatObj.info)&&void 0!==t&&t.isArtificial?this.$i18n.t("base.guess/title"):this.$i18n.t("base.guess/defaultTitle")},artificialNoData(){var t,e;return(null===(t=this.chatObj.info)||void 0===t?void 0:t.isArtificial)&&0===(null===(e=this.chatObj.info)||void 0===e?void 0:e.guessList.length)}},methods:{...Object(o["b"])("zchat",["setQuestionAction"]),guessClick(t){var e;null!==(e=this.chatObj.info)&&void 0!==e&&e.isArtificial?window.sensors.track("newcustomer_guessclick",{button_name:"list",qustionid:t.id||"",cs_base_info:t.cs_base_info||""}):window.sensors.track("newcustomer_click",{button_name:"guess",pagetype:"chat",qustionid:t.id||"",cs_base_info:t.cs_base_info||""}),this.updateChatListAction([{type:"user",info:{message:t.name}}]),this.setQuestionAction({questionId:t.id||"",question:t.name||"",baseInfo:t.cs_base_info||""}),this.$bus.emit("questionEvent")},chatClick(){window.sensors.track("newcustomer_guessclick",{button_name:"contact"}),this.beforeConnectChat()}}},l=c,u=(i("00d5"),i("4b06"),i("2877")),d=Object(u["a"])(l,n,s,!1,null,"1473126f",null);e["default"]=d.exports},b980:function(t,e,i){"use strict";var n=i("d039"),s=i("5c6c");t.exports=!n((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",s(1,7)),7!==t.stack)}))},bda6:function(t,e,i){"use strict";i("9f3b")},be04:function(t,e,i){t.exports=i.p+"img/unsolved.f9f95154.svg"},c205:function(t,e,i){"use strict";var n=function(){var t,e=this,i=e._self._c;return i("div",{staticClass:"login-popup-container"},[i("el-dialog",{attrs:{visible:!0,width:"325px","custom-class":"login-popup-dialog-container","modal-append-to-body":!1,"show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1}},[i("div",{staticClass:"popup-container",class:(null===(t=e.theme)||void 0===t?void 0:t.indexOf("light"))>-1?"":"pop-dark"},["detail"===e.source?i("span",{staticClass:"close",on:{click:function(t){return t.stopPropagation(),e.$emit("close")}}}):e._e(),i("div",{staticClass:"header"},[i("H2",[e._v(e._s(e.$t("login.title")))])],1),"detail"===e.source?i("div",{staticClass:"desc",domProps:{innerHTML:e._s(e.descText)},on:{click:e.handleEmailClick}}):e._e(),i("div",{staticClass:"action"},[i("div",{staticClass:"button-container"},[i("button",{staticClass:"button account",on:{click:function(t){return t.stopPropagation(),e.btnAccountClick.apply(null,arguments)}}},[i("span",[e._v(e._s(e.$t("login.account")))])]),"home"===e.source?i("button",{staticClass:"button",on:{click:function(t){return t.stopPropagation(),e.btnVisitorClick.apply(null,arguments)}}},[i("span",[e._v(e._s(e.$t("login.visitor")))])]):e._e(),"detail"===e.source?i("p",{staticClass:"register",on:{click:function(t){return t.stopPropagation(),e.btnRegisterClick.apply(null,arguments)}}},[e._v(" "+e._s(e.$t("login.register"))+" ")]):e._e()])])])])],1)},s=[],o=i("2f62"),r=i("4018"),a={name:"LoginDialog",mixins:[r["a"]],computed:{...Object(o["c"])("base",["locale","isApp"]),theme(){return console.log(this.$v4.get("theme")),this.$v4.get("theme")},descText(){return this.$i18n.t("login.desc",["<em>htxsupport@htx-inc.com</em>"])}},props:{source:{type:String,default:"home"}},mounted(){window.sensors.track("newcustomer_loginshow")},methods:{handleEmailClick(t){t&&t.target&&"EM"===t.target.tagName.toUpperCase()&&(window.sensors.track("customer_service_support_click",{button_name:"copy"}),this.$copyText("htxsupport@htx-inc.com").then(()=>this.copySuccess()).catch(()=>this.copyError()))},copySuccess(){this.$bus.emit("toastEvent",{time:1e3,type:"success",msg:this.$i18n.t("copy.copySuccess")})},copyError(){this.$bus.emit("toastEvent",{time:1e3,type:"error",msg:this.$i18n.t("copy.copyFail")})},async btnAccountClick(){"home"===this.source?window.sensors.track("newcustomer_loginclick",{button_name:"login"}):window.sensors.track("customer_service_support_click",{button_name:"login"}),this.$emit("close"),this.isApp?this.$callNative("20010013",{forceLoginSuccess:!0},t=>{window.location.reload()}):this.commonlogin()},btnVisitorClick(){window.sensors.track("newcustomer_loginclick",{button_name:"visiter"}),this.$bus.emit("loginDialogEvent")},btnRegisterClick(){window.sensors.track("customer_service_support_click",{button_name:"register"}),this.$emit("close"),this.isApp?this.$callNative("20010030",{},()=>{window.location.reload()}):this.commonRegister()}}},c=a,l=(i("3874"),i("2877")),u=Object(l["a"])(c,n,s,!1,null,"167928a8",null);e["a"]=u.exports},c3c2:function(t,e,i){t.exports=i.p+"img/chat.dee6e829.svg"},c536:function(t,e,i){"use strict";i("d775")},c73d:function(t,e,i){"use strict";var n=i("23e7"),s=i("da84"),o=i("edd0"),r=i("83ab"),a=TypeError,c=Object.defineProperty,l=s.self!==s;try{if(r){var u=Object.getOwnPropertyDescriptor(s,"self");!l&&u&&u.get&&u.enumerable||o(s,"self",{get:function(){return s},set:function(t){if(this!==s)throw a("Illegal invocation");c(s,"self",{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}else n({global:!0,simple:!0,forced:l},{self:s})}catch(d){}},c831:function(t,e,i){t.exports=i.p+"img/chat_active.64d5674c.svg"},c8b6:function(t,e,i){t.exports=i.p+"img/user.224d35b9.svg"},c915:function(t,e,i){"use strict";i("64f6")},cb24:function(t,e,i){i("14d9"),i("3c65"),i("d9e2"),i("13d5"),function(e,i){t.exports=i()}(window,(function(){return function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var s in t)e.d(n,s,function(e){return t[e]}.bind(null,s));return n},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="../../bin/",e(e.s=50)}([function(t,e,i){function n(t,e){var i={},n={},s=function(e){return!t.nodeType&&t!=window&&t!=document||("FORM"!=t.tagName||"submit"!=e)&&!d.isCustomEvents&&(d.isFF&&d.isFF<9?!document.createEvent("event")[e.toUpperCase()]:void 0===t["on"+e])},o=function(e,n){if(!e&&"function"!=typeof n)throw"bad arguments to on / addEventListener";return e in i||(i[e]=[],s(e)||r(e)),i[e].push(n),t},r=function(e){e in n||(n[e]=function(n){n&&(n.stopPropagation||p(n));var s,o=i[e],r=o.length,a=!0;for(o._active=!0,s=0;s<r;s++)try{if(!o[s])continue;!1===o[s].call(t,d.isCustomEvents&&n instanceof d.CustomEvent?n.detail:n)&&(a=!1)}catch(t){h.fire("error",t)}if(o._active=!1,o._dirty){for(s=0;s<r;s++)o[s]||(s==r-1?o.pop():o[s--]=o.pop(),r--);o._dirty=!1}if(!1===a)return n&&(n.preventDefault(),n.returnValue=!1),!1},t.attachEvent?t.attachEvent("on"+e,n[e]):t.addEventListener&&t.addEventListener(e,n[e],!1))},a=function(e){var s=n[e];s&&(t.attachEvent?t.detachEvent("on"+e,s):t.addEventListener&&t.removeEventListener(e,s,!1),delete n[e],delete i[e])},c=function(e,s){var o=i[e];if(o){for(var r=0,c=o.length;r<c;r++)if(o[r]===s){1==o.length?n[e]?a(e):delete i[e]:o._active?(o[r]=null,o._dirty=!0):r==c-1?o.pop():o[r]=o.pop();break}return t}},l=function(){if(i&&n){for(var t in n)n.hasOwnProperty(t)&&a(t);i=n=null}},u=function(e,n){if(!d.isCustomEvents||s(e)){var o=i[e],r=!0;if(o&&o.length){var a,c,l;for(o._active=!0,a=0,c=o.length;a<c;a++)try{if(!o[a])continue;l=o[a].call(t,n),!1===l&&(r=!1)}catch(t){h.fire("error",t)}if(o._active=!1,o._dirty){for(a=0;a<c;a++)o[a]||(a==c-1?o.pop():o[a--]=o.pop(),c--);o._dirty=!1}}return r}return t.dispatchEvent(new d.CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n}))},p=function(t){t.preventDefault=p.preventDefault,t.stopPropagation=p.stopPropagation,t.target=t.srcElement};p.preventDefault=function(){this.returnValue=!1},p.stopPropagation=function(){this.cancelBubble=!0};var f={fire:u,on:o,un:c,unextendEvents:l};if(e)return f;for(var m in f)f.hasOwnProperty(m)&&(t[m]=f[m]);return d.bugs.leaksMemory&&d.bugs.leaksMemory((function(){for(var e in f)f.hasOwnProperty(e)&&(t[e]=null)})),t}function s(t){a(0,t)}function o(t){a(1,t)}function r(t){a(2,t)}function a(t,e){t<=p?e():f[t].push(e)}function c(t){for(;p<t;){p++;for(var e=0;e<f[p].length;e++)f[p][e]();f[p]=null}}function l(){p>0||(document.body&&document.body.firstChild?c(1):window.setTimeout(l,200))}function u(){c(2)}var d=i(2),h={extend:n,body:n(document.body,!0),window:n(window,!0),document:n(document,!0),runAfterScriptReady:s,runAfterFirstChildReady:o,runAfterDomReady:r};h.extend(h);var p=0,f=[[],[],[],[]];l(),function(){var t;if(d.isSafari)t=window.setInterval((function(){/loaded|complete/i.test(document.readyState)&&(window.clearInterval(t),u())}),20);else if(document.addEventListener)/loaded|complete/i.test(document.readyState)?u():document.addEventListener("DOMContentLoaded",u,!1);else if(d.isIE){window.attachEvent("onload",u);var e=document.createElement("document:ready");t=window.setInterval((function(){if(/loaded|complete/i.test(document.readyState))e=null,window.clearInterval(t),u();else{try{e.doScroll("left")}catch(t){return}e=null,window.clearInterval(t),u()}}),200)}}(),t.exports=h},function(t,e){var i=function(t){return function(t,e){return e?null==t:void 0===t}}();t.exports=i},function(t,e,i){function n(){function t(t){return t.replace(/^http:/,R?"https:":"http:")}function e(){if(void 0!==window.innerHeight)return window.innerHeight;if(document.documentElement)return document.documentElement.offsetHeight;var t=document.getElementsByTagName("body");return t.length?t[0].clientHeight:0}function i(){if(void 0!==window.innerWidth)return window.innerWidth;if(document.documentElement)return document.documentElement.offsetWidth;var t=document.getElementsByTagName("body");return t.length?t[0].clientWidth:0}function n(){if(!o(r))return r;var t=document.createElement("div"),e=document.createElement("div"),i=t.style,n=e.style;return i.overflow="auto",i.width=i.height="100px",i.position="absolute",i.top="-1000px",n.width="100%",n.height="200px",t.appendChild(e),document.body.appendChild(t),r=t.offsetWidth-t.clientWidth,document.body.removeChild(t),r}var r,a,c=navigator,l=c.userAgent.toLowerCase(),u=+(/trident.*rv:? *([0-9]+)/.exec(l)||[])[1]||!1,d=function(){for(var t=3,e=document.createElement("div"),i=e.getElementsByTagName("i");e.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e",i[0];);return t>4?t:document.documentMode}(),h=8===d,p=7===d,f=6===d,m=!!window.opera&&"[object Opera]"===Object.prototype.toString.call(window.opera),g=l.indexOf("edge")>-1,v="Google Inc."===c.vendor,_="Apple Computer, Inc."===c.vendor,b=!g&&!d&&!m&&(v||_||/webkit|khtml/.test(l)),w=+/\d+/.exec(/firefox\/\d+/i.exec(c.userAgent)||""),y=-1!==l.indexOf("iphone"),k=-1!==l.indexOf("ipod"),$=-1!==l.indexOf("ipad"),C=y||$||k,E=-1!==l.indexOf("android"),x=-1!==l.indexOf("wp7"),O=C||E||x,A=(d?"msie":w&&"firefox")||m&&"opera"||v&&"chrome"||_&&"safari",T="CSS1Compat"===document.compatMode,L=!T,I=d&&L&&document.documentElement&&!!document.documentElement.style.setExpression,S=document.documentMode||d,D=-1!==l.indexOf("windows")||-1!==l.indexOf("win32"),P=-1!==l.indexOf("macintosh")||-1!==l.indexOf("mac os x"),R="https:"===document.location.protocol,N=c.language||c.browserLanguage||c.userLanguage||c.systemLanguage,q={noBoxSizing:S<=7,ie:{cssBottomRight:f,cssFixed:f||I,buggyCSS:f||I}},j="textContent"in document.createElement("div"),V=!1,M=null;try{window.CustomEvent&&/\[native code\]|\[object CustomEventConstructor\]/.test(window.CustomEvent.toString())&&(new window.CustomEvent("testevent",{bubbles:!1,cancelable:!0,detail:!0}),V=!0,M=window.CustomEvent)}catch(t){}switch(A){case"msie":case"firefox":case"chrome":a=+/\d+/.exec(new RegExp(A+"[ /]\\d+").exec(l)||"");break;default:a=+/\d+/.exec(/version[ \/]\d+/.exec(l)||"")}var U=!1;try{var z={get passive(){U=!0}},W=function(){};window.addEventListener("test",W,z),window.removeEventListener("test",W,z)}catch(t){U=!1}if(f){var K=[];q.leaksMemory=function(t){s.isFunction(t),K.push(t)};var B=function(){for(var t=0;t<K.length;t++)K[t]()};q.leaksMemory.remove=function(t){for(var e=K.length-1;e>=0;e--)t==K[e]&&K.splice(e,1)},window.attachEvent("onunload",B)}var F="Shockwave Flash",H="ShockwaveFlash.ShockwaveFlash",Q="application/x-shockwave-flash",G="application/x-java-vm";return{browser:A,version:a,isStrict:T,isQuirks:L,isOpera:m,isSafari:_,isWebKit:b,isChrome:v,isAndroid:E,isIPhone:y,isIPod:k,isIPad:$,isIOS:C,isWP7:x,isMobile:O,isNewIE:u,isEdge:g,isIE:d,isIE6:f,isIE7:p,isIE8:h,isFF:w,isCustomEvents:V,CustomEvent:M,engineIE:S,bugs:q,isWindows:D,isMac:P,isSecure:R,secureURL:t,hasFlash:function(){var t,e=c.plugins&&c.plugins[F];if(e)return t=c.mimeTypes&&c.mimeTypes[Q],t&&!t.enabledPlugin?null:e.description;if(window.ActiveXObject)try{return e=new window.ActiveXObject(H),e.AllowScriptAccess="always",e.GetVariable("$version")}catch(t){}}(),hasJava:function(){var t=c.mimeTypes;return d?!x&&"javaEnabled"in c&&c.javaEnabled():t&&(t=t[G])&&(t=t.enabledPlugin)?t.name:void 0}(),language:N,getScrollbarSize:n,getWindowClientHeight:e,getWindowClientWidth:i,isTextContent:j,hasPassiveListeners:U}}var s=i(23),o=i(1),r=n();r.sniffBrowser=n,t.exports=r},function(t,e,i){function n(){if(window.$zopim&&window.$zopim.s)return window.$zopim.s.src;for(var t,e=document.getElementsByTagName("script"),i=/.*zopim.(com|net|org)\//,n=0,s=e.length;n<s;n++)if(t=e[n].src||"",i.test(t))return t;return""}function s(t){t&&!m.test(t)&&(t=null);var e="id."+(d.brandDomain||"zopim.com");return"https://"+(t||e)+"/authenticated/web/jwt"}function o(t){if(t){if(g.test(t))return t.replace(g,"$1.zopim.com$2");m.test(t)||(t=null)}var e="widget-mediator."+(d.brandDomain&&d.brandDomain.replace(/:[0-9]+/,"")||"zopim.com");return t||e}var r=i(1),a=i(4),c=i(2),l=i(46),u=i(21),d=function(){for(var t=n(),e=[/\/?[?]/,/\/livechat\//],i=[],s=0;s<e.length;s++)if(i=t.split(e[s]),i.length)break;var o=i[1],r=i[0],a=/^(https?:)?\/\/[^\/]+/.exec(r),c=r.replace(/^(https?:)?\/\//i,"").split("/")[0],l=c.replace(/(.+\.)(?=.+\..+)/,""),u=i[0].split("/");return u=u.pop()==c?i[0]:u.join("/"),a=a&&"zopim.com"!==c?a[0]:"https://v2.zopim.com",{accountKey:o,brandDomain:l,baseURL:u,rootURL:a}}(),h="https://v2.zopim.com/widget",p=h+"/images",f=l.map([".zopim.com",".zopim.org",".zdch.at",".zd-dev.com",".bre-zd.com"],u.escape),m=new RegExp("^[a-z][a-z0-9_-]*(\\.[a-z][a-z0-9_-]*)*("+f.join("|")+")(:\\d+)?$","i"),g=/^([a-z][a-z0-9_-]*)(:\d+)?$/i;r(a.baseURL,!0)&&(a.baseURL=c.secureURL(d.baseURL));var v={ASSETS_URL:h,IMAGES_URL:p,SOUNDS_URL:"https://v2.zopim.com/widget/sounds",FONTS_URL:"https://v2.zopim.com/widget/fonts",ASSETS_LEGACY:document.location.protocol+"//cdn.zopim.com/assets",BRANDING_URL:"https://www.zopim.com",AVATARS:{CONCIERGE:p+"/avatar_simple_agent.png",AGENT:p+"/avatar_simple_agent.png",VISITOR:p+"/avatar_simple_visitor.png",DEFAULT:p+"/avatar_simple_visitor.png"},ACCOUNT_KEY:d.accountKey,BRAND_DOMAIN:d.brandDomain,COUNTRY_CODE:function(){var t='\x3c!--# echo var="http_cf_ipcountry" default="geo" --\x3e'.toUpperCase();return"<"==t.charAt(0)&&(t="geo"),t}(),AUTH_URL:"https://www.zopim.com/auth/$NAME/$KEY-$MID",AUTH_LOGOUT_URL:"https://www.zopim.com/auth/logout/$KEY-$MID",AUTH_SERVER_URL:s(),IS_POPOUT:window.$zopim_popout,POPOUT_WINDOW_PREFIX:"zlivechatpopout_",POPOUT_URL:d.rootURL+"/widget/livechat.html",CALLBACK_FILE_UPLOAD_PATH:"/client/widget/upload",FILE_UPLOAD_PATH:"/client/widget/uploads",FILE_UPLOAD_MAX:20971520,RESEND_MSG_TIMEOUT:5e3,FILE_REPLACE_SOURCE:/^(\s*https?\:\/\/v2(?:assets|uploads)\.zopim\.)com(\/)/i,FILE_REPLACE_RESULT:"$1io$2",CHAT_LOG_REMEMBER_COUNT:10,getAuthServerURL:s,getMediatorHost:o};t.exports=v},function(t,e){var i={build_number:"20200423.075440",git_commit:"a2e84ec3fc0a7507e1dcc0cd9c0b4c7c6519e194",release_tag:"1.11.2"};t.exports=i},function(t,e){function i(t){return"function"==typeof t}t.exports=i},function(t,e,i){function n(t,e){for(var i,n=document.createElement("div"),s=0,o=N.length;s<o;s++)if(void 0!==n.style[N[s]]){i=e[s];break}return i?t?function(t,e,n){t.autobind(e,i,n)}:function(t,e,n){q&&t.autounbind(e,i,n)}:function(){}}function s(t,e){for(var i={},n=0,s=e.length;n<s;n++){var o=e[n];o in t&&(i[o]=t[o])}return i}function o(){for(var t,e,i=arguments.length,n=1,s=arguments[0]||{};n<i;n++)if(null!=(t=arguments[n]))for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&s!==t[e]&&(s[e]=t[e]);return s}function r(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(e[i]&&e[i].constructor&&e[i].constructor===Object?(t[i]=t[i]||{},r(t[i],e[i])):t[i]=e[i]);return t}function a(t,e){for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(!(i in t))continue;e[i]&&e[i].constructor&&e[i].constructor===Object?a(t[i],e[i]):delete t[i]}return t}function c(){if(void 0===A)try{A=l()}catch(t){}return A}function l(){if(!window.getComputedStyle)return!1;var t=document.createElement("div"),e="border-box";document.body.appendChild(t),t.style.height="10px",t.style.padding="5px",t.style.boxSizing=e,t.style.webkitBoxSizing=e,t.style.mozBoxSizing=e;var i=parseInt(window.getComputedStyle(t).height,10);return document.body.removeChild(t),10!=i}function u(t){var e=t.getComputedStyle();if("auto"==e.height)return t.getHeight();var i=parseInt(e.height,10)||0;return V.computedHeightBoxSizingBug()&&(i+=(parseInt(e.paddingTop,10)||0)+(parseInt(e.paddingBottom,10)||0)+(parseInt(e.borderTopWidth,10)||0)+(parseInt(e.borderBottomWidth,10)||0)),i+"px"}function d(t){function e(){this.addClass("hover")}function i(){this.removeClass("hover")}T.bugs.noBoxSizing&&(t.on("mouseover",e),t.on("mouseout",i))}function h(t,e){for(var i,n=e.split(".");n.length;)i=n.shift(),L(t[i],!0)&&(t[i]={}),t=t[i];return t}function p(t,e){if(0===e.indexOf(t.path)){for(var i,n=t.path.split(".").length,s=e.split(".").slice(n),o=t.update;s.length;){if(i=s.shift(),!(i in o))return;o=o[i]}return o}}function f(t,e,i){t=t.split(".");var n=t.pop();if(n){for(var s=0,o=t.length;s<o;s++)t[s]in i||(i[t[s]]={}),i=i[t[s]];i[n]=e}}function m(t){for(var e=t.split("."),i="."+e.splice(e.length-2,2).join(".");e.length;){var n={domain:i,path:"/"};if(S.set("zte2095","1",n),"1"==S.get("zte2095")){S.remove("zte2095",n);break}i="."+e.pop()+i}return i}function g(t){return U.test(t)}function v(t){return M.test(t)}function _(t){if(t&&"object"==typeof t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}}function b(t){if(window.Image)try{var e=new window.Image;e.onload=e.onerror=function(){t(!(1!=this.width||1!=this.height))},e.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}catch(e){t()}else t()}function w(t,e){t=parseInt(t,10),isNaN(t)&&(t=0);var i=t<0;t=Math.abs(t).toString().split("");for(var n=Math.max(e-t.length,0);n--;)t.unshift("0");return i&&t.unshift("-"),t.join("")}function y(t,e){function i(t,e,i){return i.replace("<hours>",t).replace("<minutes>",e)}var n=I("<hours>:<minutes>"),s=I("<hours>:<minutes> am"),o=I("<hours>:<minutes> pm"),r="24"===e?24:12,a=function(t,e){return t-Math[t>0?"floor":"ceil"](t/e)*e}(Math[t>0?"floor":"ceil"](t/60),r),c=V.pad(Math.abs(t)%60,2);if(24===r)return i(V.pad(a,2),c,n);var l=0===a?12:a;return Math.abs(t/60)%24<12?i(l,c,s):i(l,c,o)}function k(t){return t&&t.replace(D.FILE_REPLACE_SOURCE,D.FILE_REPLACE_RESULT)}function $(t,e){if(e=parseInt(e,10),!e)return t.getValue();var i=t.getKeys(),n=i.length,s={};if(n<=e)return t.getValue()||s;for(var o=0;o<n;o++)i[o]=parseInt(i[o],10);i=i.sort().slice(-e);var r,a=t.getValue();if(!a)return s;for(o=0,n=i.length;o<n;o++)r=i[o],s[r]=a[r];return s}function C(t,e){var i;t.leaf&&t.parentNode?(i={},i[t.name]=e,t.parentNode.write(i)):t.write(e)}function E(){if(T.isNewIE)try{"body"!==document.activeElement.nodeName.toLowerCase()&&document.activeElement.focus()}catch(t){}}function x(){window.console&&window.console.warn&&window.console.warn("The Zopim widget embed code is invalid. Please email chat@zendesk.com with your account key: "+D.ACCOUNT_KEY)}function O(t,e,i){return D.AUTH_URL.replace("$NAME",t).replace("$KEY",e).replace("$MID",i)}var A,T=i(2),L=i(1),I=i(11),S=i(16),D=i(3),P="-webkit- -moz- -o- -ms- ".split(" "),R="webkit Moz O ms ".split(" "),N=["transition","MozTransition","OTransition","WebkitTransition"],q=["transitionend","transitionend","otransitionend","webkitTransitionEnd"],j=["animationend","animationend","oanimationend","webkitAnimationEnd"],V={contains:function(){var t=document.documentElement;return t.compareDocumentPosition?function(t,e){return t=t.dom||t,e=e.dom||e,!!(16&t.compareDocumentPosition(e))}:t.contains?function(t,e){t=t.dom||t,e=e.dom||e;var i=9===t.nodeType?t.documentElement:t,n=e.parentNode;return t===n||!!(n&&1===n.nodeType&&i.contains&&i.contains(n))}:function(t,e){for(t=t.dom||t,e=e.dom||e;e=e.parentNode;)if(e===t)return!0;return!1}}(),onTransitionEnd:n(!0,q),unTransitionEnd:n(!1,q),onAnimationEnd:n(!0,j),unAnimationEnd:n(!1,j),css_prefixes:P,cssom_prefixes:R,isStyleSupported:function(){function t(t){for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=(t+" "+R.join(e+" ")+e).split(" "),s=0;s<n.length;s++)if(void 0!==i[n[s]])return!0;return!1}var e=document.createElement("div"),i=e.style;return t}(),pick:s,shallowExtend:o,fullyExtend:r,fullyDelete:a,computedHeightBoxSizingBug:c,getComputedHeight:u,hoverFix:d,getEffectiveTLD:m,descendsObj:h,insertObj:f,getValueByReference:p,isDefaultName:v,getKeys:_,supportsDataURI:b,isIE:function(){return T.isIE||/Trident\//.test(window.navigator.userAgent)}(),pad:w,formatMinutesAsHours:y,replaceFileHostname:k,getLastLogEntries:$,writeNode:C,isAgentNick:g,refocusActiveElement:E,warnBadEmbed:x,getAuthLoginUrl:O},M=/^Visitor [0-9]{3,}$/,U=/^agent:[0-9]+/i;t.exports=V},function(t,e){function i(t){return"[object Array]"==Object.prototype.toString.call(t)}t.exports=i},function(t,e,i){function n(t){return this instanceof n?t?n.parseQuery(t):void(this.store={}):(c||n._initSingleton(window),c)}function s(t,e,i){if(void 0===e&&void 0===i)return t;if(void 0===e&&(e="string"),!(e in a))throw"invalid type requested";return void 0===t?void 0!==i?i:a[e]:"boolean"===e?r.test(t):"integer"===e?!0===t?1:parseInt(t,10):"float"===e?!0===t?1:parseFloat(t):t}var o=i(7),r=/^(1|on|true)$/i,a={boolean:!1,integer:0,float:0,string:""},c=null;n._initSingleton=function(t){c=new n(t.location.search)},n.buildQuery=function(t){var e,i,n,s,r,a,c=[],l=[];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&c.push(r);for(c.sort(),e=0,n=c.length;e<n;e++)if(r=c[e],a=t[r],r=window.encodeURIComponent(r),o(a))if(1!==a.length||!0!==a[0])for(i=0,s=a.length;i<s;i++)l.push(r+"="+window.encodeURIComponent(a[i]+""));else l.push(r);else l.push(r+"="+window.encodeURIComponent(a+""));return l.join("&")},n.parseQuery=function(t){var e,i,s=new n;t=t.replace(/^\?|\/+$/g,"");var o,r,a=t.split("&");for(e=0,i=a.length;e<i;e++){var c=a[e];if(c.length){var l=c.indexOf("=");l<=-1?(o=c,r=!0):(o=c.slice(0,l),r=window.decodeURIComponent(c.slice(l+1))),s.add(window.decodeURIComponent(o),r)}}return s},n.getHash=function(t,e){var i=e||window.location.hash;return n.parseQuery(i.replace(/^#/,"")).get(t)};var l=n.prototype;l.add=function(t,e){this.has(t)?this.store[t].push(e):this.store[t]=[e]},l.has=function(t){return Object.prototype.hasOwnProperty.call(this.store,t)},l.getLast=function(t,e,i){return this.has(t)?this.getAt(t,this.store[t].length-1,e,i):s(void 0,e,i)},l.getFirst=function(t,e,i){return this.getAt(t,0,e,i)},l.getAt=function(t,e,i,n){return s(this.has(t)?this.store[t][e]:void 0,i,n)},l.getRaw=function(t){return this.has(t)?this.store[t].concat():[]},l.get=l.getLast,l.toString=function(){return n.buildQuery(this.store)},t.exports=n},function(t,e,i){function n(t,e){if(!o(t))throw new TypeError("FunctionUtils.bind - what is trying to be bound is not callable");if(o(t.bind)&&!("prototype"in t.bind))return t.bind.apply(t,a.call(arguments,1));var i=a.call(arguments,2),n=function(){},s=function(){return t.apply(this instanceof n&&e?this:e,i.concat(a.call(arguments)))};return n.prototype=s.prototype,s.prototype=new n,s}function s(t){var e;return function(){if(!e)return e=!0,t.apply(this,a.call(arguments))}}var o=i(5),r={bind:n,once:s},a=Array.prototype.slice;t.exports=r},function(t,e,i){function n(t){return'"'+t.replace(d,s)+'"'}function s(t){return h[t]||"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}function o(t){switch(typeof t){case"string":return n(t);case"number":return isFinite(t)?t.toString():"null";case"boolean":return String(t);case"object":if(!t)return"null";var e,i,s=[];if(l(t)){for(e=0,i=t.length;e<i;e++)s[e]=o(t[e])||"null";return"["+s.join(",")+"]"}var r,a,c=[];for(r in t)t.hasOwnProperty(r)&&c.push(r);for(c.sort(),e=0,i=c.length;e<i;e++)r=c[e],a=o(t[r]),a&&s.push(n(r)+":"+a);if(s.length)return"{"+s.join(",")+"}"}}function r(t,e,i){return e?m[e]:String.fromCharCode(parseInt(i,16))}function a(t){var e,i,n,s,o,a=t.match(p),c=a.length,l=a[0];"{"==l?(e={},o=1):"["==l?(e=[],o=1):(e=[],o=0,i=!0);var u=[e];for(c=a.length;o<c;++o)switch(l=a[o],l.charCodeAt(0)){case 91:s=u[0],u.unshift(s[n||s.length]=[]),n=void 0;break;case 93:u.shift();break;case 123:s=u[0],u.unshift(s[n||s.length]={}),n=void 0;break;case 125:u.shift();break;case 102:s=u[0],s[n||s.length]=!1,n=void 0;break;case 110:s=u[0],s[n||s.length]=null,n=void 0;break;case 116:s=u[0],s[n||s.length]=!0,n=void 0;break;case 34:if(l=l.substring(1,l.length-1),-1!==l.indexOf(v)&&(l=l.replace(f,r)),s=u[0],void 0==n){if(!(s instanceof Array)){n=l||g;break}n=s.length}s[n]=l,n=void 0;break;default:s=u[0],s[n||s.length]=+l,n=void 0}if(i){if(1==u.length)return e[0]}else if(!u.length)return e;throw"error"}var c=i(1),l=i(7),u=!c(window)&&window.JSON||{parse:a,stringify:o},d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\\":"\\\\",'"':'\\"'},p=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),f=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),m={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},g=new String(""),v="\\";t.exports=u},function(t,e,i){function n(t,e){if(isNaN(t)){var i=new s;return i.add("_",t),i}-1==t&&(t=b.length);var n=b[t];if(n||(b[t]=n=new s),"string"==typeof e)n.add("_",e);else for(var o in e)e.hasOwnProperty(o)&&n.add(o,e[o]);return n}function s(){function t(t,e){l[t]=e}function e(t){o(t,d)}function i(t){u.push(t)}function n(){return r()}function r(t){return l[t||w]||l._}function a(t){var e,i=r(t);for(e=0;e<u.length;e++)u[e](i)}function c(t,e){var i,n=new s;for(var o in b[l._]=n,l)if(l.hasOwnProperty(o)){if(i=l[o],"string"!=typeof i)continue;i=i[t].apply(i,e),n.add(o,i)}return n}for(var l={},u=[],d={add:t,bind:e,onTranslate:i,toJSON:n,toString:r,update:a},h=["concat","replace","toLowerCase","toUpperCase"],p=0;p<h.length;p++)d[h[p]]=function(t){return function(){return c(t,arguments)}}(h[p]);return d}function o(t,e){for(var i=0;i<y.length;i++)if(y[i]==t)return void(k[i]=e);y.push(t),k.push(e)}function r(t){for(var e=0;e<y.length;e++)if(y[e]==t)return y.splice(e,1),void k.splice(e,1)}function a(t){t=t.split(/-|_/).slice(0,2);var e=t[0]=t[0].toLowerCase();return t[1]&&(t[1]=t[1].toUpperCase()),t=t.join("_"),g.languages?t in g.languages?t:e in g.languages?e:null:null}function c(t){var e,i,s,o,r,c;t=a(t),t&&(r=g.languages[t],r&&(c=v[g.languages[t]],c&&(n.language=w=t,_.ensureLoaded(c,(function(n){if(n&&l(t),t==w){for(e=0,i=b.length;e<i;e++)b[e].update instanceof Function&&b[e].update(t);for(e=0,i=y.length;e<i;e++)if(s=y[e],o=k[e].toString(),C)s.textContent=o;else if("string"==typeof s.innerText)s.innerText=o;else if("string"==typeof s.nodeValue)try{s.data=o}catch(t){}for($._active=!0,i=$.length,e=0;e<i;e++)try{$[e]&&$[e](t)}catch(t){}if($._active=!1,$._dirty){for(e=0;e<i;e++)$[e]||(e==i-1?$.pop():$[e--]=$.pop(),i--);$._dirty=!1}}})))))}function l(t){var e,i=v[g.languages[t]];for(e=0;e<i.length;e++)0!==i[e]&&b[e].add(t,i[e])}function u(t){$.push(t)}function d(t){for(var e=0,i=$.length;e<i;e++)if($[e]==t){$._active?($[e]=null,$._dirty=!0):e==i-1?$.pop():$[e]=$.pop();break}}function h(){return!(-1==w.search(E))}function p(t){return h()?t.replace(/left/,"%left%").replace(/right/,"left").replace(/%left%/,"right").replace(/ltr/,"%ltr%").replace(/rtl/,"ltr").replace(/%ltr%/,"rtl"):t}function f(){var t=g.strings;if(t)for(var e=0;e<t.length;e++)n(e,t[e])}var m=i(2),g=i(4),v=i(19),_=i(43),b=[],w="_",y=[],k=[],$=[],C=m.isTextContent,E=/^ar|^fa|^he|^ur/;n.bind=o,n.flip=p,n.onLanguage=u,n.unLanguage=d,n.update=c,n.unbind=r,n.rtl=h,n.findClosestLanguage=a,n.loadDefaultStrings=f,f(),t.exports=n},function(t,e){function i(t){return"string"==typeof t}t.exports=i},function(t,e,i){function n(t){f=t}function s(t){$=t?_.getAuthServerURL(t):_.AUTH_SERVER_URL}function o(t){h=t}function r(){return h}function a(t){p?+new Date-p.issued_at>=p.expires_in-6e4?b.authenticate((function(e){e?(f&&f.$("visitor").$("auth_status$string").update("failed"),t(e,null)):t(null,p.id_token)})):t(null,p.id_token):t(null,null)}function c(){h=void 0,p=void 0,f&&f.$("visitor").$("authenticated$bool").update(!1)}function l(){return!!p}function u(t){h&&h(g.once((function(e){e&&m(e)?b.exchangeToken({account_key:_.ACCOUNT_KEY,auth_url:$,site_jwt:e,state:p&&p.state?p.state:null},(function(e,i){p=i,f&&f.$("visitor").$("authenticated$bool").update(!e),t(e)})):t({reason:"invalid jwt in callback"})})))}function d(t,e){var i=new XMLHttpRequest;i.open("POST",t.auth_url,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.onload=function(){if(e){var t;try{var n=i.response;if(""===n)throw w;t=JSON.parse(n)}catch(t){return void e({reason:w})}200===i.status?e(void 0,{issued_at:+new Date,id_token:t.id_token,expires_in:1e3*t.expires_in,state:t.state}):e({reason:k,details:t.details})}},i.onerror=function(){e&&e({reason:y})};var n={account_key:t.account_key,token:t.site_jwt,format:"json"};t.state&&(n.state=t.state);var s=v.buildQuery(n);i.send(s)}var h,p,f,m=i(12),g=i(9),v=i(8),_=i(3),b={authenticate:u,isAuthenticated:l,getSiteJWTFunc:r,retrieveIDToken:a,clearIdentity:c,setOverrideHost:s,setSiteJWTFunc:o,setDataNode:n,exchangeToken:d},w="format error",y="network/security error",k="jwt verification error",$=_.AUTH_SERVER_URL;t.exports=b},function(t,e,i){function n(t){y.setActivityWindow(t),E=k.ACCOUNT_KEY,g=(t||window).location.hostname,v=/\b(?:\d{1,3}\.){3}\d{1,3}/.test(g)?g:$.getEffectiveTLD(g)}function s(){try{if(k.IS_POPOUT)return y.get(A)||b().get("mid");var t=d();return t||y.get(O)||localStorage.getItem(O)||""}catch(t){return window[O]||""}}function o(t){try{y.set(O,t,{path:"/",ttl:365,domain:v}),localStorage.setItem(O,t)}catch(t){window[O]=t}}function r(){try{y.remove(O,{path:"/",domain:v}),localStorage.removeItem(O)}catch(t){window[O]=""}}function a(){var t=h();if("boolean"==typeof t)return t;var e=y.get(T);return e=parseInt(e,10),0!==e&&(1===e||void 0)}function c(){y.remove(T,{path:"/",domain:v})}function l(t){t=_(t),t=t?1:0,y.set(T,t,{path:"/",ttl:365,domain:v})}function u(){r(),w.remove(x)}function d(){var t=y.getJSONCookie("__zlcid");if(y.remove("__zlcid",{path:"/"}),t.mID)return t.mID;var e=p("__zlcstore");return y.remove("__zlcstore",{path:"/",domain:v}),e&&e.mID?e.mID:void 0}function h(){var t,e=p("__zlcprivacy");return"boolean"==typeof e&&(t=e,l(e)),t}function p(t){return y.getJSONCookie(t)[E]}function f(t,e){var i=w.get(x)||{};i[E]||(i[E]={});var n=i[E];n[t]=e,n.timestamp=+new Date,w.set(x,i)}function m(t){var e=w.get(x)||{};if(!e[E])return{};var i=e[E];return i.timestamp?+new Date-i.timestamp>C?{}:i[t]:i[t]||{}}var g,v,_=i(38),b=i(8),w=i(37),y=i(16),k=i(3),$=i(6),C=48e4,E=k.ACCOUNT_KEY,x="__zlcstore",O="__zlcmid",A="__zlcpomid",T="__zlcprivacy",L={init:n,DOM:{saveVariable:f,getVariable:m},Cookie:y,clearAll:u,setIdentity:o,getIdentity:s,clearIdentity:r,clearAllowCookieLaw:c,getAllowCookieLaw:a,setAllowCookieLaw:l};t.exports=L},function(t,e,i){function n(){var t=this;return this.arr=[],this.validate=b.bind(this.validate,this),k.concat(["validateAndThrow","validateAndLog"]).forEach((function(e){t.validate[e]=t[e].bind(t)})),this.validate}function s(t){return function(e){if(0===t.length)return!1;for(var i=0,n=t.length;i<n;i++)if(!(0,t[i])(e))return!1;return new v('Expect "'+e+'" to fulfill at least one condition',e)}}function o(t){return function(e){if(e!==t)return new v('expect "'+e+'" to equal "'+t+'"',e)}}function r(t,e){return function(i){if("object"!=typeof i||!i)return new v('Expect "'+i+'" to be an object',i);if(e&&e.requiredKeys)for(var n=0,s=e.requiredKeys.length;n<s;n++){var o=e.requiredKeys[n];if(!(o in i)){var r=new v('Expect key "'+o+'" to be defined',i);return r.unshiftPath(o)}}for(var a in i)if(Object.prototype.hasOwnProperty.call(i,a)){var c,l=i[a],u=t[a];if(u)c=u(l);else{if(e&&!e.whitelistedKeysOnly)continue;c=new v('The key "'+a+'" is not whitelisted',i)}if(c)return c.unshiftPath(a)}}}function a(t){return function(e){if(typeof e!==t)return new v('Expect "'+e+'" to have type "'+t+'"',e)}}function c(){return function(t){if(!t)return new v('Expect "'+t+'" to be truthty',t)}}function l(t){return function(e){if(t.lastIndex=0,!t.test(e))return new v('Expect "'+e+'" to match predefined format',e)}}function u(t){return function(e){if(e.length<t)return new v('Expect the length of "'+e+'" to be at least '+t,e)}}function d(t){return function(e){if(e.length>t)return new v('Expect the length of "'+e+'" to be at most '+t,e)}}function h(){return function(t){if(!_(t))return new v('Expect "'+t+'" to be an Array',t)}}function p(t){return function(e){var i;if(!_(e))return new v('Expect "'+e+'" to be an Array',e);for(var n=0,s=e.length;n<s;n++)if(i=t(e[n]),i)return i.unshiftPath(n)}}function f(t,e){return function(i){if(!t(i))return new v('Expect "'+i+'" to '+e,i)}}function m(t){return t}function g(t){var e=window.console;e.error?e.error(t):e.log&&e.log(t)}function v(t,e){this.message=t,this.actual=e,this.paths=void 0,this.unshiftPath=function(t){return this.paths||(this.paths=[]),this.paths.unshift(t),this}}var _=i(7),b=i(9),w=window.Error,y={any:s,equal:o,obj:r,type:a,ok:c,chain:m,regex:l,minLength:u,maxLength:d,array:h,each:p,predicate:f},k=Object.keys(y),$=n.prototype;k.forEach((function(t){var e=y[t];n[t]=$[t]=function(){if(!(this instanceof n)){var i=new n;return i[t].apply(i,arguments)}var s=e.apply(null,arguments);return this.arr.push(s),this.validate}})),$.validate=function(t){for(var e,i,n=0,s=this.arr.length;n<s;n++)if(e=this.arr[n],i=e(t),i)return i},$.validateAndThrow=function(t,e){var i=this.validate(t);if(e=e?e+" - ":"",i)throw new w(e+i.message)},$.validateAndLog=function(t,e){var i=this.validate(t);if(e=e?e+" - ":"",i)return g(new w(e+i.message)),i},t.exports=n,v.prototype=Object.create(w.prototype),v.prototype.name="ValidationError"},function(t,e,i){function n(t){m=t||window,p=m.encodeURIComponent,f=m.decodeURIComponent}function s(t){return"string"==typeof t&&""!=t}function o(){var t,e,i,n,s=m.document.cookie,o={};if(!s||"string"!=typeof s)return{};for(s=s.split(/;\s/),t=s.length;t--;)try{if(e=s[t].match(/^([^=]+)(=(.*))?$/),!e)continue;i=f(e[1]),n=f(e[3]||""),o[i]=n}catch(t){}return o}function r(t){return s(t)&&o()[t]||null}function a(t){var e=r(t),i={};try{i=d.parse(e)}catch(t){}return i&&"object"==typeof i?i:{}}function c(t,e,i){i=i||{};var n=p(t)+"="+p(e);if("ttl"in i){var s=new Date,o=24*i.ttl*60*60*1e3;s.setTime(s.getTime()+o),n+="; expires="+s.toGMTString()}"path"in i&&(n+="; path="+i.path),"domain"in i&&(n+="; domain="+i.domain),i.secure&&(n+="; secure"),n+="; SameSite="+(i.samesite||"Lax"),m.document.cookie=n}function l(t,e,i){"object"!=typeof e&&(e={}),c(t,d.stringify(e),i)}function u(t,e){e=e||{},e.ttl=-1,c(t,"",e)}var d=i(10),h={set:c,get:r,getJSONCookie:a,setJSONCookie:l,remove:u,setActivityWindow:n},p=window.encodeURIComponent,f=window.decodeURIComponent,m=window;t.exports=h},function(t,e,i){function n(t,e,i){if(r.ok("function"==typeof t,"1st argument to nextTick must be a function"),i)for(var n=l.length;n-- >0;)if(l[n][0]===t&&l[n][1]===e)return;l.push([t,e]),o||(o=setTimeout(s,0))}function s(){var t=+new Date+c,e=l;l=[],o&&(o=clearTimeout(o));for(var i=0,n=e.length;i<n;i++){try{e[i][0].apply(e[i][1])}catch(t){a.fire("error",t)}if(+new Date>t){i<n-1&&(e.splice(0,i+1),l.length?l=e.concat(l):(l=e,o=setTimeout(s,0)));break}}}var o,r=i(23),a=i(0),c=100,l=[];n.tick=s,t.exports=n},function(t,e,i){function n(t){var e,i,n=o.extend(this);try{e=new window.ActiveXObject("htmlfile"),e.open(),e.write("<script>document.win = window<\/script>"),e.close(),i=e.win}catch(t){}if(!i){var s=this.iframe=document.createElement("iframe"),a=s.style;n.allowTransparency="true",n.frameBorder="0",a.backgroundColor="transparent",a.position="absolute",a.width=a.height="1px",a.left=a.top="-9999px",a.border=0,document.body.appendChild(s);try{i=s.contentWindow,e=i.document,e.open(),e.close()}catch(t){return n.fire("error"),void n.destroy()}}n.doc=e,n.win=i,n.$Loader={cleanup:function(){r((function(){n.$Loader.payload?n.fire("success",n.$Loader.payload):n.fire("error"),n.$Loader.payload=null,t||n.destroy()}))}},n.reusable=t}function s(t){return t&&t.replace(a,(function(t){return"&#"+t.charCodeAt(0)+";"}))}var o=i(0),r=i(17);n.prototype.setScope=function(t){this.scope=t};var a=/[&<>"']/g;n.prototype.load=function(t){if(/^(?:https?:)?\/\//i.test(t)){t=s(t);try{this.doc.open(),this.win.$Loader=this.$Loader,this.win.$Loader.scope=this.scope||{},this.doc.write('<html><head><script src="'+t+'"><\/script><script>document.addEventListener && document.addEventListener("DOMContentLoaded", function() {try { $Loader.cleanup() } catch(e) {}})<\/script></head><body></body></html>'),this.doc.close()}catch(t){this.$Loader.cleanup()}}else this.$Loader.cleanup()},n.prototype.destroy=function(){try{this.iframe&&document.body.removeChild(this.iframe),this.doc=this.win=this.iframe=this.win.$Loader=null}catch(t){}},t.exports=n},function(t,e,i){var n=i(4),s={};s.$Data=n,t.exports=s},function(t,e){function i(t,e){function i(){a=!a,t.apply(s,n)}var n,s,o,r,a=!0;return function(){if(n=Array.prototype.slice.call(arguments),s=this,a)return r=setTimeout((function(){a=!0}),e),i();r&&clearTimeout(r),o&&clearTimeout(o),o=setTimeout(i,e)}}function n(t,e){function i(){t.apply(s,n)}var n,s,o;return function(){o&&clearTimeout(o),n=Array.prototype.slice.call(arguments),s=this,o=setTimeout(i,e)}}function s(t,e){function i(){r=+new Date,o=null,t.apply(s,n)}var n,s,o,r=0;return function(){if(n=Array.prototype.slice.call(arguments),s=this,!o){var t=+new Date-r;t>=e?i():o=setTimeout(i,e-t)}}}function o(t,e){function i(){r=+new Date,n=s.length>1?setTimeout(i,e):null,t.apply(o.shift(),s.shift())}var n,s=[],o=[],r=0;return function(){if(s.push(Array.prototype.slice.call(arguments)),o.push(this),!n){var t=+new Date-r;t>=e?i():n=setTimeout(i,e-t)}}}var r={debounceExceptFirst:i,debounce:n,throttle:s,queue:o};t.exports=r},function(t,e){var i="[a-z0-9!#$%&'*+\\/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+\\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+([a-z0-9][a-z0-9-]*[a-z0-9])",n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)",s={email:new RegExp("^"+i+"$","i"),ip_token:new RegExp("^"+n+"$"),ip:new RegExp("^(?:"+n+"\\.){3}"+n+"$"),tld:/^(AERO|ARPA|ASIA|A[CDEFGILMNOQRSTUWXZ]|BIZ|B[ABDEFGHIJMNORSTVWYZ]|CAT|COM|COOP|C[ACDFGHIKLMNORUVXYZ]|D[EJKMOZ]|EDU|E[CEGRSTU]|F[IJKMOR]|GOV|G[ABDEFGHILMNPQRSTUWY]|H[KMNRTU]|INFO|INT|I[DELMNOQRST]|JOBS|J[EMOP]|K[EGHIMNPRWYZ]|L[ABCIKRSTUVY]||MIL|MOBI|MUSEUM|M[ACDEGHKLMNOPQRSTUVWXYZ]|NAME|NET|N[ACEFGILOPRUZ]|ORG|OM|PRO|P[AEFGHKLMNRSTWY]|QA|R[EOSUW]|S[ABCDEGHIJKLMNORTUVYZ]|TEL|TRAVEL|T[CDFGHJKLMNOPRTVWZ]|U[AGKSYZ]|V[ACEGINU]|W[FS]|XN|Y[ET]|Z[AMW])$/i,search:{email:new RegExp(i,"ig"),email_lws:new RegExp("(^|\\s+)"+i,"ig"),hurl:/(^|\s+)(?:(?:https?|ftps?):\/\/)(?:\S+)/gi,url:/(^|\s+)(?:[\w-]+\.)+(\w{2,})(?::[0-9]+)?(?:\/\S*)?/g,phone_number:/(?:^|\s+)(?:(?:\+?\d{1,3}|\(\d{1,3}\))([-.\s])?)?\d{3,10}(?:([-.\s])\d{3,10})?/gi},escape:function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}};t.exports=s},function(t,e){function i(t){return"number"==typeof t}t.exports=i},function(t,e,i){function n(t,e){t||o.log(e)}var s=i(5),o={ok:n,isFunction:function(t,e){n(s(t),e)},log:function(){}};t.exports=o},function(t,e){function i(t,e){c=t.$("connection"),l=e.$("tmp"),h=c.$("status$string"),p=c.$("socket_status$string"),f=c.$("disconnection_status$string"),m=c.$("socket_resume_timestamp$int"),g=c.$("socket_open_timestamp$int"),v=c.$("client_reattached_timestamp$int"),_=t.$("livechat").$("account").$("status$string"),b=t.$("visitor").$("auth_status$string"),c.bindValue(o)}function n(){c&&c.unbindValue(o)}function s(){n(),u=clearTimeout(u),c=l=null,h=p=f=m=g=v=_=b=null,d=void 0}function o(t){t&&"resume"==t.socket_status$string&&(u=setTimeout(o,1e3));var e=r();e&&e!==d&&(l.update({friendly_connection_status$string:e}),d=e)}function r(){var t=+new Date,e=h.getValue(),i=p.getValue(),n=f.getValue(),s=m.getValue(),o=g.getValue(),r=v.getValue();if((i||e||n)&&"disconnecting"!==n){if("break"==i){if(w.indexOf(e)>-1)return"closed";if("disconnected"===n)return"closed"}return(null===i||"reconnect"==i||"resume"==i&&t-s>=1e3)&&"reattached"===e&&o<=r?"connected":"connecting"}}function a(){var t=h.getValue(),e=_.getValue(),i=f.getValue(),n=b.getValue();return"banned"===e?"banned":"disconnected"===i?"failed"===n?"authentication_failed":"logged_out":"idle_disconnect"===t?"idle_disconnect":"error"===t||"shutdown"===t?"server_error":"unknown"}var c,l,u,d,h,p,f,m,g,v,_,b,w=["idle_disconnect","shutdown","error"],y={init:i,reset:s,destroy:n,getConnectionClosedReason:a};t.exports=y},function(t,e,i){function n(t,e){e=e||window,o=t.$("livechat").$("profile");var i={window:r.extend(e,!0),document:r.extend(e.document,!0)},n=a.throttle(s,l);i.document.on("mousemove",n),i.window.on("click",n),i.window.on("scroll",n),i.window.on("keypress",n),n()}function s(){o.write({active$int:+new Date})}var o,r=i(0),a=i(20),c={init:n},l=3e5;t.exports=c},function(t,e,i){var n=i(11),s={livechat:{timestamp$int:+new Date,settings:{file_sending:{enabled$bool:!0},behavior:{do_not_display$bool:!1},theme:{name$string:"simple",message_type$string:"bubble_avatar",colors:{placeholder$string:"_"},chat_button:{position$string:"br",position_mobile$string:"br"},chat_window:{position$string:"br",size$string:"medium",profile_card:{display_avatar$bool:!0,display_rating$bool:!0,display_title_name$bool:!0},use_banner$bool:!0,title_bar:{hide_minimize$bool:!1,hide_popout$bool:!1}},branding:{type$string:"icon_font_zopim"}},greetings:{online$string:n("Chat With Us"),offline$string:n("Leave a Message")},banner:{enabled$bool:!0,layout$string:"image_right",text$string:n("Chat with us"),image_path$string:"",image_data$string:""},chat_button:{hide_when_offline$bool:!1},chat_window:{mobile_mode$string:"popout",title_bar:{title$string:n("support"),status_messages:{online$string:n("We're online."),away$string:n("We're away."),offline$string:n("We're offline.")}}},login:{allowed_types:{email$bool:!0,facebook$bool:!0,twitter$bool:!1,google$bool:!0},phone_display$bool:!1,restrict_profile$bool:!1},concierge:{display_name$string:n("Live Support"),title$string:n("Ask us anything"),avatar_path$string:"",avatar_data$string:"",greeting:{enabled$bool:!1,message$string:n("Hi, welcome to our website!")}},branding:{hide_branding$bool:!1,hide_favicon$bool:!1,custom_favicon_path$string:""},language:{language$string:"--"},cookie_law:{enabled$bool:!1},sound:{disabled$bool:!1},popout:{enabled$bool:!0},rating:{enabled$bool:!0},end_chat_menu:{enabled$bool:!0,message$string:""},emoticons:{enabled$bool:!1},bubble:{enabled$bool:!0,title$string:n("Questions?"),text$string:n("Click here to chat with us")},forms:{pre_chat_form:{required$bool:!1,profile_required$bool:!1,message$string:"",form:{0:{name$string:"name",required$bool:0},1:{name$string:"email",required$bool:0},2:{label$string:n("Choose a department"),name$string:"department",required$bool:0,type$string:"department"},3:{label$string:n("Message"),name$string:"message",required$bool:0,type$string:"textarea"},4:{label$string:n("Phone"),name$string:"phone",required$bool:0,type$string:"text",hidden$bool:!0}}},offline_form:{message$string:n("Sorry, we aren't online at the moment. Leave a message and we'll get back to you."),message_disabled$string:n("Sorry, we aren't online at the moment."),post_submit_message$string:n("Thanks for the message! We'll get back to you as soon as we can."),profile_required$bool:!0,form:{0:{name$string:"name",required$bool:1},1:{name$string:"email",required$bool:1},2:{label$string:n("Message"),name$string:"message",required$bool:1,type$string:"textarea"},3:{label$string:n("Phone"),name$string:"phone",required$bool:0,type$string:"text",hidden$bool:!0}}},post_chat_form:{header$string:n("Nice chatting with you!"),message$string:n("How would you rate the chat experience you just had?"),comments_enabled$bool:!0,comments_messages:{good:{message$string:n("Thanks for the good rating! Would you like to leave a comment?"),placeholder$string:n("What did you like about this chat?")},bad:{message$string:n("Sorry that we disappointed you. We'd appreciate it if you could tell us how to improve."),placeholder$string:n("What did you dislike about this chat?")}}},card_form:{}}}}};t.exports=s},function(t,e){function i(t){"use strict";if(null==this)throw new TypeError;var e=Object(this),i=e.length>>>0;if(0===i)return-1;var n=0;if(arguments.length>0&&(n=Number(arguments[1]),n!=n?n=0:0!=n&&n!=1/0&&n!=-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=i)return-1;for(var s=n>=0?n:Math.max(i-Math.abs(n),0);s<i;s++)if(s in e&&e[s]===t)return s;return-1}function n(t,e,i){return s.call(e,t,i)}var s=Array.prototype.indexOf;"function"==typeof s&&/\[native code\]/.test(s.toString())||(s=i),t.exports=n},function(t,e,i){var n=i(11),s=i(27),o=i(1),r=n("File size too large. Maximum limit is <size>."),a=n("The file you are trying to send is not supported."),c=n("File sending is temporarily disabled. Please try again later."),l=n("<size> bytes"),u=n("<size> KB"),d=n("<size> MB"),h={ERR_SIZE:"TOO_LARGE",ERR_FORMAT:"ILLEGAL_TYPE",ERR_DISABLED:"FILE_UPLOADS_TEMPORARILY_DISABLED"},p=/^(x-|vnd\.)/i,f=["png","jpg","jpeg","gif","txt","pdf"],m={},g=n("Failed to send. Please try again.");m[h.ERR_SIZE]=r,m[h.ERR_FORMAT]=a,m[h.ERR_DISABLED]=c,h.prettySize=function(){var t=[l,u,d],e=[0,1,2];return function(i,n){i=Math.max(parseInt(i,10)||0,0),n=n||{};for(var s,o=n.base2?1024:1e3,r=t.length;r--;)if(s=Math.pow(o,r),i>=s)return t[r].replace("<size>",(i/s).toFixed(e[r]))}}(),h.prettyType=function(t,e,i){i=i||window.Infinity;var n=t.split("/")[1];return n=n&&n.replace(p,""),n&&n.length<i?n.toLowerCase():(n=e.split(".").pop(),(n||"").toLowerCase())},h.isValidType=function(t,e){if(t){e=e||f;var i=t.substr(t.lastIndexOf(".")+1).toLowerCase();return-1!==s(i,e)}},h.prettyError=function(t,e){var i=t in m?m[t]:g;return o(e)||(i=i.replace("<size>",h.prettySize(e||5e6))),i},h.blobToFile=function(t,e,i){return t.lastModifiedDate=new Date,t.name=e,new window.File([t],e,{type:i})},h.getExtension=function(t){var e=t.lastIndexOf(".");return-1===e?null:t.substr(e+1).toLowerCase()},t.exports=h},function(t,e,i){function n(t,e){h=t,p=e,h.$("livechat").$("channel").$("department_id$int").on("value",(function(t){t&&(f=t)}))}function s(){f=void 0}function o(t,e,i){var n=parseInt(e,10)||parseInt(p.getServerTime().toFixed(0),10),s=n+"",o=h.$("livechat").$("profile"),r=f,a=(t.msg||"")+"";"department"in t&&(r=t.department),h.$("livechat").$("channel").$("log").$(s).write({timestamp$int:n,type$string:"chat.msg",msg$string:a,nick$string:o.$("nick$string").getValue()||"",display_name$string:o.$("display_name$string").getValue()||"",department_id$int:r,unverified$bool:!0,__client$bool:!0},i)}function r(t,e){var i=parseInt(e,10)||parseInt(p.getServerTime().toFixed(0),10),n=i+"";return h.$("livechat").$("channel").$("log").$(n).write({timestamp$int:i,nick$string:h.$("livechat").$("profile").$("nick$string").getValue()||"",display_name$string:h.$("livechat").$("profile").$("display_name$string").getValue()||"",type$string:"chat.file.upload",file_name$string:t.file_name||"",file_type$string:t.file_type||"",file_size$int:t.file_size||0,unverified$bool:!0,__client$bool:!0}),i}function a(t,e){function i(t){return"ok"!==t.raw.__status?e(new window.Error(d(t.raw.error))):t.raw.data&&"chat.file"===t.raw.data.type?void e(null,y.pick(t.raw.data,["mime_type","name","size","url","metadata"])):e(new window.Error("INTERNAL_ERROR"))}var n=C._validateAndPrepareData([t]);if(e=v.once(e),m(n))g((function(){e(new window.Error(n))}));else{var s=p.registerCallback(i),o="https://"+n.host+_.CALLBACK_FILE_UPLOAD_PATH,r={ts:parseInt(p.getServerTime().toFixed(0),10),__messageID:s,__socketID:p.getSocketID()},a={"X-Zopim-MID":n.mid,"X-Zopim-UID":n.uid},c={error:function(){e(new window.Error("CONN_ERROR"))},load:function(){if(200!==this.status){var t;try{t=JSON.parse(this.responseText)}catch(t){}e(t&&t.error?new window.Error(d(t.error)):new window.Error("INTERNAL_ERROR"))}}};C._uploadFiles(n.form_data,o,r,a,c)}}function c(t,e){var i=C._validateAndPrepareData(t);if(m(i))return i;var n=r({file_name:i.name,file_type:i.type,file_size:i.size},e),s="https://"+i.host+_.FILE_UPLOAD_PATH,o={ts:n},a={"X-Zopim-MID":i.mid,"X-Zopim-UID":i.uid};C._uploadFiles(i.form_data,s,o,a)}function l(t){if(!window.FormData)return"NOT_SUPPORTED";var e=h.$("livechat"),i=e.$("settings").$("file_sending"),n=e.$("settings").$("package"),s=i.$("enabled$bool").getValue(),o=(i.$("allowed_extensions$string").getValue()||"").trim().replace(/\s*,\s*/g,",").split(","),r=n.$("color_customization_enabled$int").getValue()||n.$("widget_customization_enabled$int").getValue(),a=e.$("profile").$("mid$string").getValue(),c=e.$("profile").$("uid$string").getValue(),l=p.getHost(),u=new window.FormData,d=[],f=[],m=0;if(!l)return"CONN_ERROR";if(!r)return"INVALID_PLAN";if(!s)return"NOT_ALLOWED";for(var g=0,v=t.length;g<v;g++){if(!b.isValidType(t[g].name,o))return"INVALID_EXTENSION";d.push(t[g].name),f.push(t[g].type),m+=t[g].size||0,u.append("file_"+t[g].name,t[g])}return m>_.FILE_UPLOAD_MAX?"EXCEED_SIZE_LIMIT":{form_data:u,name:d.join(", "),type:f.join(", "),size:m,host:l,mid:a,uid:c}}function u(t,e,i,n,s){var o=new window.XMLHttpRequest,r=e+(Object.keys(i).length?"?"+w.buildQuery(i):"");if(o.upload){for(var a in o.open("POST",r,!0),n)Object.prototype.hasOwnProperty.call(n,a)&&o.setRequestHeader(a,n[a]);for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&o.addEventListener(c,s[c]);o.send(t)}}function d(t){return $[t]||"UNKNOWN_ERROR"}var h,p,f,m=i(12),g=i(17),v=i(9),_=i(3),b=i(28),w=i(8),y=i(6),k={NOT_SUPPORTED:"NOT_SUPPORTED",NOT_ALLOWED:"NOT_ALLOWED",CONN_ERROR:"CONN_ERROR",INVALID_EXTENSION:"INVALID_EXTENSION",INVALID_PLAN:"INVALID_PLAN",EXCEED_SIZE_LIMIT:"EXCEED_SIZE_LIMIT",INTERNAL_ERROR:"INTERNAL_ERROR",UNKNOWN_ERROR:"UNKNOWN_ERROR"},$={TOO_LARGE:"EXCEED_SIZE_LIMIT",ILLEGAL_TYPE:"INVALID_EXTENSION",NO_SESSION:"INTERNAL_ERROR",UNEXPECTED_ERROR:"INTERNAL_ERROR",UNABLE_TO_GET_SETTINGS:"INTERNAL_ERROR",S3_UPLOAD_ERROR:"INTERNAL_ERROR",NO_GATES:"INTERNAL_ERROR",FILE_UPLOADS_DISABLED:"NOT_ALLOWED",FILE_UPLOADS_TEMPORARILY_DISABLED:"INVALID_PLAN"},C={FILE_SENDING_ERRORS:k,init:n,sendChatMsg:o,sendFiles:c,sendFileWithCallback:a,clearChatDepartmentID:s,_validateAndPrepareData:l,_uploadFiles:u};t.exports=C},function(t,e){var i={SECOND:1e3};i.MINUTE=60*i.SECOND,i.HOUR=60*i.MINUTE,i.DAY=24*i.HOUR,i.WEEK=7*i.DAY,t.exports=i},function(t,e,i){function n(t){var e=this,i=this.longpoll=new r(!0),n=this.sender=new r(!0);i.on("success",(function(t){e.process_data(t)})),i.on("error",(function(){e.abort("longpoll error")})),n.on("success",(function(){e.ondrain&&e.ondrain()})),n.on("error",(function(){e.abort("sender error")})),this.url="https://"+t,s.window.on("unload",this.unload=function(){e.abort("unload")}),this.longpoll.load(this.url+["c",+new Date].join("/"))}var s=i(0),o=n;n.protocol="xdds";var r=i(18);n.prototype.process_data=function(t){t&&!this._abort&&(!this.ts&&this.onopen&&this.onopen(),this.ts=+new Date,this.onmessage&&this.onmessage(t,this.ts),this.longpoll&&this.longpoll.load(this.url+["p",+new Date].join("/")))},n.prototype.send=function(t){if(this._abort)return!1;var e=this.url+["d",+new Date,window.encodeURIComponent(t)].join("/");return this.sender&&this.sender.load(e),!1},n.prototype.abort=function(t){this._abort||(this._abort=!0,a("XDDS - abort: "+t),s.window.un("unload",this.unload),this.longpoll.destroy(),this.sender.destroy(),this.longpoll=this.sender=this.unload=null,this.onclose&&this.onclose(t),window.CollectGarbage&&window.CollectGarbage())};var a=function(){};t.exports=o},function(t,e){function i(t){var e,i=this;try{e=new n("wss://"+t+["c",+new Date].join("/"))}catch(t){}e&&(e.onclose=function(t){i.onclose&&i.onclose(t)},e.onerror=function(t){i.onerror&&i.onerror(t)},e.onmessage=function(t){i.onmessage&&i.onmessage(t.data,+new Date)},e.onopen=function(t){i.onopen&&i.onopen(t)},this.ws=e)}var n=window.WebSocket||window.MozWebSocket,s=n?i:null;i.prototype.abort=function(){if(this.ws&&!this._aborted){this._aborted=!0;var t=this.ws;t.readyState==n.CONNECTING?t.onopen=function(){t.close()}:t.close()}},i.prototype.send=function(t){return this.ws&&this.ws.send(t),!0},i.protocol="ws",t.exports=s},function(t,e,i){function n(t){function e(t){!o&&r.onopen&&r.onopen(),o=+new Date,t.origin==n&&("event-stream"==t.data?c.onload=null:r.onmessage&&r.onmessage(t.data,o))}var i,n,o,r=this,c=this.iframe=s("iframe");this.url="https://"+t,c.src=this.src=i=this.url+["c",+new Date].join("/"),n=i.match(/https?:\/\/[^\/]+/)[0],c.onload=function(t){r.abort(t)},document.body.insertBefore(c,document.body.firstChild),a("SPM connecting to: "+this.url),window.addEventListener("message",e,!1),this.remove_listeners=function(){window.removeEventListener("message",e,!1)}}function s(t){var e=document.createElement(t),i=e.style;return i.position="absolute",i.width=i.height=0,i.overflow="hidden",e}var o=i(2),r=window.postMessage?!o.isAndroid&&n:null;n.protocol="spm",n.prototype.send=function(t){return this.iframe.contentWindow.postMessage(t,this.src),!0},n.prototype.abort=function(t){this._abort||(this._abort=!0,a(t),this.iframe&&document.body.removeChild(this.iframe),this.onclose&&this.onclose(t),this.remove_listeners(),this.iframe=this.remove_listeners=null)};var a=function(){};t.exports=r},function(t,e,i){function n(t){function e(t){c("extracting data"),!i&&r.onopen&&r.onopen(),i=t,l+=n.responseText.substr(u),u=n.responseText.length,l=l.split("\n\n");for(var e=0;e<l.length-1;e++)r.onmessage&&r.onmessage(l[e],i);l=l[l.length-1],(u>1048576&&!l.length||u>4194304)&&r.abort()}var i,n=this.xhr=new o,r=this,l="",u=0;this.url=a+t,n.open("GET",this.url+["c",+new Date].join("/"),!0),n.onerror=function(t){r.abort(t)},s.isIE?(n.onprogress=function(){e(+new Date)},n.onload=function(){r.abort("close")}):n.onreadystatechange=function(){switch(n.readyState){case 3:e(+new Date);break;case 4:r.abort("close")}},c("CXHR connecting to: "+this.url),n.send()}var s=i(2),o=s.isIE?window.XDomainRequest:!s.isOpera&&!s.isAndroid&&window.XMLHttpRequest,r=o?n:null,a=s.isIE?"//":"https://";n.protocol="cxhr",n.prototype.send=function(t){function e(){c.abort("send failed")}function i(){c.xhr_sender=null,clearTimeout(n),c.ondrain&&c.ondrain()}var n,r=this.url+["d",+new Date].join("/"),a=new o,c=this;return a.open("POST",r,!0),a.send(t),s.isIE?(a.onerror=e,a.onload=i):a.onreadystatechange=function(){4==a.readyState&&(200!=a.status&&e(),i())},n=setTimeout(e,5e3),this.xhr_sender=a,!1},n.prototype.abort=function(t){this._abort||(this._abort=!0,c(t),this.xhr&&this.xhr.abort(),this.xhr_sender&&this.xhr_sender.abort(),this.onclose&&this.onclose(t),this.onerror=this.onload=this.onprogress=this.onreadystatechange=this.xhr=this.xhr_sender=null)};var c=function(){};t.exports=r},function(t,e,i){function n(t,e,i,s){for(var o in this.options=s=s||{},v)o in s||(s[o]=v[o]);if(!m&&!s.PREFERRED_PROVIDER)throw"No available transports";l.extend(this),this.provider=s.PREFERRED_PROVIDER||m,this.id=i||n.generateID(),this.host=t,this.ns=e,this.path="/"+["s",this.ns,this.provider.protocol,this.id].join("/"),this.url=this.host+this.path+"/",this.status=window.navigator&&!1===window.navigator.onLine?"offline":"connecting",this.connected=!1,this.quality=0,this.rtt=s.INITIAL_RTT,this.clock_skew=0,this.connect_attempts=0,this.connections=0,this.disconnects=0,this.sent_bytes=0,this.recv_bytes=0,this.sent_messages=0,this.recv_messages=0,this.sent_frames=0,this.recv_frames=0,this.lost_frames=0,this.ooo_frames=0,this.remote_seq=0,this.local_seq=0,this.timeout_server=0,this.timeout_response_soft=0,this.timeout_response_hard=0,this.bytes_at_connect=-1,this.time_last_alive=-1,this.time_last_open=-1,this.starttime=Date.now(),this.uptime=0,this.connected_time=new a,this.idle_time=new a,this.last_frame_time=0,this.raw_clock_skew=0,this.smooth_skewed_transit_time_in=0,this.remote_smooth_skewed_transit_time_out=0,this.cur_conn_recv_messages=0,this.drained=!0,this.buffer=[],this.glitch_timer=this.reconnect_timer=null,this.reconnect_delay=s.RECONNECT_DELAY_MS*(.2*Math.random()+.8),this.keep_alive_interval=15e3,this.data_packet_queue=new c(this);var r=this;this.onoffline=function(){n.prototype.onoffline.call(r)},this.ononline=function(){n.prototype.ononline.call(r)},l.window.on("offline",this.onoffline),l.window.on("online",this.ononline),"connecting"===this.status&&this.connect()}function s(){var t=w,e=new Date,i=e.getUTCFullYear()-2e3,n=e.getUTCMonth()+1,s=e.getUTCDate(),o=e.getUTCHours(),r=e.getUTCMinutes(),a=e.getUTCSeconds(),c=e.getUTCMilliseconds();return t[i]+t[n]+t[s]+t[o]+t[r]+t[a]+t[c>>6]+t[63&c]}function o(t){for(var e="",i=w;t-- >0;)e+=i.charAt(Math.floor(Math.random()*i.length));return e}function r(t,e,i){return Math.min(i,Math.max(e,t))}function a(){this.count=0,this.sum=0,this.sq_sum=0,this.mean=0,this.stddev=0}function c(t){this.socket=t,this.queue=[],this.curFrame=null,this.curIdx=0,this.last_work_finished_time=0,this.work_timer=null,this.processing=!1}var l=i(0),u=i(10),d=i(34),h=i(33),p=i(32),f=i(31),m=p||d||h||f,g=f,v={INITIAL_RTT:1e3,RECONNECT_DELAY_MS:3e4,FAST_RECONNECT_MS:100,FLUSH_DELAY_MS:75,MAX_BLOCKING_TIME_MS:40,MAX_NO_WORK_TIME_MS:15,PREFERRED_PROVIDER:void 0};n.providers={},[d,h,p,f].forEach((function(t){t&&(n.providers[t.protocol]=t)})),n.available=function(){return!!m},n.generateID=function(){return o(16)},n.prototype.connect=function(t){if(this.debug("connect("+(t?"glitch":"")+")"),!this.reconnect_timer){var e=this,i=this.options,n=!this.connections||!this.cur_conn_recv_messages;!i.PREFERRED_PROVIDER&&n&&(this.provider=1&this.connect_attempts?g:m),this.response_timer=clearTimeout(this.response_timer),this.timeout_timer=clearTimeout(this.timeout_timer),this.socket&&(this.socket.onclose=this.socket.ondrain=this.socket.onerror=this.socket.onmessage=this.socket.onopen=null,this.socket.abort("connect"),this.socket=null),this.connected=!1,this.cur_conn_recv_messages=0,t&&(this.reconnect_delay=i.RECONNECT_DELAY_MS*(.2*Math.random()+.9),this.glitch_timer=setTimeout((function(){e.quality=0,e.glitch_timer=setTimeout((function(){e.status="reconnecting",e.fire_break()}),r(3*e.rtt,1e3,5e3))}),r(3*this.rtt,1e3,5e3))),this.debug("reconnect_delay: "+this.reconnect_delay),clearTimeout(this.reconnect_timer),this.reconnect_timer=setTimeout((function(){e.reconnect_timer=null,e.reconnect_delay=Math.min(1.4*e.reconnect_delay+1e3,6e4),e.reconnect_delay*=.2*Math.random()+.9,e.connect()}),this.reconnect_delay),this.path="/"+["s",this.ns,this.provider.protocol,this.id].join("/"),this.url=this.host+this.path+"/",this.debug("connecting: "+this.url),this.socket=new this.provider(this.url),this.transport=this.provider.protocol,this.connect_attempts++,this.socket.onopen=function(){e.status="connected",e.glitch_timer=clearTimeout(e.glitch_timer),e.reconnect_timer=clearTimeout(e.reconnect_timer),e.connections++,e.drained=!0,e.connected=!0,e.time_last_open=e.time_last_alive=Date.now(),e.uptime>=0&&(e.uptime-=e.time_last_open),1==e.connections?e.fire("open"):e.fire_resume(),e.flush(),e.keep_alive(),e.debug("connected"),-1==e.bytes_at_connect&&setTimeout((function(){e.bytes_at_connect=e.recv_bytes}),50)},this.socket.onmessage=function(t,i){e.onmessage(t,i)},this.socket.onclose=function(t){e._onclose(t)},this.socket.ondrain=function(t){e._ondrain(t)},this.socket.onerror=function(t){e._onerror(t)}}},n.prototype.reconnect=function(){this.reconnect_timer=clearTimeout(this.reconnect_timer),this.broken_reason="FORCED_RECONNECT",this.connect()},n.prototype.send=function(t,e){"disconnected"!=this.status&&("null"==this.buffer[0]&&(this.buffer=[]),this.buffer.push(u.stringify(t)),this.schedule_flush(),e&&this.response_timeout())},n.prototype.close=function(t){this.debug("close()"),this.flush_scheduled=clearTimeout(this.flush_scheduled),this.keep_alive_timer=clearTimeout(this.keep_alive_timer),this.reconnect_timer=clearTimeout(this.reconnect_timer),this.response_timer=clearTimeout(this.response_timer),this.timeout_timer=clearTimeout(this.timeout_timer),this.broken_reason||(this.broken_reason="CLOSE"),this.fire_break(),this.status=t?"reconnecting":"disconnected",this.connected=!1,this.quality=0,this.socket&&(this.socket.onclose=this.socket.ondrain=this.socket.onerror=this.socket.onmessage=this.socket.onopen=null,this.socket.abort("close"),this.socket=null,t||(l.window.un("offline",this.onoffline),l.window.un("online",this.ononline)))},n.prototype.hibernate=function(){},n.prototype.onoffline=function(){this.debug("onoffline"),this.broken_reason="OFFLINE",this.close(!0)},n.prototype.ononline=function(){this.debug("ononline"),"disconnected"==this.status||this.connected||(this.reconnect_timer=clearTimeout(this.reconnect_timer),this.connect())},n.prototype.schedule_flush=function(){if("disconnected"!=this.status&&!this.flush_scheduled&&this.drained&&this.connected){var t=this,e=this.options;this.flush_scheduled=setTimeout((function(){t.flush()}),e.FLUSH_DELAY_MS)}},n.prototype.flush=function(){if("disconnected"!=this.status&&this.buffer.length&&this.drained&&this.connected){var t=this.buffer;this.sent_messages+=t.length,this.sent_frames++,t=this.generate_frame(t.join("\n")),this.drained=this.socket.send(t),this.sent_bytes+=t.length,this.flush_scheduled=clearTimeout(this.flush_scheduled),this.buffer=[],this.keep_alive(),this.time_last_alive=Date.now()}},n.prototype.keep_alive=function(){if("disconnected"!=this.status){clearTimeout(this.keep_alive_timer);var t=this;this.keep_alive_timer=setTimeout((function(){t.debug("pong!"),t.send(null)}),this.keep_alive_interval)}},n.prototype.response_timeout=function(){if(!this.response_timer){var t=this,e=r(4*this.rtt+this.options.FLUSH_DELAY_MS,2e3,2e4);this.response_timer=setTimeout((function(){t.timeout_response_soft++,t.debug("response timeout, "+e+"ms"),t.fire_break("SOFT_RESPONSE_TIMEOUT"),t.response_timer=setTimeout((function(){t.timeout_response_hard++,t.debug("response timeout - reconnecting"),t.broken_reason="HARD_RESPONSE_TIMEOUT",t.connect(!0)}),2*e)}),e)}},n.prototype.reset_server_timeout=function(){clearTimeout(this.timeout_timer);var t=this,e=4*this.keep_alive_interval+r(4*t.rtt,2e3,2e4);this.timeout_timer=setTimeout((function(){t.timeout_server++,t.debug("server "+e+"ms timeout, reconnecting"),t.broken_reason="SERVER_TIMEOUT",t.connect(!0)}),e)},n.prototype.fire_break=function(t){this.broken||this.fire("break",t||this.broken_reason),this.broken=!0,this.broken_reason="",this.uptime<0&&(this.uptime+=Date.now())},n.prototype.fire_resume=function(){this.broken_reason="",this.broken&&this.fire("resume"),this.broken=!1,this.uptime>=0&&(this.uptime-=Date.now())},n.prototype.onmessage=function(t,e){if(this.recv_bytes+=t.length,t=t.split("\n"),t.length<6)this.debug("Bad data: "+t.join("\n"));else{var i=Date.now(),n=+t[0],s=+t[1],o=+t[2],r=(t[3],t[4]);switch(this.calculate_clocks(e||Date.now(),n,s),this.reset_server_timeout(),r){case"a":this.broken_reason="ABORT",this.close();break;case"d":this.response_timer=clearTimeout(this.response_timer),this.fire_resume(),this.check_sequence(o),this.data_packet_queue.queueFrame(t,5,i);break;case"e":this.debug("server: Are you still there?"),this.send(null),this.flush();break;case"n":this.remote_seq=o,this.keep_alive_interval=+t[5]||15e3,this.debug("keep_alive is "+this.keep_alive_interval+"ms"),this.reset_server_timeout(),this.connections>1&&this.fire("reopen");break;case"p":this.debug("ping!")}}},n.prototype._onclose=function(){var t=this,e=this.options;0==this.connections&&0==this.disconnects&&this.fire("close"),this.debug("_onclose"),this.disconnects++,this.broken_reason="HANGUP",this.connected?(clearTimeout(this.reconnect_timer),this.reconnect_timer=setTimeout((function(){t.reconnect_timer=null,t.connect(!0)}),e.FAST_RECONNECT_MS)):this.connections||1!=this.connect_attempts||(clearTimeout(this.reconnect_timer),this.reconnect_timer=setTimeout((function(){t.reconnect_timer=null,t.connect()}),0)),this.connected=!1,clearTimeout(this.keep_alive_timer),this.time_last_alive>0&&this.idle_time.add(Date.now()-this.time_last_alive),this.time_last_open>0&&this.connected_time.add(Date.now()-this.time_last_open),this.time_last_alive=this.time_last_open=-1,this.uptime<0&&(this.uptime+=Date.now())},n.prototype._ondrain=function(){this.drained=!0,this.flush()},n.prototype._onerror=function(t){this.debug("_error"),this.fire("error",t)},n.prototype.generate_frame=function(t,e){return[Date.now(),this.smooth_skewed_transit_time_in,++this.local_seq,this.remote_seq,e||"d",t].join("\n")};var _=Math.pow(50,.1),b=Math.pow(1e3,.1)-_;n.prototype.calculate_clocks=function(t,e,i){var n=t-e,s=Math.max(0,t-this.last_frame_time),o=1/(s/45e3+1);this.smooth_skewed_transit_time_in?this.smooth_skewed_transit_time_in=o*this.smooth_skewed_transit_time_in+(1-o)*n:this.smooth_skewed_transit_time_in=n,this.remote_smooth_skewed_transit_time_out=i,this.smooth_skewed_transit_time_in&&this.remote_smooth_skewed_transit_time_out&&(this.rtt=this.smooth_skewed_transit_time_in+this.remote_smooth_skewed_transit_time_out,this.quality=~~(100*(1-(Math.pow(this.rtt,.1)-_)/b)),this.quality=Math.min(100,Math.max(0,this.quality)),this.raw_clock_skew=n-this.rtt/2,this.clock_skew?this.clock_skew=.9*this.clock_skew+.1*this.raw_clock_skew:this.clock_skew=this.raw_clock_skew),this.time_last_alive=this.last_frame_time=t},n.prototype.check_sequence=function(t){if(this.remote_seq+1==t)this.remote_seq=t;else if(this.remote_seq<t){var e=t-this.remote_seq+1;this.lost_frames+=e,this.fire("lost",e),this.remote_seq=t}else this.ooo_frames++,this.fire("out_of_order")},m&&(n.prototype.transport=m.protocol),n.prototype.debug=function(){};var w="+-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";n.genDate=s,n.genID=o,a.prototype.add=function(t){this.count++,this.sum+=t,this.sq_sum+=t*t,this.mean=this.sum/this.count,this.stddev=Math.sqrt(this.sq_sum/this.count-this.mean*this.mean)};var y=c.prototype;y.queueFrame=function(t,e,i){this.queue.push({msgs:t,start_idx:e,receive_time:i}),this.process()},y.process=function(){var t=Date.now()-this.last_work_finished_time;this.processing&&t<this.socket.options.MAX_NO_WORK_TIME_MS||(this.work_timer=window.clearTimeout(this.work_timer),this.processing=!0,this.work())},y.work=function(){for(var t,e,i,n=Date.now()+this.socket.options.MAX_BLOCKING_TIME_MS,s=!1,o=this.socket.recv_frames,r=this,a=0;a<this.queue.length;a++){t=this.queue[a],"start_time"in t||(t.start_time=Date.now(),t.ticks=0,t.idx=t.start_idx),t.ticks++,e=t.msgs,i=e.length;for(;t.idx<i;){var c,l=Date.now();if(l>n){s=!0;break}this.socket.dispatch_delay=l-t.receive_time;try{c=u.parse(e[t.idx]),t.idx++}catch(i){this.socket.debug("Invalid json message: "+e[t.idx]);continue}this.socket.fire("message",c),this.socket.recv_messages++,this.socket.cur_conn_recv_messages++}if(t.idx>=i&&this.socket.recv_frames++,s)break}this.queue.splice(0,this.socket.recv_frames-o),this.queue.length?this.work_timer=window.setTimeout((function(){r.work()}),0):this.processing=!1,this.last_work_finished_time=Date.now()},t.exports=n},function(t,e){function i(t){return Date.now()-(t?t.clock_skew:0)}function n(t){return t?{connect_attempts:t.connect_attempts,connections:t.connections,disconnects:t.disconnects,timeout_server:t.timeout_server,timeout_response_soft:t.timeout_response_soft,timeout_response_hard:t.timeout_response_hard,sent_bytes:t.sent_bytes,recv_bytes:t.recv_bytes,sent_messages:t.sent_messages,recv_messages:t.recv_messages,sent_frames:t.sent_frames,recv_frames:t.recv_frames,lost_frames:t.lost_frames,ooo_frames:t.ooo_frames,bytes_at_connect:t.bytes_at_connect,rtt:t.rtt,clock_skew:t.clock_skew,reconnect_delay:t.reconnect_delay,quality:t.quality,host:t.host,status:t.status,last_frame_time:t.last_frame_time,local_time:Date.now()}:{status:"not connected"}}var s={getServerTime:i,getConnectionStats:n};t.exports=s},function(t,e,i){function n(t){return function(){try{var e=Array.prototype.slice.call(arguments,0);e.unshift(o),d.appendChild(o),o.addBehavior("#default#userData"),o.load(u);var i=t.apply(a,e);return d.removeChild(o),i}catch(t){}}}function s(t){return t.replace(p,"___")}var o,r=i(10),a={},c=window,l=c.document,u="localStorage";if(a.disabled=!1,a.set=function(){},a.get=function(){},a.remove=function(){},a.clear=function(){},a.transact=function(t,e,i){var n=a.get(t);null==i&&(i=e,e=null),void 0===n&&(n=e||{}),i(n),a.set(t,n)},a.getAll=function(){},a.serialize=function(t){return r.stringify(t)},a.deserialize=function(t){if("string"==typeof t)try{return r.parse(t)}catch(e){return t||void 0}},function(){try{return u in c&&c[u]}catch(t){return!1}}())o=c[u],a.set=function(t,e){return void 0===e?a.remove(t):(o.setItem(t,a.serialize(e)),e)},a.get=function(t){return a.deserialize(o.getItem(t))},a.remove=function(t){o.removeItem(t)},a.clear=function(){o.clear()},a.getAll=function(){for(var t={},e=0;e<o.length;++e){var i=o.key(e);t[i]=a.get(i)}return t};else if(l.documentElement.addBehavior){var d,h;try{h=new window.ActiveXObject("htmlfile"),h.open(),h.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></frame>'),h.close(),d=h.w.frames[0].document,o=d.createElement("div")}catch(t){o=l.createElement("div"),d=l.body}var p=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");a.set=n((function(t,e,i){return e=s(e),void 0===i?a.remove(e):(t.setAttribute(e,a.serialize(i)),t.save(u),i)})),a.get=n((function(t,e){return e=s(e),a.deserialize(t.getAttribute(e))})),a.remove=n((function(t,e){e=s(e),t.removeAttribute(e),t.save(u)})),a.clear=n((function(t){var e=t.XMLDocument.documentElement.attributes;t.load(u);for(var i,n=0;i=e[n];n++)t.removeAttribute(i.name);t.save(u)})),a.getAll=n((function(t){for(var e,i=t.XMLDocument.documentElement.attributes,n={},o=0;e=i[o];++o){var r=s(e.name);n[e.name]=a.deserialize(t.getAttribute(r))}return n}))}try{a.set("__storejs__","__storejs__"),"__storejs__"!=a.get("__storejs__")&&(a.disabled=!0),a.remove("__storejs__")}catch(t){a.disabled=!0}a.enabled=!a.disabled;var f=a;t.exports=f},function(t,e){function i(t){return!!t&&"false"!=t}t.exports=i},function(t,e,i){function n(t){nt=t.isCookieDenied,Q=ht.getMediatorHost(t.overrideProxy),st=t.source,ot=t.source_ver,rt=t.gd_compatible,W=t.activity_window||window,K=W.document,B=t.root,Y=B.$("tmp").$("api_settings"),J=B.$("tmp").$("server_settings"),X=B.$("livechat").$("settings").$("cached$bool"),F=B.$("connection"),Z=F.$("server_retired$bool"),et=F.$("server_ready$bool"),et.bindValue(c),Z.bindValue(a),G=B.$("livechat").$("ui").$("mockup$bool").getValue(),G?F.$("status$string").update("reattached"):(B.$("livechat").$("profile").bindValue(r),F.$("status$string").bindValue(o),F.$("socket_status$string").bindValue(O),B.bindWrite(P),F.$("reconnect$bool").bindValue(g),window.__z_sdk?U=!0:(U=!1,"visibilityState"in document&&"prerender"==document.visibilityState?document.addEventListener("visibilitychange",s):xt.connect()))}function s(){"prerender"!=document.visibilityState&&(document.removeEventListener("visibilitychange",s),xt.connect())}function o(t){if(wt="reattached"==t,wt&&(F.update({client_reattached_timestamp$int:+new Date}),P()),wt&&!1===U&&A(),"idle_disconnect"==t||"shutdown"==t||"error"==t){var e=B.$("livechat").$("account").$("status$string").getValue(),i=B.$("connection").$("backoff"),n=i.$("active$int").getValue()||0,s=i.$("max_seconds$int").getValue();"invalid_account_key"==e?mt.warnBadEmbed():"widget_v2"==st&&"shutdown"==t&&n&&s&&f(s),h()}O()}function r(t){t&&(nt()||ht.IS_POPOUT||t.mid$string&&pt.setIdentity(t.mid$string))}function a(t){tt=!0===t}function c(t){it=!1!==t,it&&($t=!1,l())}function l(){for(var t=0,e=kt.length;t<e;t++){var i=kt[t];ct(i)&&i()}kt=[]}function u(t){!it||tt?(F.update({server_ready$bool:!1}),kt.push(t),$t||($t=!0,H.reconnect())):t()}function d(t){H&&H.send(t)}function h(t){H&&H.close(),z=!t,H=null}function p(){window.clearTimeout(xt.reconnectTimer),h(!0),xt.connect()}function f(t){window.clearTimeout(xt.reconnectTimer),xt.reconnectTimer=window.setTimeout((function(){xt.reconnect()}),1e3*t)}function m(){F.update({status$string:"idle_disconnect"})}function g(t){t&&xt.reconnect()}function v(t){return at||new vt(t,"W",null,bt)}function _(){H||z||(H=v(Q),H.on("break",y),H.on("message",w),H.on("reopen",$),H.on("resume",k),H.on("open",b))}function b(){G||(F.update({socket_open_timestamp$int:+new Date,socket_status$string:null,disconnection_status$string:null}),E())}function w(t){if(t){if(t.raw&&t.raw.__messageID in Et){var e=Et[t.raw.__messageID];delete Et[t.raw.__messageID],e(t)}var i=B;if("update"in t){var n=mt.getValueByReference(t,"livechat.account");n&&(J.$("account").update(n),mt.fullyExtend(n,Y.getValue("account")));var s=mt.getValueByReference(t,"livechat.settings");s&&(J.$("settings").update(s),mt.fullyExtend(s,Y.getValue("settings")));var o=mt.getValueByReference(t,"livechat.profile.mid$string");o&&o!==pt.getIdentity()&&(B.$("livechat").$("channel").update(null),B.$("livechat").$("profile").update(null),B.$("livechat").$("ui").$("chat_button").$("unread_count$int").update(0)),t.path&&(i=i.descend(t.path)),i.update(t.update),xt.fire("message",t)}}}function y(){F.update({socket_status$string:"break"})}function k(){F.update({socket_resume_timestamp$int:+new Date,socket_status$string:"resume"})}function $(){F.update({socket_open_timestamp$int:+new Date,socket_status$string:"reconnect"}),wt=!1,E()}function C(){var t=pt.getIdentity(),e=nt(),i=B.$("livechat").$("ui").getValue("mobile$bool")?"mobile":"desktop",n=B.$("livechat").$("settings").$("theme").getValue("name$string"),s={__type:"register",accountKey:ht.ACCOUNT_KEY,mID:t,ua:W.navigator.userAgent,dt:i,theme:n,cookie_law:e,rev:lt.git_commit,source:st,source_ver:ot,country_code:ht.COUNTRY_CODE,multisession:!0,gd_compatible:rt};B.$("livechat").$("ui").$("popout$bool").getValue()?s.popout=!0:(s.title=K.title,s.url=W.location.href,s.ref=W.document.referrer);var o=xt._register;if(o)for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(s[r]=o[r]);return s}function E(){if(ht.ACCOUNT_KEY){var t=C();ft.retrieveIDToken((function(e,i){e?V():(i&&(delete t.mID,t.idt=i),d(t))}))}}function x(){return!!X.getValue()}function O(){var t=F.getValue("status$string"),e=F.getValue("socket_status$string");if(window.clearTimeout(T.timer),"error"!=t)if("break"==e)"idle_disconnect"==t?F.update({message$string:"idle_disconnect"}):(F.update({message$string:"reconnecting"}),T.timer=window.setTimeout(T,6e4));else if(null===e&&"registered"==t)F.update({message$string:"resuming"});else if(ut(t)&&ut(e)){var i=x()?"fast_init":"first_init";F.update({message$string:i})}else F.update({message$string:null});else T.timer=window.setTimeout(T,5e3)}function A(){H&&B.$("livechat").$("profile").write({disconnect_timeout$int:N(H.rtt)})}function T(){F.update({message$string:"disconnected"})}function L(){return gt.getConnectionStats(H)}function I(){return Q}function S(){return gt.getServerTime(H)}function D(t){return Ct+=1,Et[Ct]=t,Ct}function P(t){if(t){var e={};e.path=t.path,e.value=t.value,ct(t.func)&&(e.__messageID=D(t.func)),yt.push(e)}if(H&&wt)for(;yt.length;)H.send(yt.shift())}function R(t){return t?J.getValue(t):J.getValue()}function N(t){var e,i,n=10*_t.SECOND,s=1*_t.SECOND,o=120*_t.SECOND,r=20*_t.SECOND;return t=Math.round(t)||0,t=Math.max(s,Math.min(t,n)),e=(t-s)/(n-s),i=r+function(t){return t}(e)*(o-r),Math.floor(i/1e3)}function q(t){at=t}function j(){return H?H.id:null}function V(){F.update({disconnection_status$string:"disconnecting"}),h(),T.timer=clearTimeout(T.timer),F.update({disconnection_status$string:"disconnected"})}function M(){et.unbindValue(c),Z.unbindValue(a),B.$("livechat").$("profile").unbindValue(r),F.$("status$string").unbindValue(o),F.$("socket_status$string").unbindValue(O),F.$("reconnect$bool").unbindValue(g),V(),wt=!1,yt=[],kt=[],$t=!1,Ct=0,Et={},U=z=B=F=H=G=Y=J=X=Z=tt=et=it=nt=st=ot=rt=at=null}var U,z,W,K,B,F,H,Q,G,Y,J,X,Z,tt,et,it,nt,st,ot,rt,at,ct=i(5),lt=i(4),ut=i(1),dt=i(0),ht=i(3),pt=i(14),ft=i(13),mt=i(6),gt=i(36),vt=i(35),_t=i(30),bt={FLUSH_DELAY_MS:0,RECONNECT_DELAY_MS:1e4},wt=!1,yt=[],kt=[],$t=!1,Ct=0,Et={},xt=dt.extend({init:n,send:d,connect:_,reconnect:p,clientDisconnect:V,destroy:M,disconnect:m,getConnectionStats:L,getHost:I,getServerTime:S,getServerSettings:R,reconnectIfServerRetired:u,registerCallback:D,getSocketID:j,getDCTimeoutValue:N,setSocket:q,reset:M});t.exports=xt},function(t,e,i){function n(t){var e=t.type,i=l[e];if(!i)return e?new Error(e+" type is not supported. Please upgrade the Web SDK version."):new Error('Structured message object should contain "type" property');var n=i(t);if(n){var s=n.paths&&"type"===n.paths.pop(),o=s&&n.actual?n.actual+" type is not supported. Please upgrade the Web SDK version.":n.message;return new Error(o)}}var s=i(15),o={QUICK_REPLIES:"QUICK_REPLIES",BUTTON_TEMPLATE:"BUTTON_TEMPLATE",PANEL_TEMPLATE:"PANEL_TEMPLATE",PANEL_TEMPLATE_CAROUSEL:"PANEL_TEMPLATE_CAROUSEL",LIST_TEMPLATE:"LIST_TEMPLATE"},r={QUICK_REPLY_ACTION:"QUICK_REPLY_ACTION",LINK_ACTION:"LINK_ACTION"},a=s.obj({text:s.type("string"),action:s.obj({type:s.any([s.equal(r.QUICK_REPLY_ACTION),s.equal(r.LINK_ACTION)]),value:s.type("string")},{requiredKeys:["type","value"],whitelistedKeysOnly:!0})},{requiredKeys:["text","action"],whitelistedKeysOnly:!0}),c=s.obj({type:s.equal(o.PANEL_TEMPLATE),panel:s.obj({heading:s.type("string"),paragraph:s.type("string"),image_url:s.type("string"),action:s.obj({type:s.equal(r.LINK_ACTION),value:s.type("string")},{requiredKeys:["type","value"],whitelistedKeysOnly:!0})},{requiredKeys:["heading"],whitelistedKeysOnly:!0}),buttons:s.each(a)},{requiredKeys:["type","panel"],whitelistedKeysOnly:!0}),l={QUICK_REPLIES:s.obj({type:s.equal(o.QUICK_REPLIES),msg:s.type("string"),quick_replies:s.each(s.obj({text:s.type("string"),action:s.obj({type:s.equal(r.QUICK_REPLY_ACTION),value:s.type("string")},{requiredKeys:["type","value"],whitelistedKeysOnly:!0})},{requiredKeys:["text","action"],whitelistedKeysOnly:!0}))},{requiredKeys:["type","msg","quick_replies"],whitelistedKeysOnly:!0}),BUTTON_TEMPLATE:s.obj({type:s.equal(o.BUTTON_TEMPLATE),msg:s.type("string"),buttons:s.each(a)},{requiredKeys:["type","msg","buttons"],whitelistedKeysOnly:!0}),PANEL_TEMPLATE:c,PANEL_TEMPLATE_CAROUSEL:s.obj({type:s.equal(o.PANEL_TEMPLATE_CAROUSEL),items:s.each(c).minLength(2).maxLength(10)},{requiredKeys:["type","items"],whitelistedKeysOnly:!0}),LIST_TEMPLATE:s.obj({type:s.equal(o.LIST_TEMPLATE),items:s.each(s.obj({heading:s.type("string"),paragraph:s.type("string"),image_url:s.type("string"),action:s.obj({type:s.equal(r.LINK_ACTION),value:s.type("string")},{requiredKeys:["type","value"],whitelistedKeysOnly:!0})},{requiredKeys:["heading","paragraph","action"],whitelistedKeysOnly:!0})),buttons:s.each(a)},{requiredKeys:["type","items"],whitelistedKeysOnly:!0})},u={validate:n,STRUCTURED_MSG_VALIDATOR:l,STRUCTURED_MSG_TYPE:o};t.exports=u},function(t,e,i){function n(t,e){if(!s(e.interval)||!s(e.limit))throw new Error("requires numeric interval and limit");if(e.callback&&!o(e.callback))throw new Error("requires callback to be a function");return function(){var i=Date.now();if(e.start>i-e.interval){if(e.count||(e.count=0),e.count++,e.count>e.limit)return void(e.callback&&e.callback())}else e.start=i,e.count=1;return t.apply(this,arguments)}}var s=i(22),o=i(5),r={rateLimit:n};t.exports=r},function(t,e,i){function n(t,e,i){var n=this;s.extend(n);var r=new o;e=e||{},r.setScope(e),r.on("success",i),r.on("error",(function(t){n.onError(t)})),r.load(t)}var s=i(0),o=i(18);n.prototype.onError=function(t){},t.exports=n},function(t,e,i){function n(t,e){var i=a[t];i.module_function=new Function("$Modules",e.toString().replace(d,"$1")),i.ready()}function s(t){var e,i,n,s;for(e=u.length-1;e>=0;e--){for(n=u[e],s=n.dependencies,i=s.length-1;i>=0;i--)if(s[i]==t){s.splice(i,1);break}n.ready()}}function o(){var t=Array.prototype.slice.call(arguments),e=t.shift();this.fqname=e,this.name=e.split(".").pop(),this.callbacks=[],this.dependencies=t,u.push(this)}function r(t){t()}var a=i(19),c=i(4),l=i(42),u=[],d=/^function *\( *\) *{ *([\s\S]*) *}$/;o.ensureLoaded=function(t,e){t instanceof o?t.ensureLoaded(e):e()},o.prototype.ensureLoaded=function(t){this.ifLoaded(t),this.load()},o.prototype.ifLoaded=function(t){this.callbacks.push(t)},o.prototype.load=function(){function t(t){n(t[0],t[1])}var e,i,s=this.getDependencies();for(e=0;e<s.length;e++)i=s[e],i.loader||(i.loader=new l(c.baseURL+"/lib/"+c.build_number+"/"+i.fqname+".js",a,t))},o.prototype.getDependencies=function(){var t,e=this.dependencies,i=[this];for(t=0;t<e.length;t++){var n=a[e[t]];i=i.concat(n.getDependencies())}return i},o.prototype.ready=function(){if(!this.dependencies.length&&this.module_function){for(t=u.length-1;t>=0;t--)if(u[t]==this){u.splice(t,1);break}this.module_function(a);var t,e=a[this.fqname];for(e.ifLoaded=e.ensureLoaded=r,t=0;t<this.callbacks.length;t++)this.callbacks[t](e);s(this.fqname),delete this.callbacks,delete this.fqname,delete this.name,delete this.dependencies,delete this.loader}},a.Module=o,t.exports=o},function(t,e){function i(t){return window[t]}var n={getVariable:i};t.exports=n},function(t,e,i){function n(){var t=s.getVariable("navigator"),e=t.userAgent||"",i=t.vendor||"",n=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i,o=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,r=e||i||window.opera;return n.test(r)||o.test(r.substr(0,4))}var s=i(44);t.exports=n},function(t,e,i){function n(t,e){return e?r(t,e):s(t)}function s(t){for(var e,i,n=t.length;n>1;)e=Math.floor(n--*Math.random()),i=t[e],t[e]=t[n],t[n]=i;return t}function o(t,e){if(!t||t.length<=0)return-1;if(!e)return Math.floor(Math.random()*t.length);e=a(t,e);var i,n=0;for(i=e.length;i--;)n+=e[i];var s=Math.random()*n,o=0,r=e.length;for(i=0;i<r-1;i++)if(o+=e[i],s<=o)return i;return i}function r(t,e){var i,n,s,o,r,c=t.concat();for(e=a(t,e),t.length=0,r=0,i=e.length;i--;)r+=e[i];for(s=Math.random()*r,o=0,i=0;c.length;)o+=e[i],s<=o?(r-=e[i],n=c.splice(i,1)[0],e.splice(i,1),t.push(n),s=Math.random()*r,o=0,i=0):i++;return t}function a(t,e){if(l(e)){if(e.length===t.length)return e.concat();throw new window.Error("Invalid weights array: length does not match")}if(u(e))return c(t,e);throw new window.Error("Invalid weights supplied")}function c(t,e,i){var n,s,o;if(!l(t))throw new TypeError(" arr is not an array");var r=Object(t),a=r.length>>>0;if(!u(e))throw new TypeError(e+" is not a function");for(arguments.length>2&&(n=i),s=new Array(a),o=0;o<a;){var c,d;o in r&&(c=r[o],d=e.call(n,c,o,r),s[o]=d),o++}return s}var l=i(7),u=i(5),d={shuffle:n,random_index:o,map:c};t.exports=d},function(t,e){function i(t,e){this.name=t,this.leaf=/\$[a-z]+$/.test(t),this.parentNode=e,this.leaf||(this.deleted=!1,this.childNodes={},this.keys={})}function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function s(t){for(var e="",i=0;i<t.length;i++)/^[a-zA-Z_$][a-zA-Z0-9_$]*$/.test(t[i])?e+="."+t[i]:e+="["+JSON.stringify(t[i])+"]";return e.substr(1)}i.prototype.fqname=function(){return s(this.path())},i.prototype.path=function(){for(var t=this,e=[this.name];t=t.parentNode;)e.unshift(t.name);return e},i.prototype._getOrCreateChildNode=function(t){var e;return n(this.childNodes,t)?e=this.childNodes[t]:(e=new i(t,this),this.childNodes[t]=e,this.deleted&&e.undeleteParents()),e},i.prototype.descend=function(t){var e,i,n=this;for("string"==typeof t&&(t=t.split(".")),e=0,i=t.length;e<i;e++)n=n._getOrCreateChildNode(t[e]);return n},i.prototype.$$=i.prototype.descend,i.prototype.$=function(t,e,i,n,s,o,r,a,c){var l=this._getOrCreateChildNode(t);return e?l.$(e,i,n,s,o,r,a,c):l},i.prototype.update=function(t,e){var i,n,s,o,r;if(null!=t&&this.undeleteParents(),this.leaf)this.value!==t&&(this.value=t,o=!0,this.notifyListeners(t,e));else if(null==t){if(!this.deleted){for(i in o=null,this.deleted=!0,this.childNodes)this.childNodes[i].update(null,!0);this.notifyListeners(o,e)}}else{if(this.deleted)for(i in this.deleted=!1,o=t,t)this.$(i).update(t[i],!0);else for(i in t)s=this.$(i),n=t[i],s.leaf?s.update(n,!0)&&(o||(o={}),o[i]=n):void 0!==(r=s.update(n,!0))&&(o||(o={}),o[i]=r);o&&this.notifyListeners(o,e)}return o},i.prototype.replace=function(t,e){var i,s,o,r,a;if(null!=t&&this.undeleteParents(),this.leaf)this.value!==t&&(this.value=t,r=!0,this.notifyListeners(t,e));else if(null==t){if(!this.deleted){for(i in r=null,this.deleted=!0,this.childNodes)this.childNodes[i].replace(null,!0);this.notifyListeners(r,e)}}else{if(this.deleted)for(i in this.deleted=!1,r=t,t)this.$(i).replace(t[i],!0);else{for(i in this.childNodes)n(t,i)||(o=this.childNodes[i],o.leaf?o.replace(null,!0)&&(r||(r={}),r[i]=null):void 0!==(a=o.replace(null,!0))&&(r||(r={}),r[i]=null));for(i in t)o=this.$(i),s=t[i],o.leaf?o.replace(s,!0)&&(r||(r={}),r[i]=s):void 0!==(a=o.replace(s,!0))&&(r||(r={}),r[i]=a)}r&&this.notifyListeners(r,e)}return r},i.prototype.undeleteParents=function(){for(var t=this.parentNode;t&&t.deleted;)t.deleted=!1,t=t.parentNode},i.prototype.write=function(t,e,i){"function"==typeof e&&(i=e,e=!1);var n={path:this.path(),value:t};"function"==typeof i&&(n.func=i),this.update(t,e||!1);for(var s=this;s.parentNode;)s=s.parentNode;s.notifyWriteListeners(n)},i.prototype.bindWrite=function(t){this.getWriteListeners().push(t)},i.prototype.getValueListeners=function(){return this.listeners_value||(this.listeners_value=[]),this.listeners_value},i.prototype.getWriteListeners=function(){return this.listeners_write||(this.listeners_write=[]),this.listeners_write},i.prototype.getKeysListeners=function(){return this.listeners_keys||(this.listeners_keys=[]),this.listeners_keys},i.prototype.bindValue=function(t){var e=this.getValueListeners();e.push(t);try{t.call(this,this.getValue())}catch(t){}},i.prototype.bindKeys=function(t){if(!this.leaf){var e=this.getKeysListeners();e.push(t);try{t.call(this,this.getKeys(),[])}catch(t){}}},i.prototype.unbindValue=function(t){for(var e=this.getValueListeners(),i=0;i<e.length;i++)if(e[i]==t)return void e.splice(i,1)},i.prototype.unbindKeys=function(t){if(!this.leaf)for(var e=this.getKeysListeners(),i=0;i<e.length;i++)if(e[i]==t)return void e.splice(i,1)},i.prototype.on=function(t,e){switch(t){case"value":this.bindValue(e);break;case"keys":this.bindKeys(e)}},i.prototype.un=function(t,e){switch(t){case"value":this.unbindValue(e);break;case"keys":this.unbindKeys(e)}},i.prototype.notifyListeners=function(t,e){var i,s,o,r;if(!this.leaf)if(t)for(i in t)null!=t[i]?n(this.keys,i)||(this.keys[i]=1,s||(s=[]),s.push(i)):n(this.keys,i)&&(delete this.keys[i],o||(o=[]),o.push(i));else for(i in this.keys)delete this.keys[i],o||(o=[]),o.push(i);if(this.listeners_value){r=this.getValueListeners().concat();for(var a=0,c=r.length;a<c;a++)try{r[a](t)}catch(t){}}if(!this.leaf){if(this.listeners_keys&&(s||o))for(r=this.getKeysListeners().concat(),a=0,c=r.length;a<c;a++)try{r[a](s||[],o||[])}catch(t){}if(!e&&this.parentNode){var l={};l[this.name]=t,this.parentNode.notifyListeners(l,e)}}},i.prototype.notifyWriteListeners=function(t){if(this.listeners_write)for(var e=this.getWriteListeners().concat(),i=0;i<e.length;i++)try{e[i].call(this,t)}catch(t){}},i.prototype.getValue=function(t){if(t)return this.descend(t).getValue();if(this.leaf)return this.value;if(this.deleted)return null;var e,i,n={};for(var s in this.childNodes)null!=(i=this.childNodes[s].getValue())&&(n[s]=i,e=!0);return e?n:null},i.prototype.hasKey=function(t){return n(this.keys,t)},i.prototype.getKeys=function(){if(this.leaf)return null;var t=[];for(var e in this.keys)t.push(e);return t},i.prototype.gc=function(){if(this.leaf)throw new TypeError("Leaf nodes cannot be collected");var t=!0;for(var e in this.childNodes){var i=this.childNodes[e];t=i.leaf?!(i.listeners_value&&i.listeners_value.length)&&null==i.value&&(delete this.keys[e],delete this.childNodes[e])&&t:i.gc()&&(delete this.keys[e],delete this.childNodes[e])&&t}return t&&this.deleted&&!(this.listeners_keys&&this.listeners_keys.length)&&!(this.listeners_value&&this.listeners_value.length)},i.DataNode=i,t.exports=i},function(t,e){var i=function(t,e){return t===e||t&&e&&"object"==typeof t&&"object"==typeof e&&n(t,e)},n=function(t,e){var n;for(n in t)if(!i(t[n],e[n]))return!1;for(n in e)if(!i(t[n],e[n]))return!1;return!0},s=function(t){if("object"!=typeof t||!t)return t;var e={};for(var i in t)t.hasOwnProperty(i)&&(e[i]=s(t[i]));return e},o=function(t){if(t)for(var e=1,i=arguments.length;e<i;e++){var n=arguments[e];if(n)for(var s in n)n.hasOwnProperty(s)&&(t[s]=n[s])}return t},r={equal:i,clone:s,extend:o};t.exports=r},function(t,e,i){function n(t){dt([ce],[t],"logout")||(Ht.isAuthenticated()?s(t):ut(new Error("This API is only applicable for authenticated visitors"),"logout"))}function s(t){yt.destroy(),a(),Ht.clearIdentity(),Qt.clearIdentity(),Zt=!1,t&&setTimeout((function(){t(null)}))}function o(t){if(Ct&&te.un("data",Ct),Ct=function(t){Xt.fire(t.type,t.detail)},te.on("data",Ct),Zt)ut(new Error("Zendesk Chat Web SDK has already been initialized. Please ensure that zChat.init() is only called once in your code"),"init");else if(Ot.isIE<=10)ut(new Error("The current browser you are on is not supported by the Web SDK. Please refer to the documentation to learn about the system requirements for Zendesk Chat."),"init");else{var e=ne.obj({account_key:ne.type("string").ok(),suppress_console_error:ne.type("boolean"),override_auth_server_host:ne.type("string").ok(),override_proxy:ne.type("string").ok(),authentication:ne.obj({jwt_fn:ne.type("function").ok()},{requiredKeys:["jwt_fn"]}),activity_window:ne.type("object").chain(ue),popout:ne.type("boolean")},{requiredKeys:["account_key"]});if(!dt([e],[t],"init")){var i=new Rt("root"),n=new Rt("root"),s={livechat:{settings:Pt.clone(Ft.livechat.settings)}};i.update(s),n.update(s),Vt()&&i.$("livechat").$("ui").$("mobile$bool").update(!0),jt.ACCOUNT_KEY=t.account_key,t.authentication?(Ht.setOverrideHost(t.override_auth_server_host),Ht.setSiteJWTFunc(t.authentication.jwt_fn),Ht.setDataNode(i),Ht.authenticate((function(e){e?ut(new Error("Failed to verify token: "+e.reason+(e.details?": "+e.details:"")),"init",{reason:e.reason,details:e.details}):r(t,Kt,i,n)}))):r(t,Kt,i,n)}}}function r(t,e,i,n){switch(yt=e,kt=i,$t=n,Yt.init(kt,$t),et(),Et=function(t){(t.path?$t.descend(t.path):$t).update(t.update)},yt.on("message",Et),xt=t.suppress_console_error||!1,Qt.init(t.activity_window),Qt.DOM.getVariable("account_status")){case"invalid_account_key":Mt.warnBadEmbed();case"banned":return}yt.init({root:kt,overrideProxy:t.override_proxy,isCookieDenied:function(){return!1},source:ee,lastHost:Qt.DOM.getVariable("web_sdk_last_host"),source_ver:At.release_tag,activity_window:t.activity_window,gd_compatible:1}),kt.$("connection").$("server$string").bindValue((function(t){t&&Qt.DOM.saveVariable("web_sdk_last_host",t)})),$t.$("livechat").$("account").$("status$string").bindValue((function(t){t&&Qt.DOM.saveVariable("account_status",t)})),Bt.init(kt,yt),Gt.init(kt,t.activity_window),Zt=!0}function a(){te.un("data",Ct),Yt.destroy(),yt.un("message",Et),Ct=null,Et=null,xt=void 0}function c(){yt.reconnect()}function l(){"invalid_account_key"!==Qt.DOM.getVariable("account_status")?"closed"===Xt.getConnectionStatus()?he():ut(new Error("Call has been ignored due to invalid connection status"),"reconnect"):Mt.warnBadEmbed()}function u(){return te}function d(){return _e($t.$("livechat").$("profile").getValue())}function h(t,e){if(!dt([ne.obj({display_name:ne.any([ne.equal(""),ne.type("string").regex(re).maxLength(255)]),email:ne.any([ne.equal(""),ne.type("string").regex(Nt.email)]),phone:ae}),ce],[t,e],"setVisitorInfo")){var i={};e=e||ie,"display_name"in t&&(i.display_name$string=t.display_name),"email"in t&&(i.email$string=t.email),"phone"in t&&(i.phone$string=t.phone),kt.$("livechat").$("profile").write(i,ft(e))}}function p(t,e){dt([ne.type("string").regex(re),ce],[t,e],"sendChatMsg")||(e=e||ie,Bt.sendChatMsg({msg:t.trim()},null,ft(e)))}function f(t,e){dt([ne.chain(ht),ce],[t,e],"sendFile")||m(t,e)}function m(t,e){e=e||ie,Kt.reconnectIfServerRetired((function(){Bt.sendFileWithCallback(t,e)}))}function g(t){var e=ne.type("number"),i=$t.$("livechat");if(!dt([e],[t],"getDepartment"))return i.$("account").$("departments_migrated$bool").getValue()&&i.$("dg_mappings").hasKey(t)&&console.warn("legacy department id is deprecated, use group id %s instead",i.$("dg_mappings").$(t).$("group_id$int").getValue()),v(t)}function v(t){var e=$t.$("livechat"),i=e.$("departments").$(t).getValue();if(e.$("account").$("departments_migrated$bool").getValue()){if(i&&e.$("dg_mappings").hasKey(t)){var n=e.$("dg_mappings").$(t).$("group_id$int").getValue();return be(i,n)}!i&&e.$("groups").hasKey(t)&&(i=e.$("groups").$(t).getValue())}return i?be(i,t):void 0}function _(){var t={},e=$t.$("livechat");return t=e.$("account").$("departments_migrated$bool").getValue()?e.$("groups").getValue():e.$("departments").getValue(),ot(t,be)}function b(){var t=$t.$("livechat").$("profile").$("department_id$int"),e=t.getValue();return Lt(e)?e:void 0}function w(t,e){dt([ne.type("number").chain(pt),ce],[t,e],"setVisitorDefaultDepartment")||(e=e||ie,kt.$("livechat").$("profile").write({department_id$int:t},ft(e)))}function y(t){dt([ce],[t],"clearVisitorDefaultDepartment")||(t=t||ie,kt.$("livechat").$("profile").write({department_id$int:null},ft(t)))}function k(t,e){C("added$string",t,"addTag",e)}function $(t,e){C("removed$string",t,"removeTag",e)}function C(t,e,i,n){if(!dt([ne.type("string").regex(re).chain(le),ce],[e,n],i)){n=n||ie;var s={};s[t]=e.trim(),kt.$("livechat").$("channel").$("tags").write(s,ft(n))}}function E(t,e){O("added$string",t,"addTags",e)}function x(t,e){O("removed$string",t,"removeTags",e)}function O(t,e,i,n){if(!dt([ne.each(ne.type("string").regex(re).chain(le)).minLength(1),ce],[e,n],i)){n=n||ie;for(var s=0,o=e.length;s<o;s++)e[s]=e[s].trim();var r={};r[t]=e.join(","),kt.$("livechat").$("channel").$("tags").write(r,ft(n))}}function A(t,e){dt([ne.obj({title:ne.type("string").regex(re),url:ne.type("string").regex(oe)},{requiredKeys:["title","url"]}),ce],[t,e],"sendVisitorPath")||(e=e||ie,kt.$("livechat").$("session").$("page_path").write({url$string:t.url,title$string:t.title},ft(e)))}function T(){var t=$t.$("livechat").$("channel").$("rating$string").getValue(),e=$t.$("livechat").$("channel").$("comment$string").getValue(),i={};return It(t)||(i.rating=t),It(e)||(i.comment=e),i}function L(t,e){dt([ne.any([ne.equal(null),ne.equal("good"),ne.equal("bad")]),ce],[t,e],"sendChatRating")||(e=e||ie,kt.$("livechat").$("channel").write({rating$string:t},ft(e)))}function I(t,e){dt([ne.type("string"),ce],[t,e],"sendChatComment")||(e=e||ie,kt.$("livechat").$("channel").write({comment$string:t},ft(e)))}function S(t,e){var i=ne.obj({clear_dept_id_on_chat_ended:ne.type("boolean")}),n=kt.$("livechat").$("channel");"function"==typeof t?(e=t,t={}):void 0===t&&(t={}),dt([i,ce],[t,e],"endChat")||(e=e||ie,n.write({chatting$bool:!1},ft(e)),t.clear_dept_id_on_chat_ended&&Bt.clearChatDepartmentID())}function D(){return $t.$("livechat").$("channel").$("chatting$bool").getValue()||!1}function P(){return ot($t.$("livechat").$("agents").getValue(),we)}function R(t){return we($t.$("livechat").$("agents").$(t).getValue(),t)}function N(){var t=$t.$("livechat"),e=t.$("settings"),i=e.$("operating_hours");if(e.hasKey("operating_hours")){var n=i.$("type$string").getValue(),s={enabled:i.$("enabled$bool").getValue(),type:n,timezone:e.$("timezone$string").getValue()||"UTC"};if("account"==n)s.account_schedule=mt(i.$("schedule").getValue()||{});else if("department"==n){var o=t.$("dg_mappings").getValue(),r=gt(i.$("schedules").getValue(),t.$("departments").getKeys());t.$("account").$("departments_migrated$bool").getValue()&&o&&(r=Object.keys(r).reduce((function(t,e){return e in o?t[o[e].group_id$int]=r[e]:t[e]=r[e],t}),{})),s.department_schedule=r}return s}}function q(t,e){if(!dt([ne.obj({name:ne.type("string").regex(re).maxLength(255),email:ne.type("string").regex(Nt.email),message:ne.type("string").regex(re),phone:ae},{requiredKeys:["name","email","message"]}),ce],[t,e],"sendOfflineMsg")){e=e||ie;var i={name:{name$string:"name",value$string:t.name},email:{name$string:"email",value$string:t.email},message:{name$string:"message",value$string:t.message}};"phone"in t&&(i.phone={name$string:"phone",value$string:t.phone}),"department"in t&&(i.department={name$string:"department_id",value$string:t.department}),kt.$("livechat").$("settings").$("forms").$("offline_form").$("form_submitted").write(i,ft(e))}}function j(t){var e=kt.$("livechat").$("channel").$("typing"),i=e.$("typing$bool").getValue(),n=ne.type("boolean");i!==t&&(dt([n],[t],"sendTyping")||e.write({typing$bool:t}))}function V(t,e){var i=ne.type("string").regex(Nt.email),n=!!$t.$("livechat").$("channel").$("log").getKeys().length;dt([i,ce],[t,e],"sendEmailTranscript")||(e=e||ie,$t.$("livechat").$("channel").$("chatting$bool").getValue()?kt.$("livechat").$("channel").write({email_transcript$string:t},ft(e)):Ht.isAuthenticated()||n?kt.$("livechat").$("channel").write({email_last_transcript$string:t},ft(e)):ut(new Error("There were no past chat to send a transcript of"),"sendEmailTranscript"))}function M(t,e){return{id:parseInt(e,10)}}function U(t){return Object.prototype.hasOwnProperty.call(t,"typing$bool")?{type:"typing"}:null}function z(t){var e=Object.prototype.hasOwnProperty.call(t,"typing$bool"),i={type:"typing",nick:"agent:trigger"};return e?i:null}function W(t){return Object.prototype.hasOwnProperty.call(t,"timestamp$int")?{type:"last_read"}:null}function K(t){return 0===t.indexOf("visitor:")?"visitor":t}function B(t){if(!t.type$string)return null;if(!t.nick$string)return null;var e={nick:K(t.nick$string),type:t.type$string},i=t.msg$string;switch(t.first$bool&&(e.first=t.first$bool),t.type$string){case"chat.msg":if("attachment"in t){if(!0===t.unverified$bool)return null;var n,s=t.attachment,o={mime_type:s.mime_type$string,name:s.name$string,size:s.size$int,url:s.url$string};return"metadata"in s&&(n=s.metadata,o.metadata={width:n.width$int,height:n.height$int}),"deleted$bool"in s&&(o.deleted=s.deleted$bool),Pt.extend(e,{type:"chat.file",display_name:t.display_name$string,attachment:o})}if("structured_msg"in t){var r=lt(t.structured_msg);bt(r,["items","buttons","quick_replies"]);var a=Wt.validate(r);a?ut(a,'Unsupported structured message in "chat.msg" event'):e.structured_msg=r}return Pt.extend(e,{display_name:t.display_name$string,msg:i,options:t.options$string?t.options$string.split("/"):[]});case"chat.rating":return Pt.extend(e,{display_name:t.display_name$string,new_rating:t.new_rating$string,rating:t.rating$string});case"chat.comment":return Pt.extend(e,{display_name:t.display_name$string,comment:t.comment$string,new_comment:t.new_comment$string});case"chat.memberleave":return Pt.extend(e,{display_name:t.display_name$string});case"chat.memberjoin":case"chat.request.rating":return Pt.extend(e,{display_name:t.display_name$string});case"chat.event":var c,l=/Please wait while our agents attend to you. There are currently (\d+) visitor\(s\) waiting to be served\./;return"agent:system"===t.nick$string&&(c=l.exec(i))?{type:"chat.wait_queue",nick:"system.queue",wait_queue:parseInt(c[1],10)}:null;case"chat.join":var u=t.history;if(u&&u[0]){var d=Pt.extend({},u[0]),h=d.timestamp$int;return d.type$string=d.__type$string,d.display_name$string=d.name$string,h*=1e3,d.timestamp$int=h,B(d)}return null;case"chat.file.update":default:return null}}function F(){var t,e,i,n=["type$string","timestamp$int"],s=$t.$("livechat").$("channel").$("log").getValue(),o=[];for(var r in s)if(Object.prototype.hasOwnProperty.call(s,r)){if(s[r].type$string)t=s[r];else if(t=kt.$("livechat").$("channel").$("log").$(r).getValue(),"chat.msg"===t.type$string&&(!0===t.unverified$bool||!0===t.failed$bool))continue;var a=B(t);if(null===a)continue;for(var c=0;c<n.length;c++)e=n[c],i=ct(e),i in a||(a[i]=t[e]);o.push(a)}return o}function H(){if(!$t)return"closed";var t=$t.$("tmp").$("friendly_connection_status$string").getValue();return ge(t)[0]}function Q(){var t=$t.$("livechat").$("account").$("status$string").getValue();return ve(t)[0]}function G(){return $t.$("livechat").$("channel").$("queue_position$int").getValue()||0}function Y(t){if(!dt([ce],[t],"fetchChatHistory"))if(Ht.isAuthenticated()){var e=$t.$("livechat").$("history"),i=kt.$("livechat").$("history"),n=i.$("in_progress$bool").getValue(),s=e.$("has_more$bool").getValue(),o=e.$("cursor$string").getValue();n?ut(new Error("Previous fetching of history is still in progress"),"fetchChatHistory"):!1!==s?(t=t||ie,i.$("in_progress$bool").update(!0),i.write({cursor$string:o||""},ft(t))):ut(new Error("No more history to load"),"fetchChatHistory")}else ut(new Error("This API is not available for unauthenticated visitors"),"fetchChatHistory")}function J(){D()&&kt.$("livechat").$("ui").$("chat").write({read_ts$int:+new Date})}function X(t,e,i){return function(n,s){if(null===n)return{};for(var o={},r=0,a=t.length;r<a;r++){var c=t[r];c in n&&(o[ct(c)]=n[c])}if(St(e)&&Object.keys(o).length&&(o[e]=s),Dt(i)){var l=i(n,s);return null===l?{}:Pt.extend(o,l)}return o}}function Z(t,e,i){$t.descend(e).bindValue((function(e){i(e).forEach((function(e){tt(t,e)}))}))}function tt(t,e){if(e){if(e instanceof Error){if(!e.message)return}else if("object"==typeof e&&!Object.keys(e).length)return;te.fire("data",{type:t,detail:e})}}function et(){Z("connection_update","tmp.friendly_connection_status$string",ge),Z("account_status","livechat.account.status$string",nt(me)),Z("visitor_update","livechat.profile",rt(["email$string","phone$string","display_name$string"],d)),Z("department_update","livechat.departments",at(["name$string","status$string"],v)),Z("agent_update","livechat.agents",at(["avatar_path$string","display_name$string","title$string"],R)),Z("chat","livechat.channel.log",st($e)),Z("chat","livechat.agents",st(ye)),Z("chat","livechat.triggers.agents",st(ke)),Z("chat","livechat.channel.queue_position$int",it),Z("history","livechat.history.log",st($e)),Z("chat","livechat.channel.last_read",st(Ce))}function it(t){return["number"!=typeof t?null:{type:"chat.queue_position",nick:"system.queue",queue_position:t}]}function nt(t){return function(e){return void 0===e?[null]:[t[e]||null]}}function st(t){return function(e){return ot(e,t)}}function ot(t,e){var i=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&i.push(e(t[n],n));return i}function rt(t,e){return function(i){return t.some((function(t){return i&&t in i}))?[e()]:[null]}}function at(t,e){return function(i){var n=[];for(var s in i)if(Object.prototype.hasOwnProperty.call(i,s)){var o=i[s],r=t.some((function(t){return o&&t in o}));r&&n.push(e(s))}return n}}function ct(t){return t.split("$")[0]}function lt(t){if(!t||"object"!=typeof t)return t;var e={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=ct(i),s=lt(t[i]);e[n]=s}return e}function ut(t,e,i){var n=e?e+": ":"";t=new Error("Zendesk Chat Web SDK: Error: "+n+t.message),t.context=e,t.extra=i,xt||window.console&&window.console.error&&console.error(t.message),tt("error",t)}function dt(t,e,i){for(var n=0;n<t.length;n++){var s=t[n],o=s(e[n]);if(o)return ut(o,i),!0}return!1}function ht(t){if("[object File]"!==Object.prototype.toString.call(t))return new Error("Expect a File object")}function pt(t){if(!g(t))return new Error("Expect a valid department id")}function ft(t){return function(e){var i=e.raw,n="ok"===i.__status?null:new window.Error("Failed");for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&0===s.indexOf("__")&&delete i[s];t(n,i)}}function mt(t){for(var e,i,n={},s=0;s<7;s++){var o=t[s]||{};if(o.enabled$bool){for(var r in e=[],i=o.periods,i)Object.prototype.hasOwnProperty.call(i,r)&&e.push({start:i[r].start$int,end:i[r].end$int});n[s]=wt(e)}else n[s]=[]}return n}function gt(t,e){var i,n={},s=_t(t),o=vt(t,e);return e.forEach((function(t){var e=o[t];for(n[t]={},i=0;i<7;i++)n[t][i]=[];for(e.forEach((function(e){for(var i in s[e])Object.prototype.hasOwnProperty.call(s[e],i)&&Array.prototype.push.apply(n[t][i],s[e][i])})),i=0;i<7;i++){var r=n[t][i];r.length>1&&(n[t][i]=wt(r))}})),n}function vt(t,e){var i,n={};for(var s in e.forEach((function(t){n[t]=[]})),t)if(Object.prototype.hasOwnProperty.call(t,s))for(var o in i=t[s],i.departments)if(Object.prototype.hasOwnProperty.call(i.departments,o)){if(!i.departments[o])continue;var r=ct(o);if(!n[r])continue;n[r].push(s)}return n}function _t(t){var e,i,n={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(i=t[s],Object.prototype.hasOwnProperty.call(i,"deleted_ts$int"))continue;if(!i.departments)continue;if(!i.enabled$bool)continue;e={};for(var o=0;o<7;o++){var r=i[o],a=[];if(r.enabled$bool&&r.periods){var c=r.periods;for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&a.push({start:c[l].start$int,end:c[l].end$int});a.length&&(e[o]=a)}}Object.keys(e).length&&(n[s]=e)}return n}function bt(t,e){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(-1!==e.indexOf(i)&&(t[i]=ot(t[i],(function(t){return t}))),"object"==typeof t[i]&&bt(t[i],e))}function wt(t){if(t.length<=1)return t;var e=[];return t.forEach((function(t){e[t.start]=void 0!==e[t.start]?e[t.start]+1:1,e[t.end]=void 0!==e[t.end]?e[t.end]-1:-1})),function(t){var e,i=[],n=0;return t.forEach((function(t,s){t>0&&!e&&(e=s),t&&(n+=t,0===n&&(i.push({start:e,end:s}),e=void 0))})),i}(e)}var yt,kt,$t,Ct,Et,xt,Ot=i(2),At=i(4),Tt=i(0),Lt=i(22),It=i(1),St=i(12),Dt=i(5),Pt=i(48),Rt=i(47),Nt=i(21),qt=i(20),jt=i(3),Vt=i(45),Mt=i(6),Ut=i(15),zt=i(41),Wt=i(40),Kt=i(39),Bt=i(29),Ft=i(26),Ht=i(13),Qt=i(14),Gt=i(25),Yt=i(24),Jt={init:o,reconnect:l,getFirehose:u,setVisitorInfo:h,getVisitorInfo:d,setVisitorDefaultDepartment:w,getVisitorDefaultDepartment:b,getAllDepartments:_,getDepartment:g,clearVisitorDefaultDepartment:y,addTag:k,removeTag:$,addTags:E,removeTags:x,sendChatMsg:p,sendFile:f,sendVisitorPath:A,sendChatComment:I,sendChatRating:L,getChatInfo:T,endChat:S,isChatting:D,getServingAgentsInfo:P,sendOfflineMsg:q,sendTyping:qt.debounceExceptFirst(j,300),sendEmailTranscript:V,getChatLog:F,getConnectionStatus:H,getAccountStatus:Q,getOperatingHours:N,getQueuePosition:G,fetchChatHistory:Y,markAsRead:qt.throttle(J,2e3),logout:n,EMAIL_REGEX:Nt.email},Xt=Tt.extend(Jt),Zt=!1,te=Tt.extend({}),ee="web_sdk",ie=function(){},ne=Ut,se=/[0-9]+/,oe=/^(https?|ftps?):\/\//i,re=/\S/,ae=ne.any([ne.equal(""),ne.type("string").regex(se).maxLength(25)]),ce=ne.any([ne.equal(void 0),ne.type("function")]),le=ne.predicate((function(t){return-1===t.indexOf(",")}),"not contain any comma character"),ue=ne.predicate((function(t){return"object"==typeof t.document&&!!t.document&&"object"==typeof t.navigator&&!!t.navigator&&"object"==typeof t.location&&!!t.location}),"be a valid window object"),de={interval:6e5,limit:10,callback:function(){ut(new Error("Call has been ratelimted"),"reconnect")}},he=zt.rateLimit(c,de),pe=["email$string","phone$string","display_name$string"],fe={connected:"connected",connecting:"connecting",closed:"closed"},me={online:"online",offline:"offline",away:"away",invalid_account_key:null,banned:null},ge=nt(fe),ve=nt(me),_e=X(pe),be=X(["name$string","status$string"],"id",M),we=X(["avatar_path$string","display_name$string","title$string"],"nick"),ye=X(["typing$bool"],"nick",U),ke=X(["typing$bool"],"display_name",z),$e=X(["timestamp$int"],null,B),Ce=X(["timestamp$int"],"nick",W),Ee=(X(["banner","behavior","branding","bubble","chat_button","chat_window","concierge","file_sending","forms","greetings","language","login","rating","sound","theme","timezone$string"]),["on","un","fire","unextendEvents","init","getFirehose","getConnectionStatus"]);for(var xe in Xt)Object.prototype.hasOwnProperty.call(Xt,xe)&&-1===Ee.indexOf(xe)&&Dt(Xt[xe])&&(Xt[xe]=function(t,e){return function(){if(!1!==Zt)return e.apply(null,arguments);ut(new Error("Web SDK is not initialized yet. Please ensure that you call zChat.init() and wait for the connection to be established before calling this method"),t)}}(xe,Xt[xe]));t.exports=Xt},function(t,e,i){var n=i(49),s=n;t.exports=s}])}))},cb26:function(t,e,i){"use strict";i("3166")},cc34:function(t,e,i){},d32a:function(t,e,i){t.exports=i.p+"img/send_active.8a869207.svg"},d438:function(t,e,i){"use strict";i.r(e);var n=function(){var t,e,n,s,o,r,a=this,c=a._self._c;return c("div",{staticClass:"chat-msg system-msg"},[c("Avatar"),c("div",{staticClass:"message-wrapper"},[c("div",{staticClass:"message-container"},[null!==(t=a.chatObj)&&void 0!==t&&null!==(t=t.info)&&void 0!==t&&t.title?c("div",{staticClass:"title"},[a._v(a._s(null===(e=a.chatObj)||void 0===e||null===(e=e.info)||void 0===e?void 0:e.title))]):a._e(),a.answersList.length?c("div",{staticClass:"message"},[c("div",{staticClass:"list"},a._l(a.answersList,(function(t,e){return c("div",{key:e,staticClass:"item",on:{click:function(e){return a.messageClick(t)}}},[c("span",[a._v(a._s(t.question))])])})),0)]):"media"===(null===(n=a.chatObj)||void 0===n?void 0:n.info.type)?c("div",{staticClass:"message"},[c("div",{staticClass:"media-content"},[a.isImage?c("a",{attrs:{href:null===(s=a.chatObj.info)||void 0===s||null===(s=s.message)||void 0===s?void 0:s.url,target:"_blank"}},[c("div",{staticClass:"media-img",style:`background-image: url(${null===(o=a.chatObj.info)||void 0===o||null===(o=o.message)||void 0===o?void 0:o.url})`})]):c("div",{staticClass:"media-other"})])]):c("div",{staticClass:"message",class:a.isSensitive?"sensitive-words-error":"",domProps:{innerHTML:a._s(a.htmlMsg)}}),null!==(r=a.chatObj)&&void 0!==r&&r.info.action?c("div",{staticClass:"action",class:{feedback:a.isFeedback}},[c("div",{staticClass:"button",class:{resolved:a.isResolved},on:{click:function(t){var e;return a.resolvedClick(null===(e=a.chatObj)||void 0===e||null===(e=e.info)||void 0===e?void 0:e.questionObj)}}},[c("img",{attrs:{src:i("9e70")(`./${a.isResolved?"resolved-active":"resolved"}.svg`),alt:"resolved"}}),c("span",[a._v(a._s(a.$t("base.slove")))])]),c("div",{staticClass:"divider"}),c("div",{staticClass:"button",class:{unsolved:a.isUnsolved},on:{click:function(t){var e;return a.unsolvedClick(null===(e=a.chatObj)||void 0===e||null===(e=e.info)||void 0===e?void 0:e.questionObj)}}},[c("img",{attrs:{src:i("9e70")(`./${a.isUnsolved?"unsolved_active":"unsolved"}.svg`),alt:"unsolved"}}),c("span",[a._v(a._s(a.$t("base.unslove")))])])]):a._e()]),c("span",{staticClass:"time"},[a._v(a._s(a._f("formatTime")(a.chatObj.timestamp)))])])],1)},s=[],o=i("d930"),r=i("2f62"),a=i("7b64"),c=i("f953"),l={name:"SystemMessage",props:{chatObj:{type:Object,default(){return{}}}},components:{Avatar:a["a"]},data(){return{isFeedback:!1,isResolved:!1,isUnsolved:!1}},computed:{...Object(r["c"])("base",["isApp","configInfo","isKorea"]),...Object(r["c"])("zchat",["curQuestionInfo"]),htmlMsg(){const{type:t,info:e={}}=this.chatObj,n=(null===e||void 0===e?void 0:e.message)||"";if(null!==e&&void 0!==e&&e.isSensitiveWords)return"";if(null!==e&&void 0!==e&&e.handleReg)return n;if("welcome"===t){const t=new RegExp(/<a[^>]*href=[ '"]([^"]*)[' "][^>]*>(.*?)<\/a>/,"gi"),e=n.replace(t,e=>{const i=t.exec(e)||[],n=i[1],s=Object(o["b"])(n),r=i[2];t.lastIndex=0;const a=-1===e.indexOf("target");let c=a?`<span data-url="${s}">${r}</span>`:`<span data-boxlink="welcomeUrl" data-url="${s}">${r}</span>`;return c});return e}if("chat.memberjoin"===e.type)return this.isKorea?"OWB  "+this.$i18n.t("base.memberjoin"):`${e.display_name} ${this.$i18n.t("base.memberjoin")}`;if("chat.memberleave"===e.type)return this.isKorea?"OWB  "+this.$i18n.t("base.memberleave"):`${e.display_name} ${this.$i18n.t("base.memberleave")}`;if("resolved"===e.type)return`<div class="operate-container"><img class="img_solve" src="${i("3f00")}" alt="resolved" /><span>${n}</span></div>`;if("unsolved"===e.type)return`<div class="operate-container"><img class="img_unsolved" src="${i("e0f9")}" alt="unsolved" /><span>${n}</span></div>`;const s=document.createElement("div");s.innerHTML=n;const r=s.innerText,a="w{3}[^\\s]*",c="(https|http)://[^\\s]*",l=`${a}|${c}`,u=new RegExp(l,"gi"),d=r.replace(u,t=>t.search("http")<0&&t.search("HTTP")<0?`<a href="http://${t}" target="_blank"  rel="noopener noreferrer">${t}</a>`:`<a href="${t}" target="_blank" rel="noopener noreferrer">${t}</a>`);return d},answersList(){var t;const e=(null===(t=this.chatObj)||void 0===t?void 0:t.info)||{};return(null===e||void 0===e?void 0:e.answerList)||[]},isSensitive(){var t;return(null===(t=this.chatObj)||void 0===t||null===(t=t.info)||void 0===t?void 0:t.isSensitiveWords)||!1},isImage(){var t;return/^image/.test(null===(t=this.chatObj)||void 0===t||null===(t=t.info)||void 0===t?void 0:t.message.mime_type)}},mounted(){this.$el.addEventListener("click",this.btnClick,!1)},methods:{...Object(r["b"])("zchat",["setQuestionAction","updateChatListAction"]),btnClick(t){const e=Object(o["a"])(t,"boxlink");if("welcomeUrl"===e){const e=t.target.dataset.url;return void(this.isApp?e.indexOf("https://m.")>-1?this.$callNative("20010038",`holigeit://open/v1?url=${e}?utm_medium=copy_link&hbOpenType=1`):this.$callNative("20010043",{url:e,titleBack:"back"}):window.open(e,"_blank"))}const i=Object(o["a"])(t,"link");if("answerUrl"===i){const e=t.target.dataset.url;this.isApp?e.indexOf("https://m.")>-1?this.$callNative("20010038",`holigeit://open/v1?url=${e}?utm_medium=copy_link&hbOpenType=1`):this.$callNative("20010043",{url:e,titleBack:"back"}):window.open(e,"_blank")}},messageClick(t){var e;this.updateChatListAction([{type:"user",info:{message:t.question}}]);const i={questionId:t.questionId,question:t.question||"",baseInfo:t.baseInfo||(null===(e=this.chatObj)||void 0===e||null===(e=e.info)||void 0===e||null===(e=e.message)||void 0===e?void 0:e.cs_base_info)};this.setQuestionAction(i),this.reportData("customer_sc_chat_click",i),this.$bus.emit("questionEvent")},resolvedClick(t){if(!this.isFeedback){try{this.isResolved=!0,c["a"].setUserStatistics({type:2,questionId:t.questionId}),this.isFeedback=!0,this.updateChatListAction([{type:"system",info:{message:this.configInfo.solvedTip,type:"resolved"}}])}catch(e){console.log("error :>> ",e)}this.reportData("customer_sc_solved_click",t)}},async unsolvedClick(t){if(!this.isFeedback){try{this.isUnsolved=!0;const{data:e,success:i}=await c["a"].unsolvedQuestion({question:t.question}),n=e||[];i&&this.updateChatListAction([{type:"guess",info:{guessList:n,isArtificial:!0}}]);const s=n.map(t=>t.id),o=n.map(t=>t.cs_base_info);window.sensors.track("newcustomer_guessshow",{button_name:"show",qustionid:JSON.stringify(s),cs_base_info:JSON.stringify(o)}),this.isFeedback=!0}catch(e){console.log("error :>> ",e)}this.reportData("customer_sc_unsolved_click",t)}},reportData(t,e){window.sensors.track(t,{commId:this.curQuestionInfo.commId,commPid:this.curQuestionInfo.commPid,questionId:e.questionId,cs_base_info:e.baseInfo?e.baseInfo:""})}},beforeDestroy(){this.$el.removeEventListener("click",this.btnClick,!1)}},u=l,d=(i("8ed2"),i("1702"),i("2877")),h=Object(d["a"])(u,n,s,!1,null,"3bb2cf24",null);e["default"]=h.exports},d48f:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAKlBMVEUAAAD///////////////////////////////////////////////////+Gu8ovAAAADXRSTlMA30DvYBCQIM+Aj1C/lm04hgAAAOZJREFUKM9jIBIwrbC9fEoBwWeRvQsEFx1gfPbey5MKWNVkLxZABZwvKkDUWUP43HdTIYywuxBNxTdheueagynZBCDBKAAk2G6AtV4MAJK8F4AEq6wDSO4KA0yAQVcATCAEmC8BidwEhADnNSBxVgEhwAQy1TYAIcB+GUjcZYAJQDiYArYFCAFWkJZesKGMAmBD74CsnYAIGDaQtboGCAHGSzCCIVAURPoKwD1XexXuOYbeBaBQAhnNdRF7ALHcXQrhR93dAGFshkQAk6wJLBpkLy4KYNe0vVGAPaLAqnNsL7cpEBnvAAg7Ra3gQSkLAAAAAElFTkSuQmCC"},d74b:function(t,e,i){"use strict";i("26c1")},d775:function(t,e,i){},d88e:function(t,e,i){},d930:function(t,e,i){"use strict";function n(t){return/\/\w{2}-\w{2}\/futures/.test(t)?t.indexOf("www.huobi.com")>-1&&t.indexOf("www.huobi.com.")<0||t.indexOf("www.htx.com")>-1&&t.indexOf("www.htx.com.")<0?t:t.replace("www.","futures."):t}function s(t){let e=/^((http|https):\/\/)?((\w+)\.(huobi|htx)\.([^\/]+))\/?/,i=e.exec(location.href);const n=location.href.indexOf(".htx.")>-1?".htx.":".huobi.";return i&&t?t.replace(e,(function(...t){return(t[1]?t[1]:"")+t[4]+n+(i&&i[6])+"/"})):t}function o(t){return t?n(s(t)):""}function r(t,e){let i=t.target,n="";while(i&&i!==document.body&&!n)i.dataset&&i.dataset[e]?n=i.dataset[e]:i=i.parentNode;return n}i.d(e,"b",(function(){return o})),i.d(e,"a",(function(){return r}))},d936:function(t,e,i){},d9e2:function(t,e,i){"use strict";var n=i("23e7"),s=i("da84"),o=i("2ba4"),r=i("e5cb"),a="WebAssembly",c=s[a],l=7!==Error("e",{cause:7}).cause,u=function(t,e){var i={};i[t]=r(t,e,l),n({global:!0,constructor:!0,arity:1,forced:l},i)},d=function(t,e){if(c&&c[t]){var i={};i[t]=r(a+"."+t,e,l),n({target:a,stat:!0,constructor:!0,arity:1,forced:l},i)}};u("Error",(function(t){return function(e){return o(t,this,arguments)}})),u("EvalError",(function(t){return function(e){return o(t,this,arguments)}})),u("RangeError",(function(t){return function(e){return o(t,this,arguments)}})),u("ReferenceError",(function(t){return function(e){return o(t,this,arguments)}})),u("SyntaxError",(function(t){return function(e){return o(t,this,arguments)}})),u("TypeError",(function(t){return function(e){return o(t,this,arguments)}})),u("URIError",(function(t){return function(e){return o(t,this,arguments)}})),d("CompileError",(function(t){return function(e){return o(t,this,arguments)}})),d("LinkError",(function(t){return function(e){return o(t,this,arguments)}})),d("RuntimeError",(function(t){return function(e){return o(t,this,arguments)}}))},d9f6:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t._self._c;return t.show?e("div",{staticClass:"chat-msg wating-msg"},[e("span",[t._v(t._s(t.$t("base.queue/connecting")))])]):t._e()},s=[],o=i("2f62"),r={computed:{...Object(o["c"])("zchat",["queuePosition","isChatting","agentMemberjoin"]),show(){const{queuePosition:t,isChatting:e,agentMemberjoin:i}=this;return e&&!i&&0===t}}},a=r,c=(i("4fe9"),i("2877")),l=Object(c["a"])(a,n,s,!1,null,"7cd4df08",null);e["default"]=l.exports},dc3b:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t._self._c;return t.ticketList.length?e("div",{staticClass:"chat-msg self-msg"},[e("Avatar"),e("div",{staticClass:"message-wrapper"},[e("div",{staticClass:"message-container"},[e("div",{staticClass:"list"},t._l(t.ticketList,(function(i,n){return e("div",{key:n,staticClass:"item",on:{click:function(e){return t.linkClick(i,"chat")}}},[e("img",{staticClass:"item-img",attrs:{src:i.fImageUrl}}),e("div",{staticClass:"content"},[e("p",[t._v(t._s(i.fShowName))]),e("i",{staticClass:"htx-icon htx-icon-arrow-outline",staticStyle:{"font-size":"12px",color:"var(--Text-L4)"}})])])})),0)]),e("span",{staticClass:"time"},[t._v(t._s(t._f("formatTime")(t.time)))])])],1):t._e()},s=[],o=i("7b64"),r=i("6f82"),a={name:"SelfService",mixins:[r["a"]],components:{Avatar:o["a"]},data(){return{time:+new Date}}},c=a,l=(i("af0e"),i("1c3e"),i("2877")),u=Object(l["a"])(c,n,s,!1,null,"7ac39a24",null);e["default"]=u.exports},decc:function(t,e,i){"use strict";i("a67d")},df7ea:function(t,e,i){"use strict";i("cc34")},df8f:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"chat-msg answer-msg"},[e("Avatar"),e("div",{staticClass:"message-wrapper"},[e("div",{staticClass:"message-container"},[e("div",{staticClass:"list"},[e("div",{staticClass:"item"},[e("span",[t._v(t._s(t.guessList))])])]),e("div",{staticClass:"action"},[e("div",{staticClass:"button"},[e("img",{attrs:{src:i("6065"),alt:"resolved"}}),e("span",[t._v(t._s(t.$t("base.slove")))])]),e("div",{staticClass:"button"},[e("img",{attrs:{src:i("be04"),alt:"unsolved"}}),e("span",[t._v(t._s(t.$t("base.unslove")))])])])]),e("span",{staticClass:"time"},[t._v(t._s(t._f("formatTime")(t.time)))])])],1)},s=[],o=i("7b64"),r={name:"AnswerMessage",props:{info:{type:Object,default(){return{}}}},components:{Avatar:o["a"]},data(){return{guessList:"如何买入比特币或稳定币:\nnttps://www.huobi.com/support/zhcn/detail/74923614894649\n\n如何查看和划转资产\nhttps://www.huobi.com/support/zh-cn/detail/64923615444136\n\n如何在火必APP中充入和提出虚拟资产https://www.huobi.com/support/zhcn/detail/74923617976436\n\n怎样在火必进行法币交易:\nhttps://www.huobi.com/support/zh-cn/detail/94923619879750",time:"22:49"}},computed:{message(){return"您好，我44是火宝，您可以直接向火宝描述您的问题，火宝会尽全力为您解决。会尽全力为您解决。"}}},a=r,c=(i("b33d"),i("40a6"),i("2877")),l=Object(c["a"])(a,n,s,!1,null,"a1528d6a",null);e["default"]=l.exports},e074:function(t,e,i){"use strict";var n=i("2f62"),s=i("cb24"),o=i.n(s),r=i("f953"),a=i("fa7d"),c=i("8b6f"),l=i("4018"),u=i("c205");e["a"]={mixins:[l["a"]],data(){return{isInitialized:!1,isSocketClosed:!1,showLoginDialog:!1,isConnecting:!1}},components:{LoginPopupDialog:u["a"]},computed:{...Object(n["c"])("base",["sceneCode","uid","departmentId","deptId","defaultDepartmentId","locale","isApp","isKorea","uidExistScene","visitorInfo"]),...Object(n["c"])("zchat",["socketSatus","accountStatus"])},methods:{...Object(n["b"])("base",["setDepartmentIdAction"]),...Object(n["b"])("zchat",["chatEventAction","setChatStatusAction","updateChatListAction"]),initChat(){o.a.init({account_key:"gUj42jsOShnJLX9O8bhx3WnaLBpsUW3s"});const t=["connection_update","account_status","visitor_update","agent_update","chat","error"];t.forEach(t=>{o.a.on(t,e=>{this.chatEventAction({type:t,detail:e})})}),this.departmentId&&this.toZendedsk("query");const{source:e}=this.$route.query;["earn","copytrading"].includes(e)&&(window.sensors.track("customer_sc_earn_click"),this.toEarnChat())},toZendedsk(t){if("query"===t&&!this.uid)return void this.toLogin();try{r["a"].setUserStatistics({type:9})}catch(n){console.log("error :>> ",n)}if(window.sensors.track("customer_sc_call_customer_click"),7===+this.sceneCode)return void this.showTicket();const e=o.a.getDepartment(this.departmentId),i=e&&e.status;if("offline"===i)this.showTicket();else{if(window.sensors.track("customer_sc_customer_pop_expose"),this.uid)return void this.toArtificial();this.visitorLogin()}},toLogin(){this.isApp&&this.$callNative("20010013",()=>{window.location.reload()})},showTicket(){this.updateChatListAction([{type:"tips",info:{message:this.$i18n.t("base.contact/information"),needTicket:!0}}])},toEarnChat(){try{r["a"].setUserStatistics({type:3,questionId:""})}catch(i){console.log("error :>> ",i)}const t=o.a.getDepartment(this.defaultDepartmentId),e=t&&t.status;if("offline"===e)this.showTicket();else{if(window.sensors.track("customer_sc_customer_earn_expose"),this.setDepartmentIdAction(this.defaultDepartmentId),this.uid)return void this.toArtificial();this.visitorLogin()}},async humanChatClick(t=""){if(!this.isConnecting){"footer"===t?window.sensors.track("customer_sc_footer_click"):window.sensors.track("newcustomer_guessclick",{button_name:"contact"}),this.isConnecting=!0;try{const t=await Object(c["a"])();if(!t)return void(this.showLoginDialog=!0);this.beforeConnectChat()}catch(e){console.error("连接客服失败:",e)}finally{setTimeout(()=>{this.isConnecting=!1},500)}}},close(){this.showLoginDialog=!1},beforeConnectChat(){let t=1*this.defaultDepartmentId;if(this.deptId&&(t=1*this.deptId),this.isKorea){t=8020264978971;const e=Number(a["a"].getSeoulDate()),i=(new Date).getDay();if(e<=9&&e>=4||0===i||6===i)return void this.$bus.emit("toastEvent",{time:2e3,type:"success",msg:"안녕하세요. 고객센터 문의 시간은 오전 10：00 시 부터 새벽 4：00시 까지 입니다. 해당 시간에 문의해 주세요. "})}try{r["a"].setUserStatistics({type:3,questionId:""})}catch(n){console.log("error :>> ",n)}if(7===+this.sceneCode)return void this.showTicket();const e=o.a.getDepartment(t),i=e&&e.status;if("offline"===i)this.showTicket();else{if(window.sensors.track("customer_sc_customer_pop_expose"),this.setDepartmentIdAction(t),this.uid)return void this.toArtificial();this.visitorLogin()}},visitorLogin(){const t={email:a["a"].maskEmail(this.visitorInfo.email),phone:a["a"].maskPhone(this.visitorInfo.phone),display_name:this.visitorInfo.displayName};this.connectChat(t)},async toArtificial(){const{email:t,phone:e,display_name:i=""}=o.a.getVisitorInfo();let n=`${i} UID: ${this.uid}`;i&&-1!==i.indexOf("UID:")&&(n=`${i.split("UID:")[0]}UID: ${this.uid}`);const s={email:a["a"].maskEmail(t),phone:a["a"].maskPhone(e),display_name:n};this.connectChat(s),setTimeout(()=>{this.uidExistScene.length>0&&this.uidExistScene.forEach(t=>{o.a.addTags([t],()=>{})})},2e3)},connectChat(t){"closed"===this.socketSatus&&o.a.reconnect(),o.a.addTags([this.locale],e=>{console.log("addTags :>> ",e),o.a.setVisitorInfo(t,t=>{if(!t){try{o.a.setVisitorDefaultDepartment(this.departmentId)}catch(e){console.error("部门id不对")}o.a.sendChatMsg(this.$i18n.t("base.hello")),this.updateChatListAction([{type:"wating"}]),this.setChatStatusAction(!0)}})})}},watch:{serviceShow(t){t&&!this.isInitialized&&this.initChat()},socketSatus(t){"closed"===t?(this.isSocketClosed=!0,this.setChatStatusAction(!1),o.a.reconnect()):"connected"===t&&(this.isInitialized=!0,this.isSocketClosed&&(this.logoutChat(),this.isSocketClosed=!1))},accountStatus(t){"offline"===t&&(this.logoutChat(),this.setChatStatusAction(!1))}}}},e0f9:function(t,e,i){t.exports=i.p+"img/icon_unsolve.59ecf45a.svg"},e28a:function(t,e,i){"use strict";i("739e")},e5cb:function(t,e,i){"use strict";var n=i("d066"),s=i("1a2d"),o=i("9112"),r=i("3a9b"),a=i("d2bb"),c=i("e893"),l=i("aeb0"),u=i("7156"),d=i("e391"),h=i("ab36"),p=i("6f19"),f=i("83ab"),m=i("c430");t.exports=function(t,e,i,g){var v="stackTraceLimit",_=g?2:1,b=t.split("."),w=b[b.length-1],y=n.apply(null,b);if(y){var k=y.prototype;if(!m&&s(k,"cause")&&delete k.cause,!i)return y;var $=n("Error"),C=e((function(t,e){var i=d(g?e:t,void 0),n=g?new y(t):new y;return void 0!==i&&o(n,"message",i),p(n,C,n.stack,2),this&&r(k,this)&&u(n,this,C),arguments.length>_&&h(n,arguments[_]),n}));if(C.prototype=k,"Error"!==w?a?a(C,$):c(C,$,{name:!0}):f&&v in y&&(l(C,y,v),l(C,y,"prepareStackTrace")),c(C,y),!m)try{k.name!==w&&o(k,"name",w),k.constructor=C}catch(E){}return C}}},e780:function(t,e,i){"use strict";i.r(e);var n=function(){var t,e,i=this,n=i._self._c;return n("div",{staticClass:"chat-msg queue-msg"},[n("Avatar",{attrs:{type:"system"}}),n("div",{staticClass:"message-wrapper"},[n("div",{staticClass:"message-container"},[n("div",{staticClass:"message"},[i._v(i._s(null===(t=i.chatObj.info)||void 0===t?void 0:t.message))]),null!==(e=i.chatObj.info)&&void 0!==e&&e.needTicket?n("div",{staticClass:"ticket-container"},[n("a",{ref:"noopener noreferrer",attrs:{href:i.ticketUrl,target:"_blank"},on:{click:i.goTicketTrack}},[i._v(" "+i._s(i.$t("base.ticket"))+" ")])]):i._e()]),n("span",{staticClass:"time"},[i._v(i._s(i._f("formatTime")(i.chatObj.timestamp)))])])],1)},s=[],o=i("2f62"),r=i("7b64"),a={name:"QueueMessage",components:{Avatar:r["a"]},props:{chatObj:{type:Object,default(){return{}}}},computed:{...Object(o["c"])("base",["locale"]),ticketUrl(){return`https://huobiglobal.zendesk.com/hc/${this.locale}/requests/new?ticket_form_id=24220886681243`}},methods:{goTicketTrack(){window.sensors.track("customer_sc_submit_system_click")}}},c=a,l=(i("ad5e"),i("cb26"),i("2877")),u=Object(l["a"])(c,n,s,!1,null,"13412222",null);e["default"]=u.exports},efa1:function(t,e,i){},f0d9:function(t,e,i){},f53a:function(t,e,i){},f9b9:function(t,e,i){"use strict";i("d936")}}]);